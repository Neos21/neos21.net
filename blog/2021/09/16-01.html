<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="theme-color" content="#0990d0">
    <!-- Google Search Console -->
    <meta name="google-site-verification" content="AvoEr3mUJFF2H_mPWWgShfmjBVP3ywRpyx9hxeeq2d4">
    <title>Node.js で使えそうな軽量 NoSQL ライブラリを調べる - Neo's World</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/styles.css">
    <link rel="canonical" href="https://neos21.net/blog/2021/09/16-01.html">
    <link rel="search" type="application/opensearchdescription+xml" title="neos21.net" href="/opensearch.xml">
    <link rel="alternate" type="application/atom+xml" href="/feeds.xml">
    <link rel="author" href="http://www.hatena.ne.jp/neos21/">
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YMHFLZP1M1"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-YMHFLZP1M1');gtag('config','UA-106501-1');</script>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6475907504235292" crossorigin="anonymous"></script>
  </head>
  <body>
    <div id="container">
      <header id="header">
        <div id="header-brand">
          <div id="header-brand-contents">
            <div id="site-title"><a href="/index.html">Neo's World</a></div>
            <nav id="header-links">
              <ul>
                <li id="header-link-about"><a href="/about/index.html" title="About"><span>About</span></a></li>
                <li id="header-link-search"><a href="/about/search.html" title="Search"><span>Search</span></a></li>
                <li id="header-link-feeds"><a href="/feeds.xml" title="Feeds"><span>Feeds</span></a></li>
                <li id="header-link-to-bottom"><a href="#footer" title="To Bottom"><span>▼ To Bottom</span></a></li>
              </ul>
            </nav>
          </div>
        </div>
        <nav id="global-nav">
          <ul>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/tech/index.html">Tech</a></li>
            <li><a href="/music/index.html">Music</a></li>
            <li><a href="/games/index.html">Games</a></li>
            <li><a href="/gallery/index.html">Gallery</a></li>
            <li><a href="/etc/index.html">Etc.</a></li>
          </ul>
        </nav>
        <nav id="path">
          <ul>
            <li><a href="/index.html">Neo's World</a></li>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/blog/2021/index.html">2021年</a></li>
            <li><a href="/blog/2021/09/index.html">09月</a></li>
          </ul>
        </nav>
      </header>
      <main id="main">
        <div id="header-date"><time>2021-09-16</time></div>
        <h1 id="page-title">Node.js で使えそうな軽量 NoSQL ライブラリを調べる</h1>

<p>Node.js でちょっとしたアプリを開発していて、PostgreSQL とか MySQL とかいう DB を用意するのは大仰かな、という時に、<em>SQLite</em> を選定することはまぁありがちだろう。</p>
<p>しかし、それよりもさらにもう少しお手軽に、インストールが不要な・楽なライブラリは何かないかな、つーか RDBMS ほどガッチリした型がないモノもあるんだよなー、とか思って、<em>軽量な NoSQL ライブラリ</em>を調べてみた。</p><div class="ad-amazon">
  <div class="ad-amazon-image">
    <a href="https://www.amazon.co.jp/dp/B07143JTD9?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">
      <img src="https://m.media-amazon.com/images/I/51hHWYQqL4L._SL160_.jpg" width="112" height="160">
    </a>
  </div>
  <div class="ad-amazon-info">
    <div class="ad-amazon-title">
      <a href="https://www.amazon.co.jp/dp/B07143JTD9?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">RDB技術者のためのNoSQLガイド</a>
    </div>
  </div>
</div>
<h2 id="目次"><a class="header-link" href="#目次"><span class="header-link-mark"></span></a>目次</h2>
<ul>
  <li><a href="#unqlite">UnQLite</a></li>
  <li><a href="#tingodb">TingoDB</a></li>
  <li><a href="#nedb">NeDB</a></li>
  <li><a href="#dby--dbyaml">dby : DBYaml</a></li>
  <li><a href="#%E8%A9%A6%E3%81%97%E3%81%A6%E3%81%AA%E3%81%84%E3%83%A4%E3%83%84">試してないヤツ</a></li>
  <li><a href="#%E3%81%A9%E3%82%8C%E3%82%92%E4%BD%BF%E3%81%86%E3%81%8B">どれを使うか</a></li>
</ul>
<h2 id="unqlite"><a class="header-link" href="#unqlite"><span class="header-link-mark"></span></a>UnQLite</h2>
<p>UnQLite は、SQLite に近い思想で作られている、シングル DB ファイルで管理される NoSQL ライブラリ。なんて読むんだろう、うんこらいと？ｗ</p>
<p>C 言語ベースで作られているのだが、Node.js から操作するラッパーの npm パッケージがメンテされておらず、Node.js からの利用は難しい。</p>
<p>また、そもそもローカルでの UnQLite 単独の動作も上手くいかなかったので、今回はドッグフーディングできず。</p>
<ul>
  <li><a href="https://unqlite.org/">UnQLite - An Embeddable NoSQL Database Engine</a></li>
  <li><a href="https://github.com/symisc/unqlite">symisc/unqlite: An Embedded NoSQL, Transactional Database Engine</a></li>
</ul>
<h2 id="tingodb"><a class="header-link" href="#tingodb"><span class="header-link-mark"></span></a>TingoDB</h2>
<p>TingoDB は、NoSQL で知られる MongoDB と互換性があるという、Node.js ベースのライブラリ。ちんごでーびー？ｗ</p>
<ul>
  <li><a href="https://github.com/sergeyksv/tingodb">sergeyksv/tingodb: Embedded Node.js database upward compatible with MongoDB</a></li>
</ul>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> -S tingodb
</code></pre>
<p>試しに以下のような Node.js スクリプトを書いてみた。</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token constant">DB</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'tingodb'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">Db</span></span><span class="token punctuation">;</span>

<span class="token comment">// 引数で指定した名前のディレクトリを用意しておくこと</span>
<span class="token keyword">const</span> db <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DB</span><span class="token punctuation">(</span><span class="token string">'./tingodb-db'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Collection (Table みたいなモノ) を選択する・コレが `db` で指定したディレクトリ配下にファイルとして作られる</span>
<span class="token keyword">const</span> collection <span class="token operator">=</span> db<span class="token punctuation">.</span><span class="token method function property-access">collection</span><span class="token punctuation">(</span><span class="token string">'hello-world-collection'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Collection に Document (レコードみたいなモノ) を書き込む</span>
collection<span class="token punctuation">.</span><span class="token method function property-access">insert</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span><span class="token punctuation">{</span> hello<span class="token operator">:</span> <span class="token string">'World 1'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> hello<span class="token operator">:</span> <span class="token string">'World 2'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> w<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token comment">// Primary に書き込みが完了したら成功とする、デフォルトオプション</span>
  <span class="token punctuation">(</span><span class="token parameter">insertError<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>insertError<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">'Insert Error'</span><span class="token punctuation">,</span> insertError<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Insert Result'</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 条件を指定して Document を検索・取得する</span>
    collection<span class="token punctuation">.</span><span class="token method function property-access">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> hello<span class="token operator">:</span> <span class="token string">'World 2'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">findError<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>findError<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">'Find Error'</span><span class="token punctuation">,</span> findError<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Find Result'</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>実行してみる。</p>
<pre class="language-bash"><code class="language-bash">$ node ./tingodb.js
Insert Result <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> hello: <span class="token string">'World 1'</span>, _id: ObjectID <span class="token punctuation">{</span> id: <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>,
  <span class="token punctuation">{</span> hello: <span class="token string">'World 2'</span>, _id: ObjectID <span class="token punctuation">{</span> id: <span class="token number">3</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
Find Result <span class="token punctuation">{</span> hello: <span class="token string">'World 2'</span>, _id: ObjectID <span class="token punctuation">{</span> id: <span class="token number">3</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre>
<p>すると、次のようなファイルが生成されていた。</p>
<ul>
  <li><code>./tingodb-db/hello-world-collection</code></li>
</ul>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><span class="token property">"k"</span><span class="token operator">:</span><span class="token string">"0000000078"</span><span class="token punctuation">,</span><span class="token property">"o"</span><span class="token operator">:</span><span class="token string">"0000000048"</span><span class="token punctuation">,</span><span class="token property">"v"</span><span class="token operator">:</span><span class="token string">"001"</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">"_id"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">"_uid"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">"_dt"</span><span class="token operator">:</span><span class="token number">1630979090746</span><span class="token punctuation">,</span><span class="token property">"_s"</span><span class="token operator">:</span><span class="token string">"4db1f9e54aeb4202e72f33276616f874"</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">"hello"</span><span class="token operator">:</span><span class="token string">"World 1"</span><span class="token punctuation">,</span><span class="token property">"_id"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"$wrap"</span><span class="token operator">:</span><span class="token string">"$oid"</span><span class="token punctuation">,</span><span class="token property">"v"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">"k"</span><span class="token operator">:</span><span class="token string">"0000000078"</span><span class="token punctuation">,</span><span class="token property">"o"</span><span class="token operator">:</span><span class="token string">"0000000048"</span><span class="token punctuation">,</span><span class="token property">"v"</span><span class="token operator">:</span><span class="token string">"001"</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">"_id"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token property">"_uid"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token property">"_dt"</span><span class="token operator">:</span><span class="token number">1630979090748</span><span class="token punctuation">,</span><span class="token property">"_s"</span><span class="token operator">:</span><span class="token string">"2f62c9a076c6455b0d4154c968c58c21"</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">"hello"</span><span class="token operator">:</span><span class="token string">"World 2"</span><span class="token punctuation">,</span><span class="token property">"_id"</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token property">"$wrap"</span><span class="token operator">:</span><span class="token string">"$oid"</span><span class="token punctuation">,</span><span class="token property">"v"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre>
<p>拡張子はないが JSON チックな形式で記述されており、テキストエディタで開ける。メタ情報とデータが2行で1セットになっている感じ。雰囲気は JSON Lines っぽい。</p>
<ul>
  <li>参考：[JSON Lines](<a href="https://jsonlines.org/">https://jsonlines.org/</a></li>
  <li>参考：<a href="https://katsumiinoue.wordpress.com/2019/12/04/jq%E3%81%A7json-lines-jsonl/">jqでJSON Lines(*.jsonl) – INOUE Katsumi at Tokyo</a>)</li>
</ul>
<p>自分は MongoDB が詳しくないのだが、データを JSON チックなテキストファイルで管理できるので扱いやすいかも。MongoDB のパッケージと互換性を保つためなのか、コールバック形式で記述するのがちょいと面倒かしら。</p>
<ul>
  <li>参考：<a href="https://qiita.com/svjunic/items/285e9cf20169d70aa1fa">MongoDB コマンドメモとか書き - Qiita</a></li>
  <li>参考：<a href="https://qiita.com/y13i/items/78c9f45acd07a9478d2d">俺でもわかるシリーズ: MongoDBのレプリケーション - Qiita</a></li>
</ul><div class="ad-amazon">
  <div class="ad-amazon-image">
    <a href="https://www.amazon.co.jp/dp/B07BGC4MJ1?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">
      <img src="https://m.media-amazon.com/images/I/51OaInh9AkL._SL160_.jpg" width="99" height="160">
    </a>
  </div>
  <div class="ad-amazon-info">
    <div class="ad-amazon-title">
      <a href="https://www.amazon.co.jp/dp/B07BGC4MJ1?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">MongoDB 解体新書: これ１冊で即実践レベル！究極の入門書 (専門書)</a>
    </div>
  </div>
</div>
<h2 id="nedb"><a class="header-link" href="#nedb"><span class="header-link-mark"></span></a>NeDB</h2>
<p>NeDB は、TingoDB よりももう少しライトに使えそうなライブラリ。データはまさに JSON Lines 形式で管理される。</p>
<ul>
  <li><a href="https://github.com/louischatriot/nedb">louischatriot/nedb: The JavaScript Database, for Node.js, nw.js, electron and the browser</a></li>
  <li><a href="https://qiita.com/tinymouse/items/0731eef4aebf2779bd0b">NeDB を使ってみた - Qiita</a></li>
</ul>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> -S nedb
</code></pre>
<p>前述の TingoDB とほとんど同じような Insert・Select をやってみる。</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token maybe-class-name">Datastore</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'nedb'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 引数で指定した名前のディレクトリ・ファイルがなければ自動的に作成される</span>
<span class="token comment">// 引数で Collection (Table みたいなモノ) 名を指定する・コレがファイルとして作られる</span>
<span class="token keyword">const</span> collection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Datastore</span><span class="token punctuation">(</span><span class="token punctuation">{</span> filename<span class="token operator">:</span> <span class="token string">'./nedb-db/hello-world-collection'</span><span class="token punctuation">,</span> autoload<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Collection に Document (レコードみたいなモノ) を書き込む</span>
collection<span class="token punctuation">.</span><span class="token method function property-access">insert</span><span class="token punctuation">(</span>
  <span class="token punctuation">[</span><span class="token punctuation">{</span> hello<span class="token operator">:</span> <span class="token string">'World 1'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> hello<span class="token operator">:</span> <span class="token string">'World 2'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">insertError<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>insertError<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">'Insert Error'</span><span class="token punctuation">,</span> insertError<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Insert Result'</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 条件を指定して Document を検索・取得する</span>
    collection<span class="token punctuation">.</span><span class="token method function property-access">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> hello<span class="token operator">:</span> <span class="token string">'World 2'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">findError<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">if</span><span class="token punctuation">(</span>findError<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span> <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">'Find Error'</span><span class="token punctuation">,</span> findError<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Find Result'</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>実行するとこんな感じ。メタデータとなる <code>_id</code> の持ち方が TingoDB とは違う。</p>
<pre class="language-bash"><code class="language-bash">$ node ./nedb.js
Insert Result <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> hello: <span class="token string">'World 1'</span>, _id: <span class="token string">'ji9uXbxP92l42coh'</span> <span class="token punctuation">}</span>,
  <span class="token punctuation">{</span> hello: <span class="token string">'World 2'</span>, _id: <span class="token string">'0VwBfnDfSuHa1JIm'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
Find Result <span class="token punctuation">{</span> hello: <span class="token string">'World 2'</span>, _id: <span class="token string">'0VwBfnDfSuHa1JIm'</span> <span class="token punctuation">}</span>
</code></pre>
<p>生成された DB ファイルはテキストファイルとして開ける。JSON Lines っぽい感じで、1行が1レコード (1 Document) となっている。</p>
<ul>
  <li><code>./nedb-db/hello-world-collection</code></li>
</ul>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><span class="token property">"hello"</span><span class="token operator">:</span><span class="token string">"World 1"</span><span class="token punctuation">,</span><span class="token property">"_id"</span><span class="token operator">:</span><span class="token string">"ji9uXbxP92l42coh"</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token property">"hello"</span><span class="token operator">:</span><span class="token string">"World 2"</span><span class="token punctuation">,</span><span class="token property">"_id"</span><span class="token operator">:</span><span class="token string">"0VwBfnDfSuHa1JIm"</span><span class="token punctuation">}</span>
</code></pre>
<h2 id="dby--dbyaml"><a class="header-link" href="#dby--dbyaml"><span class="header-link-mark"></span></a>dby : DBYaml</h2>
<p>dby は、YAML ファイルでデータを管理するライブラリ。Go 言語製で、Node.js (npm) 向けのラッパーはなさそうだが、面白そうだったので紹介のみ。</p>
<ul>
  <li><a href="https://github.com/ulfox/dby">ulfox/dby: Simple Yaml DB</a></li>
</ul>
<h2 id="試してないヤツ"><a class="header-link" href="#試してないヤツ"><span class="header-link-mark"></span></a>試してないヤツ</h2>
<p>その他試していないのだが、以下はいずれも JSON ファイルとしてデータを管理してくれそうなライブラリ。サンプルコードを見るに、使用感は NeDB や TingoDB に似ている感じ。</p>
<ul>
  <li>参考：<a href="https://www.it-mure.jp.net/ja/javascript/nodejs%E3%81%A7%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E8%BB%BD%E9%87%8Fjavascript-db/940365517/">javascript — Node.jsで使用する軽量Javascript DB</a></li>
  <li>Persistence
    <ul>
      <li><a href="https://github.com/creationix/node-persistence">creationix/node-persistence: A high level persistance/database system for node.js</a></li>
    </ul>
  </li>
  <li>nStore
    <ul>
      <li><a href="https://github.com/creationix/nstore">creationix/nstore: nStore is a simple, in-process key/value database for node.js</a></li>
    </ul>
  </li>
  <li>levelup
    <ul>
      <li><a href="https://github.com/Level/levelup">Level/levelup: A wrapper for abstract-leveldown compliant stores, for Node.js and browsers.</a></li>
    </ul>
  </li>
  <li>node-dirty
    <ul>
      <li><a href="https://github.com/felixge/node-dirty">felixge/node-dirty: A tiny &#x26; fast key value store with append-only disk log. Ideal for apps with &#x3C; 1 million records.</a></li>
    </ul>
  </li>
  <li>LocallyDB
    <ul>
      <li><a href="https://github.com/btwael/locallydb">btwael/locallydb: An easy-to-use and lightweight local storage database for node.js and node-webkit</a></li>
      <li><a href="http://boutglay.com/locallydb/">LocallyDB</a></li>
    </ul>
  </li>
  <li>UeberDB
    <ul>
      <li><a href="https://github.com/ether/ueberDB">ether/ueberDB: Abstract your databases, make datababies. Transforms every database into a object key value store.</a></li>
    </ul>
  </li>
  <li>jaguarDB (Archived)
    <ul>
      <li><a href="https://github.com/hectorcorrea/jaguarDb">hectorcorrea/jaguarDb: The simplest database for Node.js that could possible work.</a></li>
    </ul>
  </li>
</ul>
<h2 id="どれを使うか"><a class="header-link" href="#どれを使うか"><span class="header-link-mark"></span></a>どれを使うか</h2>
<p>UnQLite は C 言語ベースなので、環境を選ばず使えそうかなーとは思うのだが、自分の環境では上手く使えなかったので惜しいなーと。</p>
<p>それ以外は、DB とするファイルに JSON や YAML といった形式を使うライブラリが多かった。テキストベースで扱いやすいし、配列の入れ子なども出来て NoSQL 的なデータの持ち方が容易なので、さもありなん。</p>
<ul>
  <li>JSON ベースだと、ダブルクォートやブレース記号が多発するので、ファイルの可読性がちょい下がりがち。一方で、改行やインデントを省いて容量を削減したり、JS の世界ではそのまま連想配列として扱えるので、Node.js 上で扱う場合は親和性は高い。</li>
  <li>YAML の場合、JSON よりはファイルの可読性が高いだろう。ただし、(JSON 記法を混ぜない場合) 改行やインデントをサボれないので、ファイルサイズはちょっと大きくなりがち。JS 界隈ではパースして読み込む必要があるため、あまり表立って使用されないが、Go 言語などのプラットフォームで開発する場合はもう少し親和性も高そうだ。</li>
</ul>
<p>今回ドッグフーディングした TingoDB と NeDB はよく似ている。結局 JSON ファイルで管理するので、ファイル I/O 性能に左右され、ライブラリとしての性能は大差ないかなと思う。いずれもコールバック関数で処理を記述していくタイプで、コーディングスタイルも大きく違わないかしら。大きな違いは「MongoDB の API と互換性があるかどうか」で、TingoDB は互換性があるので、<em>「本番環境では MongoDB を使うつもり」のような要件があるのであれば、TingoDB が良いだろう</em>。そうでなければ、<em>MongoDB の API などを意識せず手軽に書ける NeDB</em> を使うのが良いと思う。</p><div class="ad-rakuten">
  <div class="ad-rakuten-image">
    <a href="https://hb.afl.rakuten.co.jp/hgc/g00reb42.waxycf23.g00reb42.waxyd080/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Frakutenkobo-ebooks%2F079dfe5c512433b9ad8c8fed9327859f%2F&amp;m=http%3A%2F%2Fm.rakuten.co.jp%2Frakutenkobo-ebooks%2Fi%2F13190293%2F">
      <img src="https://thumbnail.image.rakuten.co.jp/@0_mall/rakutenkobo-ebooks/cabinet/6135/2000001856135.jpg?_ex=128x128">
    </a>
  </div>
  <div class="ad-rakuten-info">
    <div class="ad-rakuten-title">
      <a href="https://hb.afl.rakuten.co.jp/hgc/g00reb42.waxycf23.g00reb42.waxyd080/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Frakutenkobo-ebooks%2F079dfe5c512433b9ad8c8fed9327859f%2F&amp;m=http%3A%2F%2Fm.rakuten.co.jp%2Frakutenkobo-ebooks%2Fi%2F13190293%2F">NOSQLの基礎知識【電子書籍】[ 太田洋 ]</a>
    </div>
    <div class="ad-rakuten-shop">
      <a href="https://hb.afl.rakuten.co.jp/hgc/g00reb42.waxycf23.g00reb42.waxyd080/?pc=https%3A%2F%2Fwww.rakuten.co.jp%2Frakutenkobo-ebooks%2F&amp;m=http%3A%2F%2Fm.rakuten.co.jp%2Frakutenkobo-ebooks%2F">楽天Kobo電子書籍ストア</a>
    </div>
    <div class="ad-rakuten-price">価格 : 2200円</div>
  </div>
</div>
<div class="ad-amazon">
  <div class="ad-amazon-image">
    <a href="https://www.amazon.co.jp/dp/4897978874?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">
      <img src="https://m.media-amazon.com/images/I/414k6Oiw9rL._SL160_.jpg" width="112" height="160">
    </a>
  </div>
  <div class="ad-amazon-info">
    <div class="ad-amazon-title">
      <a href="https://www.amazon.co.jp/dp/4897978874?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">NOSQLの基礎知識 (ビッグデータを活かすデータベース技術)</a>
    </div>
  </div>
</div>

      </main>
      <footer id="footer">
        <div id="footer-contents">
          <div id="date-time">
            <dl>
              <dt>Created</dt>
              <dd><time>2021-09-16</time></dd>
              <dt>Last-Modified</dt>
              <dd><time>2021-09-16</time></dd>
            </dl>
          </div>
          <nav id="footer-links">
            <ul>
              <li id="footer-link-about"><a href="/about/index.html" title="About">About</a></li>
              <li id="footer-link-search"><a href="/about/search.html" title="Search">Search</a></li>
              <li id="footer-link-feeds"><a href="/feeds.xml" title="Feeds">Feeds</a></li>
              <li id="footer-link-github"><a href="https://github.com/Neos21/" title="GitHub">GitHub</a></li>
            </ul>
          </nav>
          <nav id="to-top"><a href="#" title="To Top"><span>▲ To Top</span></a></nav>
        </div>
      </footer>
    </div>
  </body>
</html>
