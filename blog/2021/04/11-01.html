<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="theme-color" content="#0990d0">
    <!-- Google Search Console -->
    <meta name="google-site-verification" content="AvoEr3mUJFF2H_mPWWgShfmjBVP3ywRpyx9hxeeq2d4">
    <title>GPT2 再挑戦して WSL で日本語文章を自動生成できた - Neo's World</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/styles.css">
    <link rel="canonical" href="https://neos21.net/blog/2021/04/11-01.html">
    <link rel="search" type="application/opensearchdescription+xml" title="neos21.net" href="/opensearch.xml">
    <link rel="alternate" type="application/atom+xml" href="/feeds.xml">
    <link rel="author" href="http://www.hatena.ne.jp/neos21/">
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YMHFLZP1M1"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-YMHFLZP1M1');gtag('config','UA-106501-1');</script>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6475907504235292" crossorigin="anonymous"></script>
  </head>
  <body>
    <div id="container">
      <header id="header">
        <div id="header-brand">
          <div id="header-brand-contents">
            <div id="site-title"><a href="/index.html">Neo's World</a></div>
            <nav id="header-links">
              <ul>
                <li id="header-link-about"><a href="/about/index.html" title="About"><span>About</span></a></li>
                <li id="header-link-search"><a href="/about/search.html" title="Search"><span>Search</span></a></li>
                <li id="header-link-feeds"><a href="/feeds.xml" title="Feeds"><span>Feeds</span></a></li>
                <li id="header-link-to-bottom"><a href="#footer" title="To Bottom"><span>▼ To Bottom</span></a></li>
              </ul>
            </nav>
          </div>
        </div>
        <nav id="global-nav">
          <ul>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/tech/index.html">Tech</a></li>
            <li><a href="/music/index.html">Music</a></li>
            <li><a href="/games/index.html">Games</a></li>
            <li><a href="/gallery/index.html">Gallery</a></li>
            <li><a href="/etc/index.html">Etc.</a></li>
          </ul>
        </nav>
        <nav id="path">
          <ul>
            <li><a href="/index.html">Neo's World</a></li>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/blog/2021/index.html">2021年</a></li>
            <li><a href="/blog/2021/04/index.html">04月</a></li>
          </ul>
        </nav>
      </header>
      <main id="main">
        <div id="header-date"><time>2021-04-11</time></div>
        <h1 id="page-title">GPT2 再挑戦して WSL で日本語文章を自動生成できた</h1>

<p>日本語の文章を自動生成できる GPT2 Japanese。</p>
<ul>
  <li><a href="https://github.com/tanreinama/gpt2-japanese">tanreinama/gpt2-japanese: Japanese GPT2 Generation Model</a></li>
</ul>
<p>以前やってみようと思ったんだけど上手く動かせなくて断念した。</p>
<ul>
  <li><a href="/blog/2020/12/05-02.html">GPT2 を動かしてみたかったけど TensorFlow で躓いて断念した</a></li>
</ul>
<p>「りんな」も何かモデルをオープンソース化したらしいのだが、<strong>手元の環境でどうやってそいつを動かすのか</strong>の細かい情報が全然なくて頭に来たので、りんなは無視して gpt2-japanese に再挑戦することにした。</p>
<ul>
  <li><a href="https://prtimes.jp/main/html/rd/p/000000009.000070041.html">rinna社、日本語に特化したGPT-2の大規模言語モデルを開発しオープンソース化 ｜rinna株式会社のプレスリリース</a></li>
  <li><a href="https://jp.techcrunch.com/2021/04/08/rinna-japanese-gpt2-medium/">AIチャットボット「りんな」を手がけるrinnaが日本語特化のGPT-2大規模言語モデルをオープンソース化 | TechCrunch Japan</a></li>
  <li><a href="https://github.com/rinnakk/japanese-gpt2">rinnakk/japanese-gpt2: Code for producing Japanese GPT-2 provided by rinna Co., Ltd.</a></li>
  <li><a href="https://note.com/npaka/n/n96dde45fdf8d">Huggingface Transformers 入門 (27) - rinnaの日本語GPT-2モデル｜npaka｜note</a>
    <ul>
      <li><code>pip</code> コマンドが紹介されてて、ちょっとだけ真似しやすそう</li>
    </ul>
  </li>
</ul>
<p>ねぇねぇなんで機械学習とかこの手の界隈って Python や TensorFlow やライブラリ類の環境構築の説明省きまくるの？「皆分かってますよね？」感出して説明省くの止めろよ。Python なんてタダでさえ環境構築が上手く行かなくてキモいクソ言語なんだし、機械学習なんてブラックボックスに見える部分がどうしても多いんだから、人がやって再現性が高められるところはちゃんと再現性担保しろよ。もしかして皆各々の環境にデタラメに環境構築しててどうやって動かすのか分かってないから解説記事書けなかったりするの？Node.js 界隈見習え～。</p>
<ul>
  <li><a href="https://snowman-88888.hatenablog.com/entry/2021/01/30/005323">gpt2-japaneseのmediumモデルで架空のNAIST生をD進させてD進後の状況を独白してもらう - Seitaro Shinagawaの雑記帳</a>
    <ul>
      <li>超説明足りなくて素人の助けにならない例</li>
    </ul>
  </li>
</ul><div class="ad-rakuten">
  <div class="ad-rakuten-image">
    <a href="https://hb.afl.rakuten.co.jp/hgc/g00reb42.waxycf23.g00reb42.waxyd080/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Frakutenkobo-ebooks%2Fe24eaf8cbfd532e4b33befadf1ce949e%2F&amp;m=http%3A%2F%2Fm.rakuten.co.jp%2Frakutenkobo-ebooks%2Fi%2F17329505%2F">
      <img src="https://thumbnail.image.rakuten.co.jp/@0_mall/rakutenkobo-ebooks/cabinet/7438/2000006247438.jpg?_ex=128x128">
    </a>
  </div>
  <div class="ad-rakuten-info">
    <div class="ad-rakuten-title">
      <a href="https://hb.afl.rakuten.co.jp/hgc/g00reb42.waxycf23.g00reb42.waxyd080/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Frakutenkobo-ebooks%2Fe24eaf8cbfd532e4b33befadf1ce949e%2F&amp;m=http%3A%2F%2Fm.rakuten.co.jp%2Frakutenkobo-ebooks%2Fi%2F17329505%2F">現場で使える！TensorFlow開発入門 Kerasによる深層学習モデル構築手法【電子書籍】[ 太田満久 ]</a>
    </div>
    <div class="ad-rakuten-shop">
      <a href="https://hb.afl.rakuten.co.jp/hgc/g00reb42.waxycf23.g00reb42.waxyd080/?pc=https%3A%2F%2Fwww.rakuten.co.jp%2Frakutenkobo-ebooks%2F&amp;m=http%3A%2F%2Fm.rakuten.co.jp%2Frakutenkobo-ebooks%2F">楽天Kobo電子書籍ストア</a>
    </div>
    <div class="ad-rakuten-price">価格 : 2948円</div>
  </div>
</div>
<div class="ad-rakuten">
  <div class="ad-rakuten-image">
    <a href="https://hb.afl.rakuten.co.jp/hgc/g00q0722.waxyc9ff.g00q0722.waxyd017/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fbook%2F16067829%2F&amp;m=http%3A%2F%2Fm.rakuten.co.jp%2Fbook%2Fi%2F19788444%2F">
      <img src="https://thumbnail.image.rakuten.co.jp/@0_mall/book/cabinet/9516/9784839969516.jpg?_ex=128x128">
    </a>
  </div>
  <div class="ad-rakuten-info">
    <div class="ad-rakuten-title">
      <a href="https://hb.afl.rakuten.co.jp/hgc/g00q0722.waxyc9ff.g00q0722.waxyd017/?pc=https%3A%2F%2Fitem.rakuten.co.jp%2Fbook%2F16067829%2F&amp;m=http%3A%2F%2Fm.rakuten.co.jp%2Fbook%2Fi%2F19788444%2F">詳解ディープラーニング 第2版 TensorFlow/Keras・PyTorchによる時系列データ処理 [ 巣籠悠輔 ]</a>
    </div>
    <div class="ad-rakuten-shop">
      <a href="https://hb.afl.rakuten.co.jp/hgc/g00q0722.waxyc9ff.g00q0722.waxyd017/?pc=https%3A%2F%2Fwww.rakuten.co.jp%2Fbook%2F&amp;m=http%3A%2F%2Fm.rakuten.co.jp%2Fbook%2F">楽天ブックス</a>
    </div>
    <div class="ad-rakuten-price">価格 : 3740円</div>
  </div>
</div>
<h2 id="目次"><a class="header-link" href="#目次"><span class="header-link-mark"></span></a>目次</h2>
<ul>
  <li><a href="#%E3%81%93%E3%81%AE%E3%83%9A%E3%83%BC%E3%82%B8%E3%81%8C%E5%8F%82%E8%80%83%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%9F">このページが参考になった</a></li>
  <li><a href="#windows-gitbash-%E7%92%B0%E5%A2%83%E3%81%A7%E3%81%AF%E4%B8%8A%E6%89%8B%E3%81%8F%E3%81%84%E3%81%8B%E3%81%AA%E3%81%84%E3%81%8B%E3%82%89%E6%AD%A2%E3%82%81%E3%82%8D">Windows GitBash 環境では上手くいかないから止めろ</a></li>
  <li><a href="#wsl-%E3%81%A7%E3%82%84%E3%82%8A%E3%81%BE%E3%81%97%E3%82%87%E3%81%86">WSL でやりましょう</a></li>
  <li><a href="#%E5%8B%95%E3%81%8F%E3%82%88%E3%81%86%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%9F">動くようになった</a></li>
  <li><a href="#%E3%83%AF%E3%83%BC%E3%83%8B%E3%83%B3%E3%82%B0%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%9D%9E%E8%A1%A8%E7%A4%BA%E3%81%AB%E3%81%99%E3%82%8B">ワーニングメッセージを非表示にする</a></li>
  <li><a href="#%E3%82%82%E3%81%86%E5%B0%91%E3%81%97%E5%8B%95%E4%BD%9C%E7%A2%BA%E8%AA%8D%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B">もう少し動作確認してみる</a></li>
  <li><a href="#%E6%89%80%E6%84%9F">所感</a></li>
  <li><a href="#%E3%81%BE%E3%81%A8%E3%82%81">まとめ</a>
    <ul>
      <li><a href="#gpt2-japanese-%E3%82%92%E5%8B%95%E3%81%8B%E3%81%99%E3%81%9F%E3%82%81%E3%81%AB%E5%BF%85%E8%A6%81%E3%81%AA-ospython-%E7%92%B0%E5%A2%83">gpt2-japanese を動かすために必要な OS・Python 環境</a></li>
      <li><a href="#%E7%B6%BA%E9%BA%97%E3%81%AA-python-v363-%E7%92%B0%E5%A2%83%E3%82%92%E7%94%A8%E6%84%8F%E3%81%99%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AB--pyenv-%E3%82%92%E5%85%A5%E3%82%8C%E3%82%8B">綺麗な Python v3.6.3 環境を用意するために : pyenv を入れる</a></li>
      <li><a href="#gpt2-japanese-%E3%81%A8%E4%BE%9D%E5%AD%98%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%81%AE%E6%BA%96%E5%82%99%E6%89%8B%E9%A0%86">gpt2-japanese と依存ライブラリの準備手順</a></li>
      <li><a href="#gpt2-generatepy-%E3%81%AE%E3%83%AF%E3%83%BC%E3%83%8B%E3%83%B3%E3%82%B0%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%82%92%E9%9D%9E%E8%A1%A8%E7%A4%BA%E3%81%AB%E3%81%99%E3%82%8B"><code>gpt2-generate.py</code> のワーニングメッセージを非表示にする</a></li>
    </ul>
  </li>
  <li><a href="#%E3%81%9D%E3%81%AE%E4%BB%96%E8%A6%8B%E3%81%9F%E3%83%9A%E3%83%BC%E3%82%B8">その他見たページ</a></li>
</ul>
<h2 id="このページが参考になった"><a class="header-link" href="#このページが参考になった"><span class="header-link-mark"></span></a>このページが参考になった</h2>
<p>最終的に、以下のページが参考になったので、先に紹介しておく。</p>
<ul>
  <li><a href="https://qiita.com/Afo_guard_enthusiast/items/07d196aeaba366e30ab4">日本語学習済みのGPT-2 pretrained modelを使って、入力文に続いて、どんな文章が生成されるのかを眺めてみた - Qiita</a></li>
</ul>
<p>前回挑戦した時にこの記事があったら上手く行ったかもなぁ。</p>
<h2 id="windows-gitbash-環境では上手くいかないから止めろ"><a class="header-link" href="#windows-gitbash-環境では上手くいかないから止めろ"><span class="header-link-mark"></span></a>Windows GitBash 環境では上手くいかないから止めろ</h2>
<p>色々こねこねしたんだけど、Windows GitBash・GitSDK 上では pyenv-virtualenv の環境構築が出来なかったので駄目だった。以下のログは失敗の記録なので、WSL 環境で上手く行ったログまで飛ばしてもらって良い。</p>
<ul>
  <li>GitSDK で検証した。事前環境
    <ul>
      <li>この時は気付いていなかったのだが、Python 3.7.4 な時点で、gpt2-japanese が想定する環境は動かないらしい</li>
    </ul>
  </li>
</ul>
<pre class="language-bash"><code class="language-bash">$ <span class="token builtin class-name">type</span> python
python はハッシュされています <span class="token punctuation">(</span>/usr/bin/python<span class="token punctuation">)</span>
$ <span class="token builtin class-name">type</span> python3
python3 は /usr/bin/python3 です
$ <span class="token builtin class-name">type</span> python2
python2 は /usr/bin/python2 です
$ python --version
Python <span class="token number">3.7</span>.4
$ python3 --version
Python <span class="token number">3.7</span>.4
$ python2 --version
Python <span class="token number">2.7</span>.17
</code></pre>
<ul>
  <li>gpt2-japanese を入れてみる</li>
</ul>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">git</span> clone https://github.com/tanreinama/gpt2-japanese
$ <span class="token builtin class-name">cd</span> ./gpt2-japanese/

<span class="token comment"># 1.2GB 程度。2分程度で DL した</span>
$ <span class="token function">wget</span> https://www.nama.ne.jp/models/gpt2ja-medium.tar.bz2
$ <span class="token function">tar</span> xvfj gpt2ja-medium.tar.bz2

<span class="token comment"># 公式の README にもある動作確認用のコマンド。pip で何も入れていないので当然何も動かない</span>
$ python3 gpt2-generate.py --model gpt2ja-medium --num_generate <span class="token number">1</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"gpt2-generate.py"</span>, line <span class="token number">3</span>, <span class="token keyword">in</span> <span class="token operator">&#x3C;</span>module<span class="token operator">></span>
    <span class="token function">import</span> numpy as np
ModuleNotFoundError: No module named <span class="token string">'numpy'</span>

<span class="token comment"># tensorflow v1.14 を入れようとするも失敗。</span>
$ pip <span class="token function">install</span> <span class="token assign-left variable">tensorflow</span><span class="token operator">==</span><span class="token number">1.14</span>
ERROR: Could not <span class="token function">find</span> a version that satisfies the requirement <span class="token assign-left variable">tensorflow</span><span class="token operator">==</span><span class="token number">1.14</span> <span class="token punctuation">(</span>from versions: none<span class="token punctuation">)</span>
ERROR: No matching distribution found <span class="token keyword">for</span> <span class="token assign-left variable">tensorflow</span><span class="token operator">==</span><span class="token number">1.14</span>
</code></pre>
<p>この辺は前回も失敗していたので、案の定ダメだった。調べてみると、<code>pip</code> のバージョンが古いとこうなるとか、Python v3.6 系じゃないとダメだとか、情報が出てきた。</p>
<ul>
  <li><a href="https://sukota.hatenablog.com/entry/2018/10/24/160521">pipでtensorflowのインストールに詰まった時は - すこたのブログ</a>
    <ul>
      <li>
        <blockquote>
          <p>Pythonのバージョンが3.7.0だとTensorFlowが対応しておらずimport errorが発生するみたいです。<br>僕も実機で確認しました。<br>対応策としてはPyhtonを3.6.6にダウングレードするのが一番安全とのことです。</p>
        </blockquote>
      </li>
    </ul>
  </li>
</ul>
<p>そこで、複数のバージョンの Python をインストールできる <strong><code>pyenv</code></strong> を入れてみようと思う。pyenv のプラグインで <em><code>pyenv-virtualenv</code></em> というモノもあり、コレも入れてやると、環境をさらに分けられるらしい。</p>
<p>コレまで自分は pipenv 一択やろーなんて思ってたんだけど、前回どうしても pipenv で上手く行かなかったので、参考文献のとおりに思考停止で真似してみる。</p>
<ul>
  <li><a href="https://github.com/pyenv/pyenv">pyenv/pyenv: Simple Python version management</a>
    <ul>
      <li>pyenv。</li>
    </ul>
  </li>
  <li><a href="https://github.com/pyenv/pyenv-installer">pyenv/pyenv-installer: This tool is used to install <code>pyenv</code> and friends.</a>
    <ul>
      <li><code>pyenv</code> を自動インストールできるプロジェクトもあったのだが、中でやっていることはほぼ一緒。結果、これも上手くいかなかった</li>
      <li><a href="https://raw.githubusercontent.com/pyenv/pyenv-installer/master/bin/pyenv-installer">https://raw.githubusercontent.com/pyenv/pyenv-installer/master/bin/pyenv-installer</a></li>
    </ul>
  </li>
</ul>
<p>まずは <code>pyenv</code> を普通に入れてみる。</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># Windows GitSDK で ↓ コレを入れても動かないのだが、この時は気付いていなかった</span>
$ <span class="token function">git</span> clone https://github.com/pyenv/pyenv.git ~/.pyenv

<span class="token comment"># 以下3行を追記した</span>
$ <span class="token function">vi</span> ~/.bashrc
  <span class="token builtin class-name">export</span> <span class="token assign-left variable">PYENV_ROOT</span><span class="token operator">=</span><span class="token string">"<span class="token variable">${<span class="token environment constant">HOME</span>}</span>/.pyenv"</span>
  <span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">"<span class="token variable">${PYENV_ROOT}</span>/bin:<span class="token variable">${<span class="token environment constant">PATH</span>}</span>"</span>
  <span class="token builtin class-name">eval</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span>pyenv init -<span class="token variable">)</span></span>"</span>

<span class="token comment"># 後述するシンボリックリンク作成に失敗している件 </span>
$ <span class="token builtin class-name">source</span> ~/.bashrc
/c/Users/Neo/.pyenv/bin/pyenv: 行 <span class="token number">1</span>: <span class="token punctuation">..</span>/libexec/pyenv: No such <span class="token function">file</span> or directory

<span class="token comment"># `export MSYS` を `~/.bashrc` に追記し、GitSDK を「管理者権限」で開いたあと、シンボリックリンクを貼る</span>
$ <span class="token function">rm</span> ~/.pyenv/bin/pyenv
$ <span class="token function">ln</span> -s ~/.pyenv/libexec/pyenv ~/.pyenv/bin/pyenv
<span class="token comment"># コレでエラーは消えた</span>
</code></pre>
<ul>
  <li><a href="https://funatsu-lab.github.io/open-course-ware/env/construct-python-env/">Python環境の構築 | Instruction of chemoinformatics by funatsu-lab</a>
    <ul>
      <li><code>~/.bashrc</code> に追記する <code>export</code> と <code>eval</code> 文</li>
    </ul>
  </li>
  <li><a href="https://www.hakopako.net/entry/2017/09/15/191140">windows + cygwin で pyenv の環境構築 - 今からお前んちこいよ</a>
    <ul>
      <li><code>/path/to/.pyenv/bin/pyenv: line 1: ../libexec/pyenv: No such file or directory</code></li>
      <li>
        <blockquote>
          <p>シンボリックリンクを貼るのに失敗しているのが原因。貼り直してあげる。</p>
        </blockquote>
      </li>
    </ul>
  </li>
  <li><a href="https://blog.logicky.com/2017/06/07/windows10-git-bash%E3%81%A7%E3%82%B7%E3%83%B3%E3%83%9C%E3%83%AA%E3%83%83%E3%82%AF%E3%83%AA%E3%83%B3%E3%82%AF%E3%82%92%E3%81%A4%E3%81%8F%E3%82%8C%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B/">Windows10 - Git Bashでシンボリックリンクをつくれるようにする - LOGICKY BLOG</a>
    <ul>
      <li>
        <blockquote>
          <p>シンボリックリンクではなく、コピーが作成される</p>
        </blockquote>
      </li>
      <li>
        <blockquote>
          <p>下記2点を実施したらできるようになった。</p>
        </blockquote>
      </li>
      <li><code>export MSYS=winsymlinks:nativestrict</code></li>
      <li>
        <blockquote>
          <p>git bashを管理者権限で開く</p>
        </blockquote>
      </li>
    </ul>
  </li>
</ul>
<p>コレで <code>pyenv</code> コマンド自体は動くようになった。このあと <code>$ pyenv virtualenv</code> コマンドを使いたいのだが、サブコマンド <code>virtualenv</code> は、pyenv プラグインである <code>pyenv-virtualenv</code> を入れないといけない。</p>
<ul>
  <li><a href="https://qiita.com/Kodaira_/items/feadfef9add468e3a85b">pyenv と pyenv-virtualenv で環境構築 - Qiita</a></li>
</ul>
<pre class="language-bash"><code class="language-bash">$ pyenv -v
pyenv <span class="token number">1.2</span>.26-3-gc010935a
$ pyenv versions
* system <span class="token punctuation">(</span>set by /c/Users/Neo/.pyenv/version<span class="token punctuation">)</span>

<span class="token comment"># virtualenv がないので入れる</span>
$ <span class="token function">git</span> clone https://github.com/yyuu/pyenv-virtualenv.git ~/.pyenv/plugins/pyenv-virtualenv

<span class="token comment"># 以下1行を追記する</span>
$ <span class="token function">vi</span> ~/.bashrc
  <span class="token builtin class-name">eval</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span>pyenv virtualenv-init -<span class="token variable">)</span></span>"</span>

<span class="token comment"># まずは pyenv で対象の Python バージョンを入れる</span>
$ pyenv <span class="token function">install</span> <span class="token number">3.6</span>.3
Downloading Python-3.6.3.tar.xz<span class="token punctuation">..</span>.
-<span class="token operator">></span> https://www.python.org/ftp/python/3.6.3/Python-3.6.3.tar.xz
Installing Python-3.6.3<span class="token punctuation">..</span>.

BUILD FAILED <span class="token punctuation">(</span>MSYS_NT-10.0-21343 <span class="token number">3.0</span>.7-338.x86_64 using python-build <span class="token number">1.2</span>.26-3-gc010935a<span class="token punctuation">)</span>

Inspect or clean up the working tree at /tmp/python-build.20210409173145.3629
Results logged to /tmp/python-build.20210409173145.3629.log

Last <span class="token number">10</span> log lines:
  <span class="token number">981</span> <span class="token operator">|</span>     PyStructSequence_SET_ITEM<span class="token punctuation">(</span>result, <span class="token number">6</span>, PyLong_FromLong<span class="token punctuation">(</span>si-<span class="token operator">></span>si_band<span class="token punctuation">))</span><span class="token punctuation">;</span>
      <span class="token operator">|</span>                                                            ^~
./Include/tupleobject.h:62:75: 備考: <span class="token keyword">in</span> definition of macro ‘PyTuple_SET_ITEM’
   <span class="token number">62</span> <span class="token operator">|</span> <span class="token comment">#define PyTuple_SET_ITEM(op, i, v) (((PyTupleObject *)(op))->ob_item[i] = v)</span>
      <span class="token operator">|</span>                                                                           ^
./Modules/signalmodule.c:981:5: 備考: <span class="token keyword">in</span> expansion of macro ‘PyStructSequence_SET_ITEM’
  <span class="token number">981</span> <span class="token operator">|</span>     PyStructSequence_SET_ITEM<span class="token punctuation">(</span>result, <span class="token number">6</span>, PyLong_FromLong<span class="token punctuation">(</span>si-<span class="token operator">></span>si_band<span class="token punctuation">))</span><span class="token punctuation">;</span>
      <span class="token operator">|</span>     ^~~~~~~~~~~~~~~~~~~~~~~~~
make: *** <span class="token punctuation">[</span>Makefile:1761: Modules/signalmodule.o<span class="token punctuation">]</span> エラー <span class="token number">1</span>
make: *** 未完了のジョブを待っています<span class="token punctuation">..</span><span class="token punctuation">..</span>
</code></pre>
<p>…ということで、<code>$ pyenv install</code> コマンドがそもそも動かず、<code>$ pyenv virtualenv</code> に辿り着けず。</p>
<p>調べたら <em><code>pyenv-win</code></em> という Windows 用の pyenv があるようなので、コレを入れることにする。上で構築した <code>~/.pyenv/</code> ディレクトリは全削除。<code>~/.bashrc</code> に追記したモノも全消し。</p>
<ul>
  <li><a href="https://qiita.com/hirataikaozoku/items/968e815160a1bd3d6457">Windows10でpyenv - Qiita</a></li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># GitSDK で作業</span>
$ <span class="token function">git</span> clone https://github.com/pyenv-win/pyenv-win.git <span class="token string">"<span class="token environment constant">$HOME</span>/.pyenv"</span>
</code></pre>
<pre class="language-powershell"><code class="language-powershell"><span class="token comment"># 「システムの詳細設定」→「環境変数」で見られる環境変数を PowerShell から追加する</span>
<span class="token namespace">[System.Environment]</span>::SetEnvironmentVariable<span class="token punctuation">(</span><span class="token string">'PYENV'</span><span class="token punctuation">,</span><span class="token variable">$env</span>:USERPROFILE <span class="token operator">+</span> <span class="token string">"\.pyenv\pyenv-win\"</span><span class="token punctuation">,</span><span class="token string">"User"</span><span class="token punctuation">)</span>
<span class="token namespace">[System.Environment]</span>::SetEnvironmentVariable<span class="token punctuation">(</span><span class="token string">'PYENV_HOME'</span><span class="token punctuation">,</span><span class="token variable">$env</span>:USERPROFILE <span class="token operator">+</span> <span class="token string">"\.pyenv\pyenv-win\"</span><span class="token punctuation">,</span><span class="token string">"User"</span><span class="token punctuation">)</span>
<span class="token namespace">[System.Environment]</span>::SetEnvironmentVariable<span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">,</span> <span class="token variable">$HOME</span> <span class="token operator">+</span> <span class="token string">"\.pyenv\pyenv-win\bin;"</span> <span class="token operator">+</span> <span class="token variable">$HOME</span> <span class="token operator">+</span> <span class="token string">"\.pyenv\pyenv-win\shims;"</span> <span class="token operator">+</span> <span class="token variable">$env</span>:Path<span class="token punctuation">,</span><span class="token string">"User"</span><span class="token punctuation">)</span>
</code></pre>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># 再度 GitSDK で作業</span>
$ pyenv --version
pyenv <span class="token number">2.64</span>.3

$ pyenv rehash
$ pyenv update

$ pyenv <span class="token function">install</span> <span class="token number">3.6</span>.3
$ pyenv global <span class="token number">3.6</span>.3
</code></pre>
<p>…ココまでやって、Python のバージョン切り替えがなぜか成功せず。<code>pyenv-virtualenv</code> を導入してみてもコチラも動かないなど、どうにも思いどおりにならず、諦めた。</p>
<h2 id="wsl-でやりましょう"><a class="header-link" href="#wsl-でやりましょう"><span class="header-link-mark"></span></a>WSL でやりましょう</h2>
<p>というワケで、WSL でやりましょう。</p>
<ul>
  <li>WSL の環境確認</li>
</ul>
<pre class="language-bash"><code class="language-bash">$ <span class="token builtin class-name">type</span> python
python はハッシュされています <span class="token punctuation">(</span>/usr/bin/python<span class="token punctuation">)</span>
$ python --version
Python <span class="token number">3.6</span>.9
$ <span class="token builtin class-name">type</span> python3
python3 は /usr/bin/python3 です
$ python3 --version
Python <span class="token number">3.6</span>.9
$ <span class="token builtin class-name">type</span> python2
python2 は /usr/bin/python2 です
$ python2 --version
Python <span class="token number">2.7</span>.17
</code></pre>
<ul>
  <li>pyenv-installer でインストールしてみる</li>
</ul>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">curl</span> -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer <span class="token operator">|</span> <span class="token function">bash</span>

<span class="token comment"># 以下3行を追記する</span>
$ <span class="token function">vi</span> ~/.bashrc
  <span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">"<span class="token variable">${<span class="token environment constant">HOME</span>}</span>/.pyenv/bin:<span class="token variable">${<span class="token environment constant">PATH</span>}</span>"</span>
  <span class="token builtin class-name">eval</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span>pyenv init -<span class="token variable">)</span></span>"</span>
  <span class="token builtin class-name">eval</span> <span class="token string">"<span class="token variable"><span class="token variable">$(</span>pyenv virtualenv-init -<span class="token variable">)</span></span>"</span>

<span class="token comment"># 更新</span>
$ <span class="token builtin class-name">exec</span> <span class="token environment constant">$SHELL</span>
$ pyenv rehash
$ pyenv update

<span class="token comment"># Python v3.6.3 をインストールする</span>
$ pyenv <span class="token function">install</span> <span class="token number">3.6</span>.3
Downloading Python-3.6.3.tar.xz<span class="token punctuation">..</span>.
-<span class="token operator">></span> https://www.python.org/ftp/python/3.6.3/Python-3.6.3.tar.xz
Installing Python-3.6.3<span class="token punctuation">..</span>.

BUILD FAILED <span class="token punctuation">(</span>Ubuntu <span class="token number">18.04</span> using python-build <span class="token number">20180424</span><span class="token punctuation">)</span>

Inspect or clean up the working tree at /tmp/python-build.20210409175658.1995
Results logged to /tmp/python-build.20210409175658.1995.log

Last <span class="token number">10</span> log lines:
    ensurepip._main<span class="token punctuation">(</span><span class="token punctuation">)</span>
  File <span class="token string">"/tmp/python-build.20210409175658.1995/Python-3.6.3/Lib/ensurepip/__init__.py"</span>, line <span class="token number">189</span>, <span class="token keyword">in</span> _main
    <span class="token assign-left variable">default_pip</span><span class="token operator">=</span>args.default_pip,
  File <span class="token string">"/tmp/python-build.20210409175658.1995/Python-3.6.3/Lib/ensurepip/__init__.py"</span>, line <span class="token number">102</span>, <span class="token keyword">in</span> bootstrap
    _run_pip<span class="token punctuation">(</span>args + <span class="token punctuation">[</span>p<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token keyword">for</span> <span class="token for-or-select variable">p</span> <span class="token keyword">in</span> _PROJECTS<span class="token punctuation">]</span>, additional_paths<span class="token punctuation">)</span>
  File <span class="token string">"/tmp/python-build.20210409175658.1995/Python-3.6.3/Lib/ensurepip/__init__.py"</span>, line <span class="token number">27</span>, <span class="token keyword">in</span> _run_pip
    <span class="token function">import</span> pip
zipimport.ZipImportError: can<span class="token string">'t decompress data; zlib not available
Makefile:1079: recipe for target '</span>install' failed
make: *** <span class="token punctuation">[</span>install<span class="token punctuation">]</span> Error <span class="token number">1</span>
</code></pre>
<p>おや、WSL でも <code>BUILD FAILED</code> が出てしまった。でもコレは多分何かビルド系のライブラリを入れれば直るだろうな。</p>
<ul>
  <li><a href="https://pouhon.net/pyenv-error/2009/">WSL pyenvへのPythonインストールで出るエラーを解決する | Output 0.1</a>
    <ul>
      <li>このサイトで紹介されているパッケージを <code>apt</code> で全部入れる</li>
    </ul>
  </li>
</ul>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">apt</span> <span class="token function">install</span> build-essential zlib1g-dev libssl-dev libbz2-dev libreadline-dev libsqlite3-dev

$ pyenv <span class="token function">install</span> <span class="token number">3.6</span>.3
Downloading Python-3.6.3.tar.xz<span class="token punctuation">..</span>.
-<span class="token operator">></span> https://www.python.org/ftp/python/3.6.3/Python-3.6.3.tar.xz
Installing Python-3.6.3<span class="token punctuation">..</span>.
Installed Python-3.6.3 to /home/neo/.pyenv/versions/3.6.3
</code></pre>
<p>インストールできた。</p>
<pre class="language-bash"><code class="language-bash">$ pyenv global <span class="token number">3.6</span>.3

$ python --version
Python <span class="token number">3.6</span>.3
$ python3 --version
Python <span class="token number">3.6</span>.3
$ python2 --version
Python <span class="token number">2.7</span>.17

$ pyenv virtualenv <span class="token number">3.6</span>.3 gpt2_ja
</code></pre>
<p>こうして Python 3.6.3 環境がなんとか構築できた。</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># GitSDK 環境でやっていたことを WSL でやり直す</span>
$ <span class="token function">git</span> clone https://github.com/tanreinama/gpt2-japanese
$ <span class="token builtin class-name">cd</span> ./gpt2-japanese/
$ <span class="token function">wget</span> https://www.nama.ne.jp/models/gpt2ja-medium.tar.bz2
$ <span class="token function">tar</span> xvfj gpt2ja-medium.tar.bz2

<span class="token comment"># pip 何もしてないので動作確認コマンドは当然動かない</span>
$ python3 gpt2-generate.py --model gpt2ja-medium --num_generate <span class="token number">1</span>

<span class="token comment"># ようやく TensorFlow のインストールが成功した</span>
$ pip <span class="token function">install</span> <span class="token assign-left variable">tensorflow</span><span class="token operator">==</span><span class="token number">1.14</span>
$ python3 -c <span class="token string">'import tensorflow as tf; print(tf.__version__)'</span>
<span class="token number">1.14</span>.0
</code></pre>
<p>この後、動作確認コマンドを実行すると numpy に関する <code>in a future version of numpy, it will be understood as</code> なエラーが出た。</p>
<p>エラーメッセージでググると以下が出た。TensorFlow と一緒にインストールされる numpy のバージョンが合わないらしい。</p>
<ul>
  <li><a href="https://qiita.com/yasthon/items/83f3a30fdcbf5eed95b6">TensorFlow 1.14.0 をWindows10にインストールしたときのトラブル対応方法 - Qiita</a></li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># numpy のバージョンを指定して入れ直す</span>
$ pip uninstall numpy
$ pip <span class="token function">install</span> <span class="token assign-left variable">numpy</span><span class="token operator">==</span><span class="token number">1.16</span>.4
</code></pre>
<p>ココから先は、冒頭に紹介した</p>
<ul>
  <li><a href="https://qiita.com/Afo_guard_enthusiast/items/07d196aeaba366e30ab4">日本語学習済みのGPT-2 pretrained modelを使って、入力文に続いて、どんな文章が生成されるのかを眺めてみた - Qiita</a></li>
</ul>
<p>コチラの記事と同じ挙動になったので、確認しながら一つずつ依存ライブラリを <code>pip</code> で入れてやった。</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># tqdm エラーに変わった</span>
$ python3 gpt2-generate.py --model gpt2ja-medium --num_generate <span class="token number">1</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"gpt2-generate.py"</span>, line <span class="token number">6</span>, <span class="token keyword">in</span> <span class="token operator">&#x3C;</span>module<span class="token operator">></span>
    from tqdm <span class="token function">import</span> tqdm
ModuleNotFoundError: No module named <span class="token string">'tqdm'</span>

$ pip <span class="token function">install</span> tqdm

<span class="token comment"># jaconv エラーに変わった</span>
$ python3 gpt2-generate.py --model gpt2ja-medium --num_generate <span class="token number">1</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span>:
  File <span class="token string">"gpt2-generate.py"</span>, line <span class="token number">8</span>, <span class="token keyword">in</span> <span class="token operator">&#x3C;</span>module<span class="token operator">></span>
    from encode_bpe <span class="token function">import</span> BPEEncoder_ja
  File <span class="token string">"/home/neo/Documents/Dev/Sandboxes/gpt2-japanese/encode_bpe.py"</span>, line <span class="token number">2</span>, <span class="token keyword">in</span> <span class="token operator">&#x3C;</span>module<span class="token operator">></span>
    <span class="token function">import</span> jaconv
ModuleNotFoundError: No module named <span class="token string">'jaconv'</span>

$ pip <span class="token function">install</span> jaconv
</code></pre>
<h2 id="動くようになった"><a class="header-link" href="#動くようになった"><span class="header-link-mark"></span></a>動くようになった</h2>
<p>そして、ついに動作するようになった。</p>
<pre class="language-bash"><code class="language-bash">$ python3 gpt2-generate.py --model gpt2ja-medium --num_generate <span class="token number">1</span>
<span class="token number">2021</span>-04-09 <span class="token number">18</span>:23:42.091760: I tensorflow/core/platform/cpu_feature_guard.cc:142<span class="token punctuation">]</span> Your CPU supports instructions that this TensorFlow binary was not compiled to use: AVX2 FMA
<span class="token number">2021</span>-04-09 <span class="token number">18</span>:23:42.097109: I tensorflow/core/platform/profile_utils/cpu_utils.cc:94<span class="token punctuation">]</span> CPU Frequency: <span class="token number">4199995000</span> Hz
<span class="token number">2021</span>-04-09 <span class="token number">18</span>:23:42.097856: I tensorflow/compiler/xla/service/service.cc:168<span class="token punctuation">]</span> XLA <span class="token function">service</span> 0x55bf72e73860 executing computations on platform Host. Devices:
<span class="token number">2021</span>-04-09 <span class="token number">18</span>:23:42.097893: I tensorflow/compiler/xla/service/service.cc:175<span class="token punctuation">]</span>   StreamExecutor device <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>: <span class="token operator">&#x3C;</span>undefined<span class="token operator">></span>, <span class="token operator">&#x3C;</span>undefined<span class="token operator">></span>
WARNING:tensorflow:From /home/neo/Documents/Dev/Sandboxes/gpt2-japanese/sampling.py:79: to_float <span class="token punctuation">(</span>from tensorflow.python.ops.math_ops<span class="token punctuation">)</span> is deprecated and will be removed <span class="token keyword">in</span> a future version.
Instructions <span class="token keyword">for</span> updating:
Use <span class="token variable"><span class="token variable">`</span>tf.cast<span class="token variable">`</span></span> instead.
WARNING:tensorflow:From /home/neo/Documents/Dev/Sandboxes/gpt2-japanese/sampling.py:16: add_dispatch_support.<span class="token operator">&#x3C;</span>locals<span class="token operator">></span>.wrapper <span class="token punctuation">(</span>from tensorflow.python.ops.array_ops<span class="token punctuation">)</span> is deprecated and will be removed <span class="token keyword">in</span> a future version.
Instructions <span class="token keyword">for</span> updating:
Use tf.where <span class="token keyword">in</span> <span class="token number">2.0</span>, <span class="token function">which</span> has the same broadcast rule as np.where
WARNING:tensorflow:From /home/neo/Documents/Dev/Sandboxes/gpt2-japanese/sampling.py:84: multinomial <span class="token punctuation">(</span>from tensorflow.python.ops.random_ops<span class="token punctuation">)</span> is deprecated and will be removed <span class="token keyword">in</span> a future version.
Instructions <span class="token keyword">for</span> updating:
Use <span class="token variable"><span class="token variable">`</span>tf.random.categorical<span class="token variable">`</span></span> instead.
WARNING:tensorflow:From /home/neo/.pyenv/versions/3.6.3/lib/python3.6/site-packages/tensorflow/python/training/saver.py:1276: checkpoint_exists <span class="token punctuation">(</span>from tensorflow.python.training.checkpoint_management<span class="token punctuation">)</span> is deprecated and will be removed <span class="token keyword">in</span> a future version.
Instructions <span class="token keyword">for</span> updating:
Use standard <span class="token function">file</span> APIs to check <span class="token keyword">for</span> files with this prefix.
<span class="token number">2021</span>-04-09 <span class="token number">18</span>:23:47.574003: W tensorflow/compiler/jit/mark_for_compilation_pass.cc:1412<span class="token punctuation">]</span> <span class="token punctuation">(</span>One-time warning<span class="token punctuation">)</span>: Not using XLA:CPU <span class="token keyword">for</span> cluster because envvar <span class="token assign-left variable">TF_XLA_FLAGS</span><span class="token operator">=</span>--tf_xla_cpu_global_jit was not set.  If you want XLA:CPU, either <span class="token builtin class-name">set</span> that envvar, or use experimental_jit_scope to <span class="token builtin class-name">enable</span> XLA:CPU.  To confirm that XLA is active, pass --vmodule<span class="token operator">=</span>xla_compilation_cache<span class="token operator">=</span><span class="token number">1</span> <span class="token punctuation">(</span>as a proper command-line flag, not via TF_XLA_FLAGS<span class="token punctuation">)</span> or <span class="token builtin class-name">set</span> the envvar <span class="token assign-left variable">XLA_FLAGS</span><span class="token operator">=</span>--xla_hlo_profile.
「私に隠し事はないですよ」
「お話しながらでも楽しんでいただけましたか？」
「ふふ、ありがとうございます」
嬉しそうに笑う彼女に、俺は笑顔で答える。
彼女は本当に自分から話したがるからな。
「……お茶でも頂いて、お話しましょうか」
「お茶、ありがとうございます。では、お言葉に甘えて」
お茶請けを頂きながら、彼女の身の上話を聞く。
それを終えると、お茶を頂きながら彼女と二人っきりになる。彼女はソファで、俺は少しはみ出しているソファだ。
「…………」
「…………」
俺の言葉に沈黙。
「……私に隠し事があって……その……」
「…………」
「…………」
沈黙に耐え切れなくなった俺は、そのままソファに腰を下ろして俺の視線から彼女を逃がす。お茶、いただきます。そう言って彼女を見ると、彼女はこちらを真っ直ぐ見つめ、手でソファの脚を掴むと、俺の下に下ろす。
「私の事を知りたがっていましたね？」
「そ、それは……まぁ」
「なら」
「えっ」
「――私と、お付き合いしてください」
「っ……！？」
俺の予想もしなかった告白の言葉に、彼女は驚いて目を大きく見開いている。
彼女と付き合えるのなら、この想い、どうし
</code></pre>
<p>動作確認コマンドを動かした結果が上のとおり。テキストが出力されるまで1・2分くらい待たされた上に、ワーニングメッセージが出ているのが気持ち悪いが、とりあえず出来た出来た。</p>
<h2 id="ワーニングメッセージを非表示にする"><a class="header-link" href="#ワーニングメッセージを非表示にする"><span class="header-link-mark"></span></a>ワーニングメッセージを非表示にする</h2>
<p>続いて、TensorFlow のワーニングメッセージがうるさいから消してみる。メッセージでググったり、「Hide TensorFlow Warning Message」みたいなキーワードでググって試してみた。</p>
<ul>
  <li><a href="https://stackoverflow.com/questions/35911252/disable-tensorflow-debugging-information">python - Disable Tensorflow debugging information - Stack Overflow</a></li>
  <li><a href="https://github.com/tensorflow/tensorflow/issues/27023">TF 1.x: remove the "deprecated" warning messages · Issue #27023 · tensorflow/tensorflow</a>
    <ul>
      <li>この辺を参考にした</li>
    </ul>
  </li>
</ul>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">vi</span> ./gpt2-generate.py
</code></pre>
<pre class="language-python"><code class="language-python"><span class="token keyword">import</span> json
<span class="token keyword">import</span> os
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> tensorflow<span class="token punctuation">.</span>compat<span class="token punctuation">.</span>v1 <span class="token keyword">as</span> tf
<span class="token keyword">import</span> argparse
<span class="token keyword">from</span> tqdm <span class="token keyword">import</span> tqdm
<span class="token keyword">from</span> sampling <span class="token keyword">import</span> sample_sequence
<span class="token keyword">from</span> encode_bpe <span class="token keyword">import</span> BPEEncoder_ja

<span class="token comment"># ↑ココマデ既存部分</span>
<span class="token comment"># ↓以下を追記</span>
<span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>python<span class="token punctuation">.</span>util <span class="token keyword">import</span> deprecation
deprecation<span class="token punctuation">.</span>_PRINT_DEPRECATION_WARNINGS <span class="token operator">=</span> <span class="token boolean">False</span>
os<span class="token punctuation">.</span>environ<span class="token punctuation">[</span><span class="token string">'TF_CPP_MIN_LOG_LEVEL'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'3'</span>
<span class="token comment"># ↑追記ココマデ</span>
<span class="token comment"># ↓既存部分再開</span>

<span class="token keyword">if</span> <span class="token builtin">int</span><span class="token punctuation">(</span>tf<span class="token punctuation">.</span>__version__<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">:</span>
    <span class="token keyword">from</span> model <span class="token keyword">import</span> HParams <span class="token keyword">as</span> HParams
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>training <span class="token keyword">import</span> HParams
<span class="token comment"># 以下略…</span>
</code></pre>
<p>こんな風に、<code>gpt2-generate.py</code> の冒頭に、TensorFlow の Deprecation に関するワーニングを非表示にするフラグ設定と、環境変数 <code>TF_CPP_MIN_LOG_LEVEL</code> によるログレベルの調整を追加してやった。</p>
<h2 id="もう少し動作確認してみる"><a class="header-link" href="#もう少し動作確認してみる"><span class="header-link-mark"></span></a>もう少し動作確認してみる</h2>
<p>今度は <code>--context</code> オプションを利用して、書き出しの文章を指定しながら動作確認してみる。</p>
<pre class="language-bash"><code class="language-bash">$ python3 gpt2-generate.py --context<span class="token operator">=</span><span class="token string">'こんにちは、Neoです。'</span> --num_generate<span class="token operator">=</span><span class="token number">1</span>
       私はこれ以上ないほど、幸せです。       なんか、悲しい。
</code></pre>
<p>ワーニングメッセージが出なくなった。コマンドを実行してから1・2分ほど待って、一つの文章が出てきてプロンプトが戻った。スゴく悲しい文章が自動生成された。</p>
<p>試しに <code>time</code> コマンドで実行時間を計ってみる。</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">time</span> python3 gpt2-generate.py --context<span class="token operator">=</span><span class="token string">'こんにちは、Neoです。'</span> --num_generate<span class="token operator">=</span><span class="token number">1</span>
   今は、ちょっとしたことでも、ワクワクできますよね。       それは、「家も片付いてないから」ではありません。   今日は、お金も、稼げないのに、なんで、もって行かれるの?そんな、思いでも立ち上がりませんか?<span class="token variable"><span class="token punctuation">((</span><span class="token punctuation">(</span>o<span class="token punctuation">(</span><span class="token operator">*</span>ﾟ▽ﾟ<span class="token operator">*</span><span class="token punctuation">)</span>o<span class="token punctuation">))</span></span><span class="token punctuation">)</span>    そういえば、我が家には、子供がいないのに家がない、と言っている方がいらっしゃいます。    はい、そのとおりです<span class="token operator">!</span> 家は片付けられない、と言うより、片付けられないんです。    片付けようと思っても、結局、片付けられないんです。 片付けにくいと、子供がいると、それは、子供にいじめられているんだ、と思ってしまい、 自分から、自立を促してしまうのです。     例えば、私の場合。 私が子連れで、我が家に来てくれたりしたから、それで、「あ〜、何でこんなことになったんだろう」という現実が出てきて    「私がここにいて、何が悪い<span class="token operator">!</span>誰が一番だと思っているんだ、私は、 私は何が知りたいんだ、と。」    と、思いきって、「お金を稼がないと、自分に反します」という、子供のために、自分を殺して逃げてしまいました。     こんな思いで、「お金を稼がなき

real    1m0.494s
user    1m51.633s
sys     0m24.123s
</code></pre>
<p>1分51秒。約2分くらい待たされてますね。</p>
<p>今度はもう少し違う文章を与えてみる。</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">time</span> python3 gpt2-generate.py --context<span class="token operator">=</span><span class="token string">'映画を観るのが好きな俺が新たに探している趣味は、'</span>
『アクション映画』だ。それも今期の新作の──といっても、『タイムリープ』みたいなもんだが──アニメでも観れば面白いと思う。最近観たアニメと言えば、「ジョジョの奇妙な冒険 ダイヤモンドは砕けろ」や「ダンガンロンパシリーズ」の──これまた俺は観たことがないので、観るというよりは観させてもらおう。俺は、最初に観た作品も覚えていなくて、どうせ観たら見る、くらいの気持ちで観ていた。
今期の続編として、「スター・トレック バトル<span class="token operator">&#x26;</span>ドラゴンズ」では、『タイム』がある。「スター・トレック」とは言うけれど、これもファンには分かりづらいようだ。今期のスター・トレックには原作に沿わないにしてもやはり『ジョジョの奇妙な冒険』という ことで、「スター・トレック」に似せた作品がある、と「スター・トレック」原作の脚本家が言っていたらしい。どうやら、その脚本家が出したのが原作のシナリオということが多いらしい。
俺は今期の新キャラクターであるマリー・アントワネットの映画を観てから、新たに「スター・トレック」のタイトルが観たいとかアニメ化された「ライアー」を観るような気分である。
これが現在俺は観たいアニメのひとつなのであ
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
日本映画の鑑賞か、それに近いものあるみたいだな……」
と、言って、今の今まで、俺は、この映画の続編とか、その続編、新しい奴が来そうな、映画も観にいかないか、と言う考えを持っていた。
「もしかしたら、今、俺が、観ているのも、そういう映画なのかもしれないな……」
そう俺が呟くのと同時に、チャポンというチャッタンから、チャッタンに届いた音声が、
『さあ、皆さん、始めましょう。お時間はありますか？』
という、何か、嫌な感じの声だった。
「いや、まだ……」
「今、チャッタンに届いたのですが……なにか聞こえますか？」
「うん、聞こえないけど、でも、確かに何か聞こえる。何だろう……」
と、俺は言って、チャッタンに続いて、チャッタンに届いたチャッタンのチャッタンも、俺と同じ方向を向いて、チャッタンのチャッタンも、俺と同じ様に向いて、チャッタンのチャッタンも、何かチャッタンが動いているけど、音も音も聞こえない、と言う音も してこない、と言った感じもして、チャッタンのチャッタンも、チャッタンのチャッタンもでて、チャッタンコンサートは行われる様になった。チャッタンも、チャッタンも何もしないから、チャッタンが動
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
絵を描くことでしょう」
「確かに絵を書きたい、と思うことはあるな」
彼の言葉を聞いて、その趣味の持ち主が何を言っているかを察した、と同時に、彼の口ぶりから彼の趣味が美術に対する趣味であり、さらに趣味に没頭するために美術館に通っている理由が何か、何となく察しがついた。
「それにしても、お前は何で絵を描いてるの」
「何でって、芸術って言ったら、芸術の事だよな」
「どういう事だ？」
「俺にも分からん。分からんのだろうが、この国で芸術が発達してるのは、美術館、芸術関係者、またはその類の人たちは、必ずこの都市、つまりここに集まる。俺の言う芸術とは、その人たち全員が関わってる芸術、つまり芸術家（プロフェッサー）が手がける 芸術だ」
「プロフェッサー、つまり、この国で生き延びるためのプロフェッサー、か。なるほど、分かりやすい言い方だな」
「ああ、そうだ。例えば、俺の絵は今俺が置かれている状況や、今俺が置かれている環境の様に生き延びるための何か、そういうものを描いてる事になるんだ」
「生き延びるために？……それで私に何を望むんだ？」
「ああ、それは俺の考えてる事だから、お前からすれば分からんものなんだろ
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
それこそ小説と映画だ。
映画って映画を観るという感覚が、どうして俺の中にあるのだろう。
映画を観ているという感覚よりも映画を観て、小説って感じを味わう方が、俺の中で大きな衝撃を受けていたのは、確かだ。

<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
アニメ鑑賞。でもそれはとても危険なモノで、アニメ鑑賞の後は寝る時間をズラしても、寝る時はあるアニメを観る時間。そう、俺は睡眠時間を削るのが好きなので、寝る時はあるアニメを観る時間をズラしているのだ。なのに、何故アニメ鑑賞の時は寝る時間を ズラして、眠る時はアニメを観ないのか？……俺には、その理由が分からない事ばかりだ。
「んー、なんでやねん？」
「…………？」
「そんな不満そうな顔すんな、ほんま知らんけど。あ、そう！ なんでやねん、って言うたか忘れた。なんでや？」
「……あー。その、なんでってなんかよく分からないけど、なんでやねん……？」
この反応に、本当に自分が馬鹿らしくなってきてしまい気が付けば、少し前までの俺は、何をしにきていたのか考えなくてはいけない。そもそも、俺はアニメを観るという目的があって、それに自分が付き合っていたのだとすら思えてくるのに、何故自分が観に来 ているのか、俺には分からない。
「はぁ？ せやったら寝ぼける前に、何も言わずに付き合ってくれてるんか？ ほな何もしてへんやろ、それとも何もしてへんか？」
「ほ？ あ、そのことなんやけど、えっと……」
「せやなあ。せやった

real    4m27.822s
user    8m50.885s
sys     1m51.457s
</code></pre>
<p>何パターンか生成してくれた。1・2分ごとに1パターンの文章が出力されて、全部で9分ほど掛かった。</p>
<h2 id="所感"><a class="header-link" href="#所感"><span class="header-link-mark"></span></a>所感</h2>
<p>ようやく gpt2-japanese が動かせた…。確かに、与えた文章に関連する文章がゴロゴロと生成されるのは面白い。が、与える文章が短かったりすると、大した精度が出ないんだなぁと思った。</p>
<p><code>gpt2-generate.py</code> の中を見ると色々なパラメータがある。これらのパラメータ調整もそうだろうし、事前にどんな学習をさせてどうモデルを作るかとか、そういう機械学習の基礎的な視点で色々と考慮・調整すべきところは沢山あるんだろうな。そういうことが全然分からないまま、<em>「とりあえず TensorFlow とかいうヤツで機械学習できるんでしょ？」ぐらいのノリで触ると、まぁこの程度の出力しか得られない</em>ということだな。</p>
<p>検証に使用したマシンは、2017年に購入した Galleria XG というデスクトップマシンで、</p>
<ul>
  <li>CPU : Core i7-7700K</li>
  <li>RAM : 32GB</li>
  <li>GPU : GeForce GTX 1080</li>
</ul>
<p>といったスペック。もう4年前になるが、当時はかなり高スペックな部類のマシンだったのだが、それでも<strong>1つの文章の生成には1・2分掛かった</strong>。</p>
<p>完全に素の Ubuntu ではなくて WSL 環境という部分で、オーバーヘッドがあるのかもしれないし、割り当てられてるマシンリソースが 100% じゃないのかもしれない。</p>
<p>また、依存ライブラリとしてインストールしたのが <code>tensorflow</code> v1.14 で、<code>tensorflow-gpu</code> ではなかったので、GPU は使われず CPU のみで処理されたと思われる。GPU を使ったらもう少し速いのかしら？でももう<strong>一度動くように整えられた環境を変更したくねぇなぁ…</strong>。Windows ホスト側で認識している GPU を、WSL で透過的に扱えるのかしら？よく知らないし調べるの面倒臭い。</p>
<p>最近公開された「りんな」の情報を見ると、何かまた違うライブラリを入れるみたいで、それらの依存ライブラリが既存環境を消してしまうとも限らない。やる気が出たら、<code>pyenv-virtualenv</code> でしっかり環境を分けて試してみようかしら。</p>
<h2 id="まとめ"><a class="header-link" href="#まとめ"><span class="header-link-mark"></span></a>まとめ</h2>
<p>とりあえず gpt2-japanese が動かせるようになったので、Python・TensorFlow 素人として欲しかった、初歩の初歩の情報を以下にまとめる。</p>
<h3 id="gpt2-japanese-を動かすために必要な-ospython-環境"><a class="header-link" href="#gpt2-japanese-を動かすために必要な-ospython-環境"><span class="header-link-mark"></span></a>gpt2-japanese を動かすために必要な OS・Python 環境</h3>
<ul>
  <li>OS : Ubuntu 18.04 (WSL で良い)
    <ul>
      <li>GitBash では pyenv 周りでつまづいてダメでした</li>
    </ul>
  </li>
  <li>Python : v3.6.3 (v3.7 系だと、依存する TensorFlow v1.14 が導入できないため、v3.6 系が必要)</li>
</ul>
<h3 id="綺麗な-python-v363-環境を用意するために--pyenv-を入れる"><a class="header-link" href="#綺麗な-python-v363-環境を用意するために--pyenv-を入れる"><span class="header-link-mark"></span></a>綺麗な Python v3.6.3 環境を用意するために : pyenv を入れる</h3>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># 先に `$ pyenv install` 実行時に必要な依存パッケージをインストールする</span>
<span class="token comment"># Ubuntu 前提で書いているので、OS も Ubuntu (≒ WSL) だと楽だと思うよ</span>
$ <span class="token function">apt</span> <span class="token function">install</span> build-essential zlib1g-dev libssl-dev libbz2-dev libreadline-dev libsqlite3-dev

<span class="token comment"># pyenv と pyenv-virtualenv プラグインを一気に入れられるインストーラを使う</span>
$ <span class="token function">curl</span> -L https://github.com/pyenv/pyenv-installer/raw/master/bin/pyenv-installer <span class="token operator">|</span> <span class="token function">bash</span>

<span class="token comment"># 以下3行を `~/.bashrc` に追記する</span>
<span class="token builtin class-name">echo</span> <span class="token string">'export PATH="<span class="token variable">${<span class="token environment constant">HOME</span>}</span>/.pyenv/bin:<span class="token variable">${<span class="token environment constant">PATH</span>}</span>"'</span> <span class="token operator">>></span> <span class="token string">"<span class="token variable">${<span class="token environment constant">HOME</span>}</span>/.bashrc"</span>
<span class="token builtin class-name">echo</span> <span class="token string">'eval "<span class="token variable"><span class="token variable">$(</span>pyenv init -<span class="token variable">)</span></span>"'</span> <span class="token operator">>></span> <span class="token string">"<span class="token variable">${<span class="token environment constant">HOME</span>}</span>/.bashrc"</span>
<span class="token builtin class-name">echo</span> <span class="token string">'eval "<span class="token variable"><span class="token variable">$(</span>pyenv virtualenv-init -<span class="token variable">)</span></span>"'</span> <span class="token operator">>></span> <span class="token string">"<span class="token variable">${<span class="token environment constant">HOME</span>}</span>/.bashrc"</span>

<span class="token comment"># 変更を反映して初期準備する</span>
$ <span class="token builtin class-name">exec</span> <span class="token environment constant">$SHELL</span>
$ pyenv rehash
$ pyenv update

<span class="token comment"># Python v3.6.3 をインストールする</span>
$ pyenv <span class="token function">install</span> <span class="token number">3.6</span>.3
<span class="token comment"># システム全体で v3.6.3 を利用する</span>
$ pyenv global <span class="token number">3.6</span>.3

$ python --version
Python <span class="token number">3.6</span>.3
$ python3 --version
Python <span class="token number">3.6</span>.3

<span class="token comment"># pyenv-virtualenv で環境を作る場合は以下のように打つ (今回実はコレで用意した環境を使っていない)</span>
$ pyenv virtualenv <span class="token number">3.6</span>.3 gpt2_ja

<span class="token comment"># pyenv で導入した環境一覧、および使用中のバージョンを確認する</span>
<span class="token comment"># 先頭にアスタリスク `*` が付いているのが使用中のバージョン</span>
$ pyenv versions
</code></pre>
<h3 id="gpt2-japanese-と依存ライブラリの準備手順"><a class="header-link" href="#gpt2-japanese-と依存ライブラリの準備手順"><span class="header-link-mark"></span></a>gpt2-japanese と依存ライブラリの準備手順</h3>
<p>必要な依存ライブラリは次のとおり。</p>
<ul>
  <li>TensorFlow : v1.14</li>
  <li>numpy : v1.16.4</li>
  <li>tqdm : v4.60.0 (<code>$ pip install tqdm</code> で入れられた)</li>
  <li>jconv : v0.3 (<code>$ pip install jaconv</code> で入れられた)</li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># GitSDK 環境でやっていたことを WSL でやり直す</span>
$ <span class="token function">git</span> clone https://github.com/tanreinama/gpt2-japanese
$ <span class="token builtin class-name">cd</span> ./gpt2-japanese/
$ <span class="token function">wget</span> https://www.nama.ne.jp/models/gpt2ja-medium.tar.bz2
$ <span class="token function">tar</span> xvfj ./gpt2ja-medium.tar.bz2

<span class="token comment"># 以下の動作確認コマンドを叩いてエラーメッセージを確認しながら、必要なライブラリを `pip` で入れていくと確実だろう</span>
$ python3 ./gpt2-generate.py --model gpt2ja-medium --num_generate <span class="token number">1</span>

<span class="token comment"># TensorFlow</span>
$ pip <span class="token function">install</span> <span class="token assign-left variable">tensorflow</span><span class="token operator">==</span><span class="token number">1.14</span>
$ python3 -c <span class="token string">'import tensorflow as tf; print(tf.__version__)'</span>
<span class="token number">1.14</span>.0

$ pip uninstall numpy
$ pip <span class="token function">install</span> <span class="token assign-left variable">numpy</span><span class="token operator">==</span><span class="token number">1.16</span>.4

$ pip <span class="token function">install</span> tqdm

$ pip <span class="token function">install</span> jaconv

<span class="token comment"># `pip` でインストールしたライブラリとバージョンの一覧を確認する</span>
$ pip list
</code></pre>
<p>ココまで作業すれば gpt2-japanese の動作確認コマンドが動作するようになるはず。</p>
<h3 id="gpt2-generatepy-のワーニングメッセージを非表示にする"><a class="header-link" href="#gpt2-generatepy-のワーニングメッセージを非表示にする"><span class="header-link-mark"></span></a><code>gpt2-generate.py</code> のワーニングメッセージを非表示にする</h3>
<p><code>gpt2-generate.py</code> の冒頭部分に、以下のように3行ほど追記する。</p>
<pre class="language-python"><code class="language-python"><span class="token keyword">import</span> json
<span class="token keyword">import</span> os
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> tensorflow<span class="token punctuation">.</span>compat<span class="token punctuation">.</span>v1 <span class="token keyword">as</span> tf
<span class="token keyword">import</span> argparse
<span class="token keyword">from</span> tqdm <span class="token keyword">import</span> tqdm
<span class="token keyword">from</span> sampling <span class="token keyword">import</span> sample_sequence
<span class="token keyword">from</span> encode_bpe <span class="token keyword">import</span> BPEEncoder_ja

<span class="token comment"># ↑ココマデ既存部分</span>
<span class="token comment"># ↓以下を追記</span>
<span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>python<span class="token punctuation">.</span>util <span class="token keyword">import</span> deprecation
deprecation<span class="token punctuation">.</span>_PRINT_DEPRECATION_WARNINGS <span class="token operator">=</span> <span class="token boolean">False</span>
os<span class="token punctuation">.</span>environ<span class="token punctuation">[</span><span class="token string">'TF_CPP_MIN_LOG_LEVEL'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'3'</span>
<span class="token comment"># ↑追記ココマデ</span>
<span class="token comment"># ↓既存部分再開</span>

<span class="token keyword">if</span> <span class="token builtin">int</span><span class="token punctuation">(</span>tf<span class="token punctuation">.</span>__version__<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">:</span>
    <span class="token keyword">from</span> model <span class="token keyword">import</span> HParams <span class="token keyword">as</span> HParams
<span class="token keyword">else</span><span class="token punctuation">:</span>
    <span class="token keyword">from</span> tensorflow<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>training <span class="token keyword">import</span> HParams
<span class="token comment"># 以下略…</span>
</code></pre>
<p>以上！！！</p>
<p>Python・TensorFlow 素人でも何とか gpt2-japanese が動かせました。</p>
<h2 id="その他見たページ"><a class="header-link" href="#その他見たページ"><span class="header-link-mark"></span></a>その他見たページ</h2>
<ul>
  <li><a href="https://tech.stockmark.co.jp/blog/gpt2_ja/">GPT-2におけるテキスト生成 - Stockmark Tech Blog</a></li>
  <li><a href="https://note.com/npaka/n/ne55d063e1ed8">gpt2-japaneseの使い方 (2) - GPT-2のファインチューニング｜npaka｜note</a>
    <ul>
      <li>Google Colaboratory というブラウザ上で Python を動かせるサービスを使って検証している</li>
    </ul>
  </li>
  <li><a href="https://twitter.com/hpp_ricecake/status/1379776817960165378">hppさんはTwitterを使っています 「日本語GPT-2は現在おそらく3種類存在している https://t.co/lGQxPl8Rv7 https://t.co/6kNEokWcJv https://t.co/KpX8fTYQFP」 / Twitter</a>
    <ul>
      <li><a href="https://huggingface.co/rinna/japanese-gpt2-medium">rinna/japanese-gpt2-medium · Hugging Face</a></li>
      <li><a href="https://huggingface.co/colorfulscoop/gpt2-small-ja">colorfulscoop/gpt2-small-ja · Hugging Face</a></li>
      <li><a href="https://github.com/tanreinama/gpt2-japanese">tanreinama/gpt2-japanese: Japanese GPT2 Generation Model</a></li>
    </ul>
  </li>
  <li><a href="https://qiita.com/sonoisa/items/a9af64ff641f0bbfed44">【日本語モデル付き】2021年に自然言語処理をする人にお勧めしたい事前学習済みモデル - Qiita</a>
    <ul>
      <li>HuggingFace という会社の Transformers というフレームワークがあったりするらしい</li>
      <li>T5 : Text-To-Text Transfer Transformer。T5 は Google のモデル</li>
    </ul>
  </li>
  <li><a href="https://qiita.com/nekoumei/items/7b911c61324f16c43e7e">huggingface/transformers の日本語BERTで文書分類器を作成する - Qiita</a></li>
  <li><a href="https://qiita.com/ochiba-leaf/items/e7813e0ae29397ba8029">GPT-2で文章生成を試してみた - Qiita</a>
    <ul>
      <li>
        <blockquote>
          <p>gpt-2-simpleは、openaiのGPT-2をベースにしているので、tensorflow2.x系では動きません。<br>Dockerのイメージを利用する場合は <code>tensorflow/tensorflow:1.15.2-py3</code> を利用しましょう（CPUの場合）。<br>GPUを利用する場合<br><a href="https://github.com/NVIDIA/nvidia-docker/wiki/Frequently-Asked-Questions#is-microsoft-windows-supported">windows上のdockerでは動作しない</a>ようです...</p>
        </blockquote>
      </li>
    </ul>
  </li>
</ul>
<p>ホント Python 使いづれぇなぁ…。<code>requirements.txt</code> にバージョン番号もロクに書かれないし、なんたら env が多くてワケ分からん。いい加減なんとかしろよ。</p><div class="ad-amazon">
  <div class="ad-amazon-image">
    <a href="https://www.amazon.co.jp/dp/B079QKXVHY?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">
      <img src="https://m.media-amazon.com/images/I/51f9XK8oDNL._SL160_.jpg" width="125" height="160">
    </a>
  </div>
  <div class="ad-amazon-info">
    <div class="ad-amazon-title">
      <a href="https://www.amazon.co.jp/dp/B079QKXVHY?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">TensorFlowではじめるDeepLearning実装入門 impress top gearシリーズ</a>
    </div>
  </div>
</div>
<div class="ad-amazon">
  <div class="ad-amazon-image">
    <a href="https://www.amazon.co.jp/dp/4839969515?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">
      <img src="https://m.media-amazon.com/images/I/51uMuKy-yKL._SL160_.jpg" width="123" height="160">
    </a>
  </div>
  <div class="ad-amazon-info">
    <div class="ad-amazon-title">
      <a href="https://www.amazon.co.jp/dp/4839969515?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">詳解ディープラーニング 第2版 ~TensorFlow/Keras・PyTorchによる時系列データ処理~ (Compass Booksシリーズ)</a>
    </div>
  </div>
</div>
<div class="ad-amazon">
  <div class="ad-amazon-image">
    <a href="https://www.amazon.co.jp/dp/B0822L2ZKF?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">
      <img src="https://m.media-amazon.com/images/I/515SPc2wZrL._SL160_.jpg" width="124" height="160">
    </a>
  </div>
  <div class="ad-amazon-info">
    <div class="ad-amazon-title">
      <a href="https://www.amazon.co.jp/dp/B0822L2ZKF?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">TensorFlowとKerasで動かしながら学ぶ ディープラーニングの仕組み 畳み込みニューラルネットワーク徹底解説 (Compass Books)</a>
    </div>
  </div>
</div>

      </main>
      <footer id="footer">
        <div id="footer-contents">
          <div id="date-time">
            <dl>
              <dt>Created</dt>
              <dd><time>2021-04-11</time></dd>
              <dt>Last-Modified</dt>
              <dd><time>2021-04-11</time></dd>
            </dl>
          </div>
          <nav id="footer-links">
            <ul>
              <li id="footer-link-about"><a href="/about/index.html" title="About">About</a></li>
              <li id="footer-link-search"><a href="/about/search.html" title="Search">Search</a></li>
              <li id="footer-link-feeds"><a href="/feeds.xml" title="Feeds">Feeds</a></li>
              <li id="footer-link-github"><a href="https://github.com/Neos21/" title="GitHub">GitHub</a></li>
            </ul>
          </nav>
          <nav id="to-top"><a href="#" title="To Top"><span>▲ To Top</span></a></nav>
        </div>
      </footer>
    </div>
  </body>
</html>
