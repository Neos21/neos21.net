<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Google Search Console -->
    <meta name="google-site-verification" content="AvoEr3mUJFF2H_mPWWgShfmjBVP3ywRpyx9hxeeq2d4">
    <title>ã‚¤ãƒãƒ‰ã‚­ã¯ Webpack ã˜ã‚ƒãªãã¦ Rollup ã ï¼Terser ã¨ã¨ã‚‚ã« Rollup ã‚’ä½¿ã£ã¦ã¿ã‚‹ - Neo's World</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/styles.css">
    <link rel="canonical" href="https://neos21.net/blog/2020/09/04-02.html">
    <link rel="search" type="application/opensearchdescription+xml" title="neos21.net" href="/opensearch.xml">
    <link rel="alternate" type="application/atom+xml" href="/feeds.xml">
    <link rel="author" href="http://www.hatena.ne.jp/neos21/">
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YMHFLZP1M1"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-YMHFLZP1M1');gtag('config','UA-106501-1');</script>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6475907504235292" crossorigin="anonymous"></script>
  </head>
  <body>
    <div id="container">
      <header id="header">
        <div id="site-title"><a href="/index.html">Neo's World</a></div>
        <nav id="header-links">
          <ul>
            <li id="header-link-about"><a href="/about/index.html" title="About"><span>About</span></a></li>
            <li id="header-link-search"><a href="/about/search.html" title="Search"><span>Search</span></a></li>
            <li id="header-link-feeds"><a href="/feeds.xml" title="Feeds"><span>Feeds</span></a></li>
            <li id="header-link-to-bottom"><a href="#footer" title="To Bottom"><span>â–¼ To Bottom</span></a></li>
          </ul>
        </nav>
        <nav id="global-nav">
          <ul>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/tech/index.html">Tech</a></li>
            <li><a href="/music/index.html">Music</a></li>
            <li><a href="/games/index.html">Games</a></li>
            <li><a href="/gallery/index.html">Gallery</a></li>
            <li><a href="/etc/index.html">Etc.</a></li>
          </ul>
        </nav>
        <nav id="path">
          <ul>
            <li><a href="/index.html">Neo's World</a></li>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/blog/2020/index.html">2020å¹´</a></li>
            <li><a href="/blog/2020/09/index.html">09æœˆ</a></li>
          </ul>
        </nav>
      </header>
      <main id="main">
        <div id="header-date"><time>2020-09-04</time></div>
        <h1 id="page-title">ã‚¤ãƒãƒ‰ã‚­ã¯ Webpack ã˜ã‚ƒãªãã¦ Rollup ã ï¼Terser ã¨ã¨ã‚‚ã« Rollup ã‚’ä½¿ã£ã¦ã¿ã‚‹</h1>

<p>Webpack ãªã‚“ã‹ã¨åŒã˜ãƒ“ãƒ«ãƒ‰ãƒ»ãƒãƒ³ãƒ‰ãƒ«ãƒ„ãƒ¼ãƒ«ã® <strong>Rollup</strong> ã‚’ä½¿ã£ã¦ã¿ã‚‹ã€‚</p>
<h2 id="ç›®æ¬¡"><a class="header-link" href="#ç›®æ¬¡"><span class="header-link-mark"></span></a>ç›®æ¬¡</h2>
<ul>
  <li><a href="#rollup-%E3%81%A8-webpack-%E3%81%AE%E9%81%95%E3%81%84">Rollup ã¨ Webpack ã®é•ã„</a></li>
  <li><a href="#transpiler-%E3%81%A8-minifier-%E3%81%A8%E3%81%AE%E5%8C%BA%E5%88%A5">Transpiler ã¨ Minifier ã¨ã®åŒºåˆ¥</a></li>
  <li><a href="#rollup-%E3%82%92%E8%A9%A6%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B">Rollup ã‚’è©¦ã—ã¦ã¿ã‚‹</a></li>
  <li><a href="#rollup-%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E4%BD%9C%E3%82%8B">Rollup ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹</a></li>
  <li><a href="#terser-%E3%82%92%E7%B5%84%E3%81%BF%E8%BE%BC%E3%82%80--rollup-plugin-terser">Terser ã‚’çµ„ã¿è¾¼ã‚€ : <code>rollup-plugin-terser</code></a></li>
</ul>
<h2 id="rollup-ã¨-webpack-ã®é•ã„"><a class="header-link" href="#rollup-ã¨-webpack-ã®é•ã„"><span class="header-link-mark"></span></a>Rollup ã¨ Webpack ã®é•ã„</h2>
<p>åŒã˜ãƒãƒ³ãƒ‰ãƒ«ãƒ„ãƒ¼ãƒ«ã§ã‚ã‚‹ Webpack ã¨ Rollup ã®ç‰¹å¾´ã‚’æ¯”ã¹ã¦ã¿ã‚‹ã€‚</p>
<ul>
  <li>å‚è€ƒï¼š<a href="https://qiita.com/jkr_2255/items/63b6926ebbef5d3e979b">Webpackã¨Rollupã‚’æ¯”ã¹ã¦ã¿ã¦ - Qiita</a>
    <ul>
      <li>CommonJS : <code>require</code> ã¨ <code>module.exports</code></li>
      <li>ES6 (ES2015) : <code>import</code> ã¨ <code>export</code></li>
      <li>Webpack ã¯ CommonJS ã—ã‹èªè­˜ã§ããªã„</li>
    </ul>
  </li>
  <li>å‚è€ƒï¼š<a href="https://postd.cc/webpack-and-rollup-the-same-but-different/">webpackã¨Rollupï¼šä¼¼ã¦éãªã‚‹ã‚‚ã® | POSTD</a>
    <ul>
      <li>Rollup ã¯ ES2015 ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä»•çµ„ã¿ã‚’æ´»ã‹ã™ä½œã‚Š</li>
      <li>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¯ Rollup ãŒå‘ã„ã¦ã„ã‚‹</li>
    </ul>
  </li>
  <li>å‚è€ƒï¼š<a href="https://qiita.com/cognitom/items/e3ac0da00241f427dad6">RollupãŒã¡ã‚‡ã†ã©ã„ã„æ„Ÿã˜ - Qiita</a>
    <ul>
      <li>Rollup ã¯å†…éƒ¨çš„ã« ES6 ã§æ‰±ã†</li>
    </ul>
  </li>
  <li>å‚è€ƒï¼š<a href="http://var.blog.jp/archives/79902630.html">rollup ãŒæ±‚ã‚ã¦ãŸã‚‚ã®ã ã£ãŸã‹ã‚‚ã—ã‚Œãªã„</a>
    <ul>
      <li>Export ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆåˆ¥æ¯”è¼ƒ</li>
    </ul>
  </li>
</ul>
<p><em>Webpack ã¯ CommonJS ã§èªè­˜</em>ã—ã€<strong>Rollup ã¯ ES Modules ã§æ‰±ã†</strong>ã€ã¨ã„ã†ã®ãŒå¤§ããªé•ã„ã‹ã€‚ECMAScript ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®é•ã„ã ã‘ã§ãªãã€ã‚³ãƒ¬ãŒ Tree-Shaking ãªã©ã«åŠ¹ã„ã¦ãã‚‹ã®ã§ã€ãƒãƒ³ãƒ‰ãƒ«åŠ¹ç‡ã«å·®ãŒå‡ºã¦ãã‚‹ã‚ˆã†ã ã€‚</p>
<h2 id="transpiler-ã¨-minifier-ã¨ã®åŒºåˆ¥"><a class="header-link" href="#transpiler-ã¨-minifier-ã¨ã®åŒºåˆ¥"><span class="header-link-mark"></span></a>Transpiler ã¨ Minifier ã¨ã®åŒºåˆ¥</h2>
<p>Rollup ã‚„ Webpack ã¯ <em>Bundler</em> ã§ã‚ã‚‹ãŒã€Babel ã¯ Transpiler ã ã—ã€å¾Œã§ä½¿ã† Terser ã¯ Minifier ã ã€‚ã“ã‚Œã‚‰ã®åŒºåˆ¥ã‚’ã—ã£ã‹ã‚Šä»˜ã‘ã¦ãŠã“ã†ã€‚</p>
<ul>
  <li>Bundler
    <ul>
      <li><code>export</code>ãƒ»<code>import</code> ã§è¤‡æ•°ã«åˆ¥ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãŸã¡ã‚’1ãƒ•ã‚¡ã‚¤ãƒ«ã«æŸã­ã‚‹</li>
    </ul>
  </li>
  <li>Transpiler
    <ul>
      <li>æ–°ã—ã„ä»•æ§˜ã®ã‚³ãƒ¼ãƒ‰ã‚’å¤ã„ä»•æ§˜ã®ã‚³ãƒ¼ãƒ‰ã«å¤‰æ›ã™ã‚‹</li>
    </ul>
  </li>
  <li>Minifier
    <ul>
      <li>ã‚³ãƒ¼ãƒ‰ã‚’åœ§ç¸®ã—ãŸã‚Šé›£èª­åŒ–ã—ãŸã‚Šã™ã‚‹</li>
    </ul>
  </li>
</ul>
<p>ç´ äººè€ƒãˆã ã¨ã€ŒBundler ã§æŸã­ã¦ â†’ Transpiler ã§å½¢å¼ç›´ã—ã¦ â†’ Minifier ã§åœ§ç¸®ã™ã‚Œã°ãˆãˆã‚“ã¡ã‚ƒã†ã®ï¼Ÿã€ã¨æ€ã£ã¦ã—ã¾ã†ãŒã€å®Ÿéš›ã®ã¨ã“ã‚ã¯ãã†ç°¡å˜ã«ã‚‚ã„ã‹ãªã„ã‚ˆã†ã ã€‚</p>
<ul>
  <li>å‚è€ƒï¼š<a href="https://github.com/rollup/plugins/tree/master/packages/babel#why">plugins/packages/babel at master Â· rollup/plugins Â· GitHub</a></li>
</ul>
<p>ä½•ã‚’ä»˜ã‘è¶³ã—ã€ä½•ã‚’å–ã‚Šé™¤ã„ã¦ã„ã„ã‹ã€ã¨ã„ã†åˆ¤æ–­ãŒè¤‡é›‘ã«ãªã‚Šã€Source Map ã‚’ä½œã‚‹ã®ãŒå›°é›£ã ã£ãŸã‚Šã™ã‚‹ã‚‰ã—ã„ã€‚</p>
<p>ãã®è¾ºã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã«ã€Webpack ã‚„ Rollup ã¯ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã„ã†å½¢ã§ã€Babel ã‚„ Terser ã‚’çµ„ã¿è¾¼ã‚ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã‚ˆã†ã ã€‚</p>
<ul>
  <li>å‚è€ƒï¼š<a href="https://gist.github.com/shqld/d101cae50dd83ab7d3487cdb10b80f4d">å€‹äººçš„ã«Terser &#x26; Babelã®å¥½ããªã¨ã“ã‚ Â· GitHub</a></li>
</ul>
<h2 id="rollup-ã‚’è©¦ã—ã¦ã¿ã‚‹"><a class="header-link" href="#rollup-ã‚’è©¦ã—ã¦ã¿ã‚‹"><span class="header-link-mark"></span></a>Rollup ã‚’è©¦ã—ã¦ã¿ã‚‹</h2>
<p>æ¦‚å¿µã‚’æ•´ç†ã—ãŸã¨ã“ã‚ã§ã€Rollup ã‚’ä½¿ã£ã¦ã¿ã‚‹ã€‚å…¬å¼ã®ã‚¬ã‚¤ãƒ‰ã‚’å‚è€ƒã«ã€‚</p>
<ul>
  <li>å‚è€ƒï¼š<a href="https://rollupjs.org/guide/en/">rollup.js</a></li>
</ul>
<p>é©å½“ãªä½œæ¥­ç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œã‚Šã€<code>rollup</code> ã‚³ãƒãƒ³ãƒ‰ãŒãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ãã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> init -y
$ <span class="token function">npm</span> <span class="token function">install</span> -D rollup
$ npx rollup
</code></pre>
<p>ãã—ãŸã‚‰æ¬¡ã®ã‚ˆã†ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ã¿ã‚‹ã€‚</p>
<ul>
  <li><code>src/index.mjs</code></li>
</ul>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword module">import</span> <span class="token imports">hoge</span> <span class="token keyword module">from</span> <span class="token string">'./hoge.mjs'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports">fuga</span> <span class="token keyword module">from</span> <span class="token string">'./fuga.mjs'</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">hoge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>fuga<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
  <li><code>src/hoge.mjs</code></li>
</ul>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">class</span> <span class="token class-name">hoge</span> <span class="token punctuation">{</span>
  <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<ul>
  <li><code>src/fuga.mjs</code></li>
</ul>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> fuga <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span> <span class="token string">'b'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword module">export</span> <span class="token keyword module">default</span> fuga<span class="token punctuation">;</span>
</code></pre>
<p>ES Modules ã®ä»•çµ„ã¿ã§å®Ÿè£…ã—ã¦ã„ã‚‹ã®ã§ã€æ‹¡å¼µå­ã¯ <code>.mjs</code> ã§ã€<code>require</code> ã§ã¯ãªã <code>import</code> ã‚’ä½¿ã£ã¦ã„ã‚‹ã€‚</p>
<p>ã‚³ãƒ¬ã‚’ Rollup ã§æŸã­ã¦ã¿ã‚‹ã€‚</p>
<pre class="language-bash"><code class="language-bash">$ npx rollup src/index.mjs

src/index.mjs â†’ stdout<span class="token punctuation">..</span>.
class hoge <span class="token punctuation">{</span>
  <span class="token function-name function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console.log<span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

const fuga <span class="token operator">=</span> <span class="token punctuation">{</span>
  a: <span class="token string">'a'</span>,
  b: <span class="token string">'b'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

new hoge<span class="token punctuation">(</span><span class="token punctuation">)</span>.hello<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console.log<span class="token punctuation">(</span>fuga<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>src/hoge.mjs</code> ã¨ <code>src/fuga.mjs</code> ã®å†…å®¹ãŒæ··ãœè¾¼ã¾ã‚Œã¦ã€1ã¤ã«ãªã£ãŸã€‚</p>
<p>ç¶šã„ã¦ <em>IIFE (Immediately Invoked Function Expressionãƒ»å³æ™‚å®Ÿè¡Œé–¢æ•°å¼)</em> ã®å½¢å¼ã§å‡ºåŠ›ã—ã¦ã¿ã‚‹ã€‚</p>
<pre class="language-bash"><code class="language-bash">$ npx rollup src/index.mjs --format<span class="token operator">=</span><span class="token string">'iife'</span>

src/index.mjs â†’ stdout<span class="token punctuation">..</span>.
<span class="token punctuation">(</span><span class="token function-name function">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">'use strict'</span><span class="token punctuation">;</span>

  class hoge <span class="token punctuation">{</span>
    <span class="token function-name function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console.log<span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  const fuga <span class="token operator">=</span> <span class="token punctuation">{</span>
    a: <span class="token string">'a'</span>,
    b: <span class="token string">'b'</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  new hoge<span class="token punctuation">(</span><span class="token punctuation">)</span>.hello<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console.log<span class="token punctuation">(</span>fuga<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
</code></pre>
<p>ã‚³ãƒãƒ©ã¯å³æ™‚é–¢æ•°ã®ä¸­ã«ãƒ©ãƒƒãƒ—ã•ã‚Œã¦ã„ã¦ã€HTML ã«çµ„ã¿è¾¼ã¿ã‚„ã™ããªã£ã¦ã„ã‚‹ã€‚</p>
<p>ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã™ã‚‹å ´åˆã¯ <code>--file</code> ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ã†ã€‚</p>
<pre class="language-bash"><code class="language-bash">$ npx rollup src/index.mjs --format<span class="token operator">=</span><span class="token string">'iife'</span> --file<span class="token operator">=</span><span class="token string">'dist.js'</span>

src/index.mjs â†’ dist.js<span class="token punctuation">..</span>.
created dist.js <span class="token keyword">in</span> 55ms
</code></pre>
<p>ã“ã‚“ãªæ„Ÿã˜ã€‚</p>
<h2 id="rollup-ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹"><a class="header-link" href="#rollup-ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹"><span class="header-link-mark"></span></a>Rollup ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹</h2>
<p>ã“ã“ã¾ã§ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ Rollup ã‚’å©ã„ã¦ã„ãŸãŒã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãªã©ã®å†…å®¹ã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãã“ã¨ã‚‚ã§ãã‚‹ã€‚</p>
<ul>
  <li><code>rollup.config.js</code>
    <ul>
      <li><code>module.exports</code> ã§å‡ºåŠ›ã™ã‚‹ Webpack ã¨é•ã„ã€ES Modules ã® <code>export default</code> ã‚’ä½¿ã†ã¨ã“ã‚ãŒæ–°ã—ã„</li>
    </ul>
  </li>
</ul>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token string">'src/index.mjs'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    file<span class="token operator">:</span> <span class="token string">'dist.js'</span><span class="token punctuation">,</span>
    format<span class="token operator">:</span> <span class="token string">'iife'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>ã§ã€å®Ÿè¡Œæ™‚ã« <code>--config</code> (<code>-c</code>) ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚Œã° <code>rollup.config.js</code> ãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹ã€‚</p>
<pre class="language-bash"><code class="language-bash">$ npx rollup --config
</code></pre>
<h2 id="terser-ã‚’çµ„ã¿è¾¼ã‚€--rollup-plugin-terser"><a class="header-link" href="#terser-ã‚’çµ„ã¿è¾¼ã‚€--rollup-plugin-terser"><span class="header-link-mark"></span></a>Terser ã‚’çµ„ã¿è¾¼ã‚€ : <code>rollup-plugin-terser</code></h2>
<p>æœ€å¾Œã«ã€Rollup ã« Terser ã‚’çµ„ã¿è¾¼ã‚“ã§ã€ã‚³ãƒ¼ãƒ‰ã‚’åœ§ç¸®ã—ã¦ã¿ã‚‹ã€‚<code>rollup-plugin-terser</code> ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚<code>terser</code> æœ¬ä½“ã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãªãã¦è‰¯ã„ã€‚</p>
<ul>
  <li><a href="https://www.npmjs.com/package/rollup-plugin-terser">rollup-plugin-terser - npm</a></li>
</ul>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> -D rollup-plugin-terser
</code></pre>
<p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯ã“ã†ã™ã‚‹ã€‚</p>
<ul>
  <li><code>rollup.config.js</code></li>
</ul>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> terser <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'rollup-plugin-terser'</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token punctuation">{</span>
  input<span class="token operator">:</span> <span class="token string">'src/index.mjs'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// éåœ§ç¸®ã®é€šå¸¸ç‰ˆãƒ•ã‚¡ã‚¤ãƒ«</span>
    <span class="token punctuation">{</span>
      file<span class="token operator">:</span> <span class="token string">'dist.js'</span><span class="token punctuation">,</span>
      format<span class="token operator">:</span> <span class="token string">'cjs'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Terser ã«ã‚ˆã‚‹åœ§ç¸®ç‰ˆãƒ•ã‚¡ã‚¤ãƒ«</span>
    <span class="token punctuation">{</span>
      file<span class="token operator">:</span> <span class="token string">'dist.min.js'</span><span class="token punctuation">,</span>
      format<span class="token operator">:</span> <span class="token string">'cjs'</span><span class="token punctuation">,</span>
      plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token function">terser</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>ã‚³ãƒ¬ã§ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã‚‹ã€‚</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># package.json ã« npm-scripts ã‚’æ›¸ã„ã¦ã¿ãŸ</span>
$ <span class="token function">npm</span> run build

<span class="token operator">></span> practice-rollup@ build /Users/Neo/practice-rollup
<span class="token operator">></span> rollup --config

src/index.mjs â†’ dist.js, dist.min.js<span class="token punctuation">..</span>.
created dist.js, dist.min.js <span class="token keyword">in</span> 207ms
</code></pre>
<p>è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ã„ãŸã¨ãŠã‚Šã€2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚ŒãŸã“ã¨ãŒåˆ†ã‹ã‚‹ã€‚</p>
<p>ãã‚Œãã‚Œä¸­èº«ã‚’è¦‹ã¦ã¿ã‚ˆã†ã€‚</p>
<ul>
  <li><code>dist.js</code>
    <ul>
      <li>Terser ã‚’çµ„ã¿è¾¼ã‚“ã§ã„ãªã„éåœ§ç¸®ç‰ˆã€‚Rollup å˜ä½“ã®æˆæœ</li>
    </ul>
  </li>
</ul>
<pre class="language-javascript"><code class="language-javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">hoge</span> <span class="token punctuation">{</span>
  <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> fuga <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token string">'a'</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span> <span class="token string">'b'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">hoge</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>fuga<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
  <li><code>dist.min.js</code>
    <ul>
      <li>Terser ã«ã‚ˆã‚‹åœ§ç¸®ãŒè¡Œã‚ã‚Œã¦ã„ã‚‹ã€‚ç‰¹ã« <code>fuga</code> å¤‰æ•°ãŒæ¶ˆãˆã¦ã„ã‚‹ã“ã¨ãŒé¡•è‘—ã§ã‚ã‚ã†</li>
    </ul>
  </li>
</ul>
<pre class="language-javascript"><code class="language-javascript"><span class="token string">"use strict"</span><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">class</span><span class="token punctuation">{</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">"Hello"</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token operator">:</span><span class="token string">"a"</span><span class="token punctuation">,</span>b<span class="token operator">:</span><span class="token string">"b"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>ã“ã‚“ãªæ„Ÿã˜ã€‚ã‹ãªã‚Šã‚·ãƒ³ãƒ—ãƒ«ã«ä½¿ãˆã¦è‰¯ã„æ„Ÿã˜ã€‚</p>
<ul>
  <li>å‚è€ƒï¼š<a href="https://hysryt.com/archives/1565">Rollup ã®ä½¿ã„æ–¹ - ãƒŠãƒ‡ã‚ºãƒ€ãƒ»ã‚´ãƒœãƒªãƒ³ğŸ–¥</a></li>
  <li>å‚è€ƒï¼š<a href="https://github.com/rollup/awesome">GitHub - rollup/awesome: âš¡ï¸ Delightful Rollup Plugins, Packages, and Resources</a></li>
</ul>

      </main>
      <footer id="footer">
        <div id="date-time">
          <dl>
            <dt>Created</dt>
            <dd><time>2020-09-04</time></dd>
            <dt>Last-Modified</dt>
            <dd><time>2020-09-04</time></dd>
          </dl>
        </div>
        <nav id="footer-links">
          <ul>
            <li id="footer-link-about"><a href="/about/index.html" title="About">About</a></li>
            <li id="footer-link-search"><a href="/about/search.html" title="Search">Search</a></li>
            <li id="footer-link-feeds"><a href="/feeds.xml" title="Feeds">Feeds</a></li>
            <li id="footer-link-github"><a href="https://github.com/Neos21/" title="GitHub">GitHub</a></li>
          </ul>
        </nav>
        <nav id="to-top"><a href="#" title="To Top"><span>â–² To Top</span></a></nav>
      </footer>
    </div>
  </body>
</html>
