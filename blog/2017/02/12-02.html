<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="theme-color" content="#0990d0">
    <!-- Google Search Console -->
    <meta name="google-site-verification" content="AvoEr3mUJFF2H_mPWWgShfmjBVP3ywRpyx9hxeeq2d4">
    <!-- Open Graph・Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Neo's World">
    <meta property="og:title" content=".bash_profile と .bashrc は何が違うの？使い分けを覚える - Neo's World">
    <meta property="og:description" content=".bash_profile と .bashrc は何が違うの？使い分けを覚える - Neo's World">
    <meta property="og:url" content="https://neos21.net/blog/2017/02/12-02.html">
    <meta property="og:image" content="https://neos21.net/ogp.png">
    <meta property="og:locale" content="ja_JP">
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content=".bash_profile と .bashrc は何が違うの？使い分けを覚える - Neo's World">
    <meta property="twitter:description" content=".bash_profile と .bashrc は何が違うの？使い分けを覚える - Neo's World">
    <meta property="twitter:url" content="https://neos21.net/blog/2017/02/12-02.html">
    <meta property="twitter:image" content="https://neos21.net/ogp.png">
    <title>.bash_profile と .bashrc は何が違うの？使い分けを覚える - Neo's World</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="stylesheet" href="/styles.css">
    <link rel="canonical" href="https://neos21.net/blog/2017/02/12-02.html">
    <link rel="search" type="application/opensearchdescription+xml" title="neos21.net" href="/opensearch.xml">
    <link rel="alternate" type="application/atom+xml" title="Feeds" href="/feeds.xml">
    <link rel="author" href="http://www.hatena.ne.jp/neos21/">
    <script src="/scripts.js"></script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MZCGD23');</script>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6475907504235292" crossorigin="anonymous"></script>
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MZCGD23" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div id="container">
      <header id="header">
        <div id="header-brand">
          <div id="header-brand-contents">
            <div id="site-title"><a href="/index.html">Neo's World</a></div>
            <nav id="header-links">
              <ul>
                <li id="header-link-theme"><a href="#" title="Toggle Theme"><span>Toggle Theme</span></a></li>
                <li id="header-link-about"><a href="/about/index.html" title="About"><span>About</span></a></li>
                <li id="header-link-search"><a href="/about/search.html" title="Search"><span>Search</span></a></li>
                <li id="header-link-feeds"><a href="/feeds.xml" title="Feeds"><span>Feeds</span></a></li>
                <li id="header-link-to-bottom"><a href="#footer" title="To Bottom"><span>▼ To Bottom</span></a></li>
              </ul>
            </nav>
          </div>
        </div>
        <nav id="global-nav">
          <ul>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/tech/index.html">Tech</a></li>
            <li><a href="/music/index.html">Music</a></li>
            <li><a href="/games/index.html">Games</a></li>
            <li><a href="/gallery/index.html">Gallery</a></li>
            <li><a href="/etc/index.html">Etc.</a></li>
          </ul>
        </nav>
        <nav id="path">
          <ul>
            <li><a href="/index.html">Neo's World</a></li>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/blog/2017/index.html">2017年</a></li>
            <li><a href="/blog/2017/02/index.html">02月</a></li>
          </ul>
        </nav>
      </header>
      <main id="main">
        <div id="header-date"><time>2017-02-12</time></div>
        <h1 id="page-title">.bash_profile と .bashrc は何が違うの？使い分けを覚える</h1>

<p>普段 Windows で GitBash を起動して Bash しか使わない人とか、Mac OSX デフォルトのターミナルしか触らない人とかは、これらの違いやそれによる利便を感じることはないと言える。自分も今のところ、「分かれていることで便利だ」と感じるようなことはない。</p>
<p>ただ、世間一般的にどういう風に捉えられているのか、自分はどう使い分けておくといいのかを整理しておこう。</p>
<h2 id="動きを整理する"><a class="header-link" href="#動きを整理する"><span class="header-link-mark"></span></a>動きを整理する</h2>
<p>まずは <code>.bash_profile</code> と <code>.bashrc</code> の中身を以下のようにしてみることで、それぞれのファイルの動きを整理してみよう。</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># .bash_profile</span>
<span class="token builtin class-name">echo</span> This is .bash_profile
<span class="token comment"># .bashrc を読み込む</span>
<span class="token builtin class-name">test</span> -r ~/.bashrc <span class="token operator">&#x26;&#x26;</span> <span class="token builtin class-name">.</span> ~/.bashrc
</code></pre>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># .bashrc</span>
<span class="token builtin class-name">echo</span> This is .bashrc
</code></pre>
<p>このような状態で、例えば GitBash を、例えばターミナル.app を起動してみる。するとどうなるか。</p>
<pre class="language-bash"><code class="language-bash">This is .bash_profile
This is .bashrc
$
</code></pre>
<p>このように、<code>.bash_profile</code> が <code>.bashrc</code> を読み込もうとしているので、このように実行されている。ちなみに、<code>.bash_profile</code> 内に <code>.bashrc</code> を読み込むコマンドを書かないと、<code>.bashrc</code> は読み込まれない。</p>
<p>ではターミナルを起動後、<code>bash</code> コマンドで新たに Bash を起動したらどうなるか。</p>
<pre class="language-bash"><code class="language-bash">$ <span class="token function">bash</span>
This is .bashrc
$
</code></pre>
<p>今度は <code>.bash_profile</code> は読み込まれておらず、<code>.bashrc</code> だけが読み込まれていることが分かる。</p>
<p>よく云われている、</p>
<ul>
  <li><code>.bash_profile</code> はログイン時に1回だけ実行される</li>
  <li><code>.bashrc</code> はシェルを起動するたびに実行される</li>
</ul>
<p>とはこういう動作のことを指している。</p>
<p>だから、例えば <em>GUI 環境を持つ Linux マシンにログインして、画面上からターミナルを起動すると、<code>.bash_profile</code> は実行されず、<code>.bashrc</code> だけが実行される</em>。Linux に既にログインしているからだ。</p>
<h2 id="bash_profile-はログイン時に1回だけ実行される"><a class="header-link" href="#bash_profile-はログイン時に1回だけ実行される"><span class="header-link-mark"></span></a><code>.bash_profile</code> はログイン時に1回だけ実行される</h2>
<p>さて、じゃあ <code>.bash_profile</code> には何を書くのが良いのだろうか。答えは、<strong>環境変数を書くもの</strong>として扱うのが良い。</p>
<p>環境変数とは、<code>export</code> コマンドで宣言する変数だ。この環境変数はプロセス間で共有されるので、シェルを起動するたびに何度も呼ぶ必要がない。</p>
<p>だから、<code>.bash_profile</code> は環境変数を書いたら、さっさと <code>.bashrc</code> を読み込んで終わらせてしまうだけの、<em>普段はあんまりカスタマイズしないところ</em>としておくと良いだろう。</p>
<h2 id="bashrc-はシェルを起動するたびに実行される"><a class="header-link" href="#bashrc-はシェルを起動するたびに実行される"><span class="header-link-mark"></span></a><code>.bashrc</code> はシェルを起動するたびに実行される</h2>
<p>一方、<code>.bashrc</code> はシェルを起動するたびに実行されるので、<strong>環境変数ではない変数だとか、エイリアスとか、独自のシェル関数を宣言</strong>しておくと良い。</p>
<p><code>.bash_profile</code> に <code>alias</code> コマンドでエイリアスを登録してしまうと、ターミナルを起動後に <code>bash</code> コマンドで新たなシェルを起動したときに、<code>.bash_profile</code> に書いた <code>alias</code> は読み込まれない。エイリアスは <code>.bashrc</code> に書いた方が良い。</p>
<p>エイリアスなら、環境変数よりは色々弄る機会が多いと思うので、「<em>普段は <code>.bashrc</code> に書く</em>」と覚えてしまって良いだろう。</p>
<h2 id="参考"><a class="header-link" href="#参考"><span class="header-link-mark"></span></a>参考</h2>
<ul>
  <li><a href="http://qiita.com/magicant/items/d3bb7ea1192e63fba850">本当に正しい .bashrc と .bash_profile の使ひ分け - Qiita</a></li>
  <li><a href="http://qiita.com/shyamahira/items/260862743e4c9794b5d2">.bash_profileと.bashrcについて - Qiita</a></li>
  <li><a href="http://osksn2.hep.sci.osaka-u.ac.jp/~taku/osx/bash_profile.html">.bash_profileと .bashrcの設定</a></li>
  <li><a href="http://dqn.sakusakutto.jp/2012/08/bash_profile_bashrc.html">.bash_profileと.bashrcの違いが覚えられないあなたへの処方箋 · DQNEO起業日記</a></li>
  <li><a href="https://ex1.m-yabe.com/archives/1980">.bash_profileと.bashrc の違いについて - ex1-lab</a></li>
  <li><a href="http://takuya-1st.hatenablog.jp/entry/20110102/1293970212">bashrcの設定の読み込まれる順番 - それマグで！</a></li>
  <li><a href="http://usagidaioh.exblog.jp/17578556">.bashrc と .bash_profile 結局どっちを使えばいい？ : 王様うさぎの部屋</a></li>
  <li><a href="http://qiita.com/hirokishirai/items/5a529c8395c4b336bf31">.bash_profile ? .bashrc ? いろいろあるけどこいつらなにもの？ - Qiita</a></li>
</ul>

      </main>
      <footer id="footer">
        <div id="footer-contents">
          <div id="date-time">
            <dl>
              <dt>Created</dt>
              <dd><time>2017-02-12</time></dd>
              <dt>Last-Modified</dt>
              <dd><time>2017-02-12</time></dd>
            </dl>
          </div>
          <nav id="footer-links">
            <ul>
              <li id="footer-link-about"><a href="/about/index.html" title="About">About</a></li>
              <li id="footer-link-search"><a href="/about/search.html" title="Search">Search</a></li>
              <li id="footer-link-feeds"><a href="/feeds.xml" title="Feeds">Feeds</a></li>
              <li id="footer-link-github"><a href="https://github.com/Neos21/" title="GitHub">GitHub</a></li>
            </ul>
          </nav>
          <nav id="to-top"><a href="#" title="To Top"><span>▲ To Top</span></a></nav>
        </div>
      </footer>
    </div>
  </body>
</html>
