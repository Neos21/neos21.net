<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="theme-color" content="#0990d0">
    <!-- Google Search Console -->
    <meta name="google-site-verification" content="AvoEr3mUJFF2H_mPWWgShfmjBVP3ywRpyx9hxeeq2d4">
    <title>Rails アプリに React.js を導入する react-rails を試してみる - Neo's World</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/styles.css">
    <link rel="canonical" href="https://neos21.net/blog/2017/03/19-02.html">
    <link rel="search" type="application/opensearchdescription+xml" title="neos21.net" href="/opensearch.xml">
    <link rel="alternate" type="application/atom+xml" href="/feeds.xml">
    <link rel="author" href="http://www.hatena.ne.jp/neos21/">
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YMHFLZP1M1"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-YMHFLZP1M1');gtag('config','UA-106501-1');</script>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6475907504235292" crossorigin="anonymous"></script>
  </head>
  <body>
    <div id="container">
      <header id="header">
        <div id="header-brand">
          <div id="header-brand-contents">
            <div id="site-title"><a href="/index.html">Neo's World</a></div>
            <nav id="header-links">
              <ul>
                <li id="header-link-about"><a href="/about/index.html" title="About"><span>About</span></a></li>
                <li id="header-link-search"><a href="/about/search.html" title="Search"><span>Search</span></a></li>
                <li id="header-link-feeds"><a href="/feeds.xml" title="Feeds"><span>Feeds</span></a></li>
                <li id="header-link-to-bottom"><a href="#footer" title="To Bottom"><span>▼ To Bottom</span></a></li>
              </ul>
            </nav>
          </div>
        </div>
        <nav id="global-nav">
          <ul>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/tech/index.html">Tech</a></li>
            <li><a href="/music/index.html">Music</a></li>
            <li><a href="/games/index.html">Games</a></li>
            <li><a href="/gallery/index.html">Gallery</a></li>
            <li><a href="/etc/index.html">Etc.</a></li>
          </ul>
        </nav>
        <nav id="path">
          <ul>
            <li><a href="/index.html">Neo's World</a></li>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/blog/2017/index.html">2017年</a></li>
            <li><a href="/blog/2017/03/index.html">03月</a></li>
          </ul>
        </nav>
      </header>
      <main id="main">
        <div id="header-date"><time>2017-03-19</time></div>
        <h1 id="page-title">Rails アプリに React.js を導入する react-rails を試してみる</h1>

<p><strong>react-rails</strong> という、React.js を Rails 上で使いやすくしてくれている Gem があったので入れてみる。</p>
<h2 id="インストール"><a class="header-link" href="#インストール"><span class="header-link-mark"></span></a>インストール</h2>
<p>任意の Rails アプリの <code>Gemfile</code> に、以下を書く。</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token comment"># React Rails</span>
gem <span class="token string">'react-rails'</span><span class="token punctuation">,</span> <span class="token string">'~> 1.0'</span>
</code></pre>
<p>そしたら <code>bundle install</code> を実行してインストールする。</p>
<pre class="language-bash"><code class="language-bash">$ bundle <span class="token function">install</span>

…<span class="token punctuation">(</span>省略<span class="token punctuation">)</span>…
Installing react-rails <span class="token number">1.10</span>.0
…<span class="token punctuation">(</span>省略<span class="token punctuation">)</span>…
</code></pre>
<p>次に React.js を Rails アプリにインストールするスクリプトを実行する。</p>
<pre class="language-bash"><code class="language-bash">$ rails generate react:install
      create  app/assets/javascripts/components
      create  app/assets/javascripts/components/.gitkeep
      insert  app/assets/javascripts/application.js
      insert  app/assets/javascripts/application.js
      insert  app/assets/javascripts/application.js
      create  app/assets/javascripts/components.js
</code></pre>
<p><code>components</code> ディレクトリが作られたり、<code>application.js</code> に何か書き加えられたらしき結果が出ている。少し見てみる。</p>
<p><code>application.js</code> に以下が追加されている。</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">//= require react</span>
<span class="token comment">//= require react_ujs</span>
<span class="token comment">//= require components</span>
</code></pre>
<p>ココで読み込まれている「<code>components</code>」は、同ディレクトリの <code>components.js</code> のことらしい。中を見てみると以下のようになっている。</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">//= require_tree ./components</span>
</code></pre>
<p>要するにさっき作られた、今のところまだ空の <code>components</code> ディレクトリ配下のファイルを全て読み込む、という話らしい。</p>
<h2 id="react-コンポーネントの作成"><a class="header-link" href="#react-コンポーネントの作成"><span class="header-link-mark"></span></a>React コンポーネントの作成</h2>
<p>では、React コンポーネントを作ってみる。</p>
<p>React コンポーネントを生成してくれるコマンドがあるのでコレを使う。</p>
<pre class="language-bash"><code class="language-bash">$ rails generate react:component Film
      create  app/assets/javascripts/components/film.js.jsx
</code></pre>
<p>作られた <code>film.js.jsx</code> はこんな風になっている。</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token maybe-class-name">Film</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>

  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token operator">&#x3C;</span>div <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>空 div を吐くだけだけど、最初から React コンポーネントの雛形が作られている。</p>
<p>今回は最終的に、映画情報の一覧ページを作ってみたい。</p>
<h2 id="まずは静的データを表示する"><a class="header-link" href="#まずは静的データを表示する"><span class="header-link-mark"></span></a>まずは静的データを表示する</h2>
<p><code>views/films/index.html.erb</code> の中身を以下の1行にする。</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token operator">&#x3C;</span><span class="token operator">%</span><span class="token operator">=</span> react_component<span class="token punctuation">(</span><span class="token string">'Film'</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">></span>
</code></pre>
<p>これで、react-rails が <code>app/assets/javascripts/components/film.js.jsx</code> に書かれている <code>Film</code> という React のコンポーネントクラスを特定して出力してくれる。Rails の <code>render</code> 相当ということだろう。</p>
<p>先ほどの <code>film.js.jsx</code> に、まずは固定文言だけ書いてみる。</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token maybe-class-name">Film</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"film"</span><span class="token operator">></span>
        <span class="token maybe-class-name">MyCinemaReview</span> <span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token operator">-</span><span class="token maybe-class-name">Rails</span> <span class="token maybe-class-name">Sample</span><span class="token punctuation">.</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>こんな風に書き換えた。JSX はほとんど HTML そのままを JS コードに混ぜ込んで書くことができる。<code>class</code> 属性は予約語と衝突するためか、<code>className</code> として書く必要がある。</p>
<p>あとは <code>rails server</code> を起動すると、画面表示されるようになっている。</p>
<p><code>rails s</code> でサーバを起動した状態で react-rails のインストールやコンポーネントの追加などをしていたら「NoMethodError」となってしまったので、インストール手順に問題がない場合はサーバを一旦落として再起動してみると良いかも。</p>
<h2 id="固定データを渡してデータバインディングをやってみる"><a class="header-link" href="#固定データを渡してデータバインディングをやってみる"><span class="header-link-mark"></span></a>固定データを渡してデータバインディングをやってみる</h2>
<p><code>index.html.erb</code> に以下のように書くことで、React の <code>prop</code> にデータを渡せる。ここでは「<code>films</code>」という名前で、映画情報の Hash を渡している。</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token operator">&#x3C;</span><span class="token operator">%</span><span class="token operator">=</span> react_component<span class="token punctuation">(</span><span class="token string">'Film'</span><span class="token punctuation">,</span>
  films<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'Test 1'</span><span class="token punctuation">,</span> release_date<span class="token punctuation">:</span> <span class="token string">'2010-01-01'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'Test 2'</span><span class="token punctuation">,</span> release_date<span class="token punctuation">:</span> <span class="token string">'2010-11-11'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">></span>
</code></pre>
<p><code>film.js.jsx</code> の方はこんな風にすると、<code>films</code> からデータを読み取って、リストを並べて表示させることができた。</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// 親コンポーネント</span>
<span class="token keyword">var</span> <span class="token maybe-class-name">Film</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"film"</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">MyCinemaReview</span> <span class="token maybe-class-name">React</span><span class="token operator">-</span><span class="token maybe-class-name">Rails</span> <span class="token maybe-class-name">Sample</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">FilmList</span> films<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">films</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 一覧を構成する子コンポーネント</span>
<span class="token keyword">var</span> <span class="token maybe-class-name">FilmList</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Hash の1要素を構成するまとまりを作る</span>
    <span class="token keyword">var</span> filmNodes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">films</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">film</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">[</span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">FilmListDt</span> title<span class="token operator">=</span><span class="token punctuation">{</span>film<span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">,</span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">FilmListDd</span> release_date<span class="token operator">=</span><span class="token punctuation">{</span>film<span class="token punctuation">.</span><span class="token property-access">release_date</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 一覧を返却する</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>dl<span class="token operator">></span>
        <span class="token punctuation">{</span>filmNodes<span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>dl<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// dt 要素</span>
<span class="token keyword">var</span> <span class="token maybe-class-name">FilmListDt</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>dt<span class="token operator">></span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>dt<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// dd 要素</span>
<span class="token keyword">var</span> <span class="token maybe-class-name">FilmListDd</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>dd<span class="token operator">></span>
        <span class="token operator">&#x3C;</span>ul<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>li<span class="token operator">></span>公開日：<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">release_date</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>ul<span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>dd<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>React.js を知らないと、「なんで <code>dt</code> 要素と <code>dd</code> 要素は <code>filmNodes</code> で一気に書けないの？」と思ったと思う。ぼくもそう思った。最初以下のように書いたらエラーになってしまった。</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// これは2つのタグ = コンポーネントを返しているのでエラーになる</span>
<span class="token keyword">var</span> filmNodes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">films</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">film</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&#x3C;</span>dt<span class="token operator">></span>
      <span class="token punctuation">{</span>film<span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>dt<span class="token operator">></span>
    <span class="token operator">&#x3C;</span>dd<span class="token operator">></span>
      <span class="token punctuation">{</span>film<span class="token punctuation">.</span><span class="token property-access">release_date</span><span class="token punctuation">}</span>
    <span class="token operator">&#x3C;</span><span class="token operator">/</span>dd<span class="token operator">></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>要するに、<em><code>return</code> する「ルートの要素 = コンポーネント」は1つのみ</em>という決まりがあるらしく、同階層に複数の要素があってはいけない、ということなのだ。</p>
<p>返却する要素が1つなら良いので、HTML としてイケてないのは承知の上で、もしも以下のように書いたとしたらエラーにはならない。</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// 一覧を構成する子コンポーネント</span>
<span class="token keyword">var</span> <span class="token maybe-class-name">FilmList</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> filmNodes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">films</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">film</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&#x3C;</span>dl<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>dt<span class="token operator">></span><span class="token punctuation">{</span>film<span class="token punctuation">.</span><span class="token property-access">title</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>dt<span class="token operator">></span>
          <span class="token operator">&#x3C;</span>dd<span class="token operator">></span><span class="token punctuation">{</span>film<span class="token punctuation">.</span><span class="token property-access">release_date</span><span class="token punctuation">}</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>dd<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token operator">/</span>dl<span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 一覧を返却する</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>div<span class="token operator">></span>
        <span class="token punctuation">{</span>filmNodes<span class="token punctuation">}</span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>これなら、<code>FilmList</code> としては <code>div</code> を返し、その中に連想配列の要素分だけ <code>filmNodes</code> が返した <code>dl</code> 要素が並ぶことになる。HTML 的には <code>dl</code> 要素は1つでいいので、<code>dt</code>要素と <code>dd</code> 要素をそれぞれ返す、こういう書き方になった。</p>
<ul>
  <li>参考：<a href="http://qiita.com/kompiro/items/867c55b32df57cff15bb">reduxを試してみた(3日目) - redux-boilerplateを使ってひな形を生成する - Qiita</a></li>
  <li>参考：<a href="http://stackoverflow.com/questions/31420987/how-to-model-a-list-in-react">javascript - How to model a list in React - Stack Overflow</a></li>
</ul>
<h2 id="json-でデータを返すコントローラを作る"><a class="header-link" href="#json-でデータを返すコントローラを作る"><span class="header-link-mark"></span></a>JSON でデータを返すコントローラを作る</h2>
<p>JSON を返すだけのコントローラを作る。JS や CSS は不要なので、<code>--no-assets</code> オプションを指定する。</p>
<pre class="language-bash"><code class="language-bash">$ rails g controller api/films --no-assets
      create  app/controllers/api/films_controller.rb
      invoke  erb
      create    app/views/api/films
      invoke  test_unit
      create    test/controllers/api/films_controller_test.rb
      invoke  helper
      create    app/helpers/api/films_helper.rb
      invoke    test_unit
</code></pre>
<p><code>app/assets/controllers/api/films_controller.rb</code> が出来ているので、以下のように実装する。さっき <code>index.html.erb</code> に書いていた Hash 部分をそのまま移植した状態。</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">Api</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">FilmsController</span> <span class="token operator">&#x3C;</span> <span class="token constant">ApplicationController</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">index</span></span>
    <span class="token variable">@films</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'Test 1'</span><span class="token punctuation">,</span> release_date<span class="token punctuation">:</span> <span class="token string">'2010-01-01'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> title<span class="token punctuation">:</span> <span class="token string">'Test 2'</span><span class="token punctuation">,</span> release_date<span class="token punctuation">:</span> <span class="token string">'2010-11-11'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre>
<p>次に <code>app/views/api/films/index.json.jsonbuilder</code> を作り、以下のように実装する。</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token comment"># JBuilder の中ではシャープでコメントアウトできる (Ruby としてパースするのだろう)</span>
<span class="token comment"># コントローラから受け取った @films を1行ずつ処理している</span>
json<span class="token punctuation">.</span>data<span class="token punctuation">(</span><span class="token variable">@films</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">|</span>film<span class="token operator">|</span> json<span class="token punctuation">.</span>extract<span class="token operator">!</span><span class="token punctuation">(</span>film<span class="token punctuation">,</span> <span class="token symbol">:title</span><span class="token punctuation">,</span> <span class="token symbol">:release_date</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
</code></pre>
<p>あとはルーティング。<code>config/routes.rb</code> に以下を追加する。</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token comment"># Films の JSON データを返す API のルーティング</span>
namespace <span class="token symbol">:api</span><span class="token punctuation">,</span> format<span class="token punctuation">:</span> <span class="token string">'json'</span> <span class="token keyword">do</span>
  resources <span class="token symbol">:films</span>
<span class="token keyword">end</span>
</code></pre>
<p>これで <code>rake routes</code> をしてルーティングを反映させる。</p>
<pre class="language-bash"><code class="language-bash">$ rake routes
       Prefix Verb   URI Pattern                   Controller<span class="token comment">#Action</span>
        films GET    /films<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span>              films<span class="token comment">#index</span>
              POST   /films<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span>              films<span class="token comment">#create</span>
     new_film GET    /films/new<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span>          films<span class="token comment">#new</span>
    edit_film GET    /films/:id/edit<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span>     films<span class="token comment">#edit</span>
         film GET    /films/:id<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span>          films<span class="token comment">#show</span>
              PATCH  /films/:id<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span>          films<span class="token comment">#update</span>
              PUT    /films/:id<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span>          films<span class="token comment">#update</span>
              DELETE /films/:id<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span>          films<span class="token comment">#destroy</span>
<span class="token comment"># ココから下が今回追加した api/films のルーティング</span>
    api_films GET    /api/films<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span>          api/films<span class="token comment">#index {:format=>/json/}</span>
              POST   /api/films<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span>          api/films<span class="token comment">#create {:format=>/json/}</span>
 new_api_film GET    /api/films/new<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span>      api/films<span class="token comment">#new {:format=>/json/}</span>
edit_api_film GET    /api/films/:id/edit<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span> api/films<span class="token comment">#edit {:format=>/json/}</span>
     api_film GET    /api/films/:id<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span>      api/films<span class="token comment">#show {:format=>/json/}</span>
              PATCH  /api/films/:id<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span>      api/films<span class="token comment">#update {:format=>/json/}</span>
              PUT    /api/films/:id<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span>      api/films<span class="token comment">#update {:format=>/json/}</span>
              DELETE /api/films/:id<span class="token punctuation">(</span>.:format<span class="token punctuation">)</span>      api/films<span class="token comment">#destroy {:format=>/json/}</span>
</code></pre>
<p>これで <code>http://localhost:3000/api/films.json</code> にアクセスすると JSON データが取れるはず。</p>
<h2 id="react-で-json-データを受け取って表示させる"><a class="header-link" href="#react-で-json-データを受け取って表示させる"><span class="header-link-mark"></span></a>React で JSON データを受け取って表示させる</h2>
<p>こうやって作った <code>films.json</code> を、React で扱えるようにしていく。</p>
<p>まず React を表示させていた <code>app/views/films/index.html.erb</code> で以下のように書き換える。</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token operator">&#x3C;</span><span class="token operator">%</span><span class="token operator">=</span> react_component<span class="token punctuation">(</span><span class="token string">'Film'</span><span class="token punctuation">,</span> url<span class="token punctuation">:</span> <span class="token string">'/api/films.json'</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">></span>
</code></pre>
<p>今のところ、React には URL を渡しているだけなので、この URL にアクセスし、受け取った JSON データを子コンポーネントに受け渡すよう、親コンポーネントを直す。</p>
<ul>
  <li>参考：<a href="http://qiita.com/joe-re/items/96f12dda4a62470d1d7c">react-railsを使ってReactのTutorialをやってみる - Qiita</a></li>
</ul>
<blockquote>
  <p>ここでstateという概念が出てくる。<br>既に出てきているpropsは、これまで必ず親コンポーネントから渡されている。<br>propsの値は親Componentで管理するので、決してReactのComponentの中で変更してはいけない。<br>これを守ることで、ReactのComponentは同じpropsを渡される限りは、必ず同じレンダリング結果になるので、immutableなComponentとして扱えることになる。これ重要！<br>じゃあ親Componentでは値の変更はどうするの、というとこれはstateという、Componentの状態を保持するための変数に適用する。</p>
</blockquote>
<p>ということで、<code>app/assets/javascripts/components/film.js.jsx</code> の親コンポーネントを以下のように直す。</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// 親コンポーネント</span>
<span class="token keyword">var</span> <span class="token maybe-class-name">Film</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// State の初期値設定</span>
  <span class="token function-variable function">getInitialState</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// films には空の配列を渡して初期化しておく。これが {this.state.films} でアクセスできる State になる</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
      films<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// コンポーネントが最初にレンダリングされた時の処理</span>
  <span class="token function-variable function">componentDidMount</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// State {this.state.films} となるデータを取得する</span>
    $<span class="token punctuation">.</span><span class="token method function property-access">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      url<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">url</span><span class="token punctuation">,</span>
      dataType<span class="token operator">:</span> <span class="token string">'json'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// State {this.state.films} をセットする</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          films<span class="token operator">:</span> result<span class="token punctuation">.</span><span class="token property-access">data</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token method function property-access">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">xhr<span class="token punctuation">,</span> status<span class="token punctuation">,</span> err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">url</span><span class="token punctuation">,</span> status<span class="token punctuation">,</span> err<span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token method function property-access">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&#x3C;</span>div className<span class="token operator">=</span><span class="token string">"film"</span><span class="token operator">></span>
        <span class="token operator">&#x3C;</span>h1<span class="token operator">></span><span class="token maybe-class-name">MyCinemaReview</span> <span class="token maybe-class-name">React</span><span class="token operator">-</span><span class="token maybe-class-name">Rails</span> <span class="token maybe-class-name">Sample</span><span class="token operator">&#x3C;</span><span class="token operator">/</span>h1<span class="token operator">></span>
        <span class="token operator">&#x3C;</span><span class="token maybe-class-name">FilmList</span> films<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">.</span><span class="token property-access">films</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&#x3C;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>getInitialState()</code> と <code>componentDidMount()</code> は React で決まっている function みたい。ココでそれぞれ初期値の設定と Ajax でのデータ取得とセットを行っている。</p>
<p><code>render()</code> 内は一箇所だけ、<code>&#x3C;FilmList /></code> に渡すデータを <code>{this.props.films}</code> から <code>{this.state.films}</code> に変更している。</p>
<p>子コンポーネントを修正していないのが特徴。親コンポーネントでやり方を変えるだけで良い、というワケだ。</p>
<h2 id="定期的にポーリングする"><a class="header-link" href="#定期的にポーリングする"><span class="header-link-mark"></span></a>定期的にポーリングする</h2>
<p>これだと初回アクセスでしかレンダリングされないので、定期的にポーリングするように書き換える。</p>
<p>まずは <code>app/views/films/index.html.erb</code> でポーリングの間隔を指定する。</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token operator">&#x3C;</span><span class="token operator">%</span><span class="token comment"># Ajax で JSON を取得できるよう URL を渡し、ポーリングする間隔を指定する %></span>
<span class="token operator">&#x3C;</span><span class="token operator">%</span><span class="token operator">=</span> react_component<span class="token punctuation">(</span><span class="token string">'Film'</span><span class="token punctuation">,</span> url<span class="token punctuation">:</span> <span class="token string">'/api/films.json'</span><span class="token punctuation">,</span> pollInterval<span class="token punctuation">:</span> <span class="token number">2000</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">></span>
</code></pre>
<p>次に <code>app/assets/javascripts/components/film.js.jsx</code> を以下のように書き換える。</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token comment">// 親コンポーネント</span>
<span class="token keyword">var</span> <span class="token maybe-class-name">Film</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// State {this.state.films} となるデータを取得する</span>
  <span class="token function-variable function">loadFilms</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token method function property-access">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      url<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">url</span><span class="token punctuation">,</span>
      dataType<span class="token operator">:</span> <span class="token string">'json'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// State {this.state.films} をセットする</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          films<span class="token operator">:</span> result<span class="token punctuation">.</span><span class="token property-access">data</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token method function property-access">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">xhr<span class="token punctuation">,</span> status<span class="token punctuation">,</span> err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">url</span><span class="token punctuation">,</span> status<span class="token punctuation">,</span> err<span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token method function property-access">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// State の初期値設定</span>
  <span class="token function-variable function">getInitialState</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 同じなので省略</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// コンポーネントが最初にレンダリングされた時の処理</span>
  <span class="token function-variable function">componentDidMount</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 初回読み込み</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">loadFilms</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 指定の間隔でポーリングする</span>
    <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">loadFilms</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">pollInterval</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">render</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 同じなので省略</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>componentDidMount()</code> 内にいた <code>$.ajax</code> 部分を、適当な function として外出しした。<code>componentDidMount()</code> で、初回の読み込みと、定期的なポーリングのために <code>setInteval()</code> を設定している。</p>
<h2 id="実際にデータを取得して表示させる"><a class="header-link" href="#実際にデータを取得して表示させる"><span class="header-link-mark"></span></a>実際にデータを取得して表示させる</h2>
<p>ようやく実際に DB からデータを取得するところに移る。</p>
<p><code>app/controllers/films_controller.rb</code> に実装していた内容を <code>app/controllers/api/films_controller.rb</code> に移植してやれば良いだろう。</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">Api</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">FilmsController</span> <span class="token operator">&#x3C;</span> <span class="token constant">ApplicationController</span>
  <span class="token comment"># IndexAction</span>
  <span class="token comment"># JSON でデータを返す</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">index</span></span>
    <span class="token comment"># Model の all() で全件取得する</span>
    <span class="token variable">@films</span> <span class="token operator">=</span> <span class="token constant">Film</span><span class="token punctuation">.</span>all
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre>
<p><code>app/controllers/api/films_controller.rb</code> は空にしてしまう。</p>
<pre class="language-ruby"><code class="language-ruby"><span class="token keyword">class</span> <span class="token class-name">FilmsController</span> <span class="token operator">&#x3C;</span> <span class="token constant">ApplicationController</span>
  <span class="token comment"># IndexAction</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">index</span></span>
    <span class="token comment"># Do Nothing</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre>
<p>これでトップページができた。</p>
<h2 id="所感"><a class="header-link" href="#所感"><span class="header-link-mark"></span></a>所感</h2>
<p>既存の Rails アプリのフロントエンドを、これから React.js に移植していく、といった場面であれば、この RubyGems を使うのは効果的かもしれない。</p>
<p>ゼロから Rails アプリを作ろうとする時は、アプリの規模・開発形態にもよるが、この Gem を使わず、フロントエンド周りは npm で導入し、Webpack での管理に統一してやった方が、フロントエンドとバックエンドが分離できて良いかもしれない。</p>
<h2 id="参考"><a class="header-link" href="#参考"><span class="header-link-mark"></span></a>参考</h2>
<p>日本語で React と Rails の組み合わせという記事になると、React 単体、Rails 単体をそれぞれよく知っている人が書いている記事が多い気がして、ぼくみたいな初心者が入門として参考にできる記事がなかなかなかった。それぞれの記事を何度も読んでやってみて、ようやくなんとかこの辺までこぎつけたという感じ。</p>
<ul>
  <li><a href="https://github.com/reactjs/react-rails">GitHub - reactjs/react-rails: Ruby gem for automatically transforming JSX and using React in Rails.</a></li>
  <li><a href="http://qiita.com/joe-re/items/96f12dda4a62470d1d7c">react-railsを使ってReactのTutorialをやってみる - Qiita</a> … この記事がとても参考になった。</li>
  <li><a href="http://ruby-rails.hatenadiary.com/entry/20151124/1448300267">RailsでReact.jsをサーバーレンダリングする - Rails Webook</a></li>
  <li><a href="https://www.pluralsight.com/guides/ruby-ruby-on-rails/building-a-crud-interface-with-react-and-ruby-on-rails">Building a CRUD interface with React and Ruby on Rails (Example) | hack.guides()</a></li>
  <li><a href="http://blog.spacemarket.com/code/react-js_react-rails_webpack/">React.jsをreact-railsとwebpackそれぞれで動作させてみる | スペースマーケットブログ</a></li>
  <li><a href="http://qiita.com/mizchi/items/c34c3ff88d73a7bd2c88">react-railsでサーバーサイドレンダリングしつつクライアントでsetStateできて最高になった - Qiita</a></li>
</ul>

      </main>
      <footer id="footer">
        <div id="footer-contents">
          <div id="date-time">
            <dl>
              <dt>Created</dt>
              <dd><time>2017-03-19</time></dd>
              <dt>Last-Modified</dt>
              <dd><time>2017-03-19</time></dd>
            </dl>
          </div>
          <nav id="footer-links">
            <ul>
              <li id="footer-link-about"><a href="/about/index.html" title="About">About</a></li>
              <li id="footer-link-search"><a href="/about/search.html" title="Search">Search</a></li>
              <li id="footer-link-feeds"><a href="/feeds.xml" title="Feeds">Feeds</a></li>
              <li id="footer-link-github"><a href="https://github.com/Neos21/" title="GitHub">GitHub</a></li>
            </ul>
          </nav>
          <nav id="to-top"><a href="#" title="To Top"><span>▲ To Top</span></a></nav>
        </div>
      </footer>
    </div>
  </body>
</html>
