<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="theme-color" content="#0990d0">
    <!-- Google Search Console -->
    <meta name="google-site-verification" content="AvoEr3mUJFF2H_mPWWgShfmjBVP3ywRpyx9hxeeq2d4">
    <title>if else 構文のインデントとコメントの書き方 - Neo's World</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/styles.css">
    <link rel="canonical" href="https://neos21.net/blog/2017/03/26-01.html">
    <link rel="search" type="application/opensearchdescription+xml" title="neos21.net" href="/opensearch.xml">
    <link rel="alternate" type="application/atom+xml" title="Feeds" href="/feeds.xml">
    <link rel="author" href="http://www.hatena.ne.jp/neos21/">
    <script src="/scripts.js"></script>
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YMHFLZP1M1"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-YMHFLZP1M1');gtag('config','UA-106501-1');</script>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6475907504235292" crossorigin="anonymous"></script>
  </head>
  <body>
    <div id="container">
      <header id="header">
        <div id="header-brand">
          <div id="header-brand-contents">
            <div id="site-title"><a href="/index.html">Neo's World</a></div>
            <nav id="header-links">
              <ul>
                <li id="header-link-theme"><a href="#" title="Toggle Theme"><span>Toggle Theme</span></a></li>
                <li id="header-link-about"><a href="/about/index.html" title="About"><span>About</span></a></li>
                <li id="header-link-search"><a href="/about/search.html" title="Search"><span>Search</span></a></li>
                <li id="header-link-feeds"><a href="/feeds.xml" title="Feeds"><span>Feeds</span></a></li>
                <li id="header-link-to-bottom"><a href="#footer" title="To Bottom"><span>▼ To Bottom</span></a></li>
              </ul>
            </nav>
          </div>
        </div>
        <nav id="global-nav">
          <ul>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/tech/index.html">Tech</a></li>
            <li><a href="/music/index.html">Music</a></li>
            <li><a href="/games/index.html">Games</a></li>
            <li><a href="/gallery/index.html">Gallery</a></li>
            <li><a href="/etc/index.html">Etc.</a></li>
          </ul>
        </nav>
        <nav id="path">
          <ul>
            <li><a href="/index.html">Neo's World</a></li>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/blog/2017/index.html">2017年</a></li>
            <li><a href="/blog/2017/03/index.html">03月</a></li>
          </ul>
        </nav>
      </header>
      <main id="main">
        <div id="header-date"><time>2017-03-26</time></div>
        <h1 id="page-title">if else 構文のインデントとコメントの書き方</h1>

<p>プログラミング言語にほとんど必ず登場する「<code>if</code>・<code>else</code> 構文」のコーディングスタイルに関して話してみる。自分が想定する言語は Java メインな感じ。</p>
<h2 id="1行-if-の時にブレースを省略するか"><a class="header-link" href="#1行-if-の時にブレースを省略するか"><span class="header-link-mark"></span></a>1行 <code>if</code> の時にブレースを省略するか</h2>
<ul>
  <li><a href="http://el.jibun.atmarkit.co.jp/hidemi/2009/07/post-29fb.html">カッコをつけたコードはカッコわるいのか論争 : プログラマで、生きている : エンジニアライフ</a></li>
</ul>
<blockquote>
  <p><code>if (buffer == null) {return;}</code></p>
  <p>と</p>
  <p><code>if (buffer == null) return;</code></p>
  <p>は同じ動作をするということはお分かりかと思います。</p>
  <p>正式な言い方があるのか分かりませんが、「省略が許可されている記述」というやつです。</p>
  <p>わたしは「省略が許可されてても省略しない派」（←どういう派閥？）なので、常にカッコでくるむのですが、わたしのコードを読んだ人が「これってこういう書き方していいんだよ」とご丁寧にもカッコをはずしてしまったことがありました。</p>
  <p>「それくらい知ってるんですけど」<br>「なら、なんでわざわざカッコつけてんの？」<br>「どっちでもいいんならカッコをつけた方が安全じゃないですか」</p>
</blockquote>
<p>自分は<strong>必ずカッコ付ける派</strong>。というか、<strong><code>if</code> 文の中身が1行でも必ず改行とブレースを書く派</strong>。</p>
<pre class="language-java"><code class="language-java"><span class="token comment">// 必ずこう書く。</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>buffer <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>中身が1行で終わる処理でも、いわゆる「ガード句」として <code>return</code> する場合でも、必ずこうする。</p>
<blockquote>
  <p>「省略形はバグを生む温床になるから使わない」と言ったんですが、相手は納得しませんでした。</p>
  <p>「でも、省略形があるのに使わないってバカっぽくない？」<br>「何時間も原因を探した結果がカッコが足りないだけって方がバカっぽいですよ」<br>「でも、カッコがない方がカッコイイだろ」<br>「なんでカッコがない方がカッコイイんですか？」<br>「見た感じすっきりしててカッコイイ」<br>「でも、カッコつけてカッコつけないでバグだす方がカッコワルイですよね！」</p>
</blockquote>
<p>確かに1行で処理が完結するのはスッキリしていてカッコイイ感じも分かるのだが、人間は全員バカなので、間違いが起きづらい方法を取るべきだと思っている。つまり、「ココは省略形で書いてる<strong>はず</strong>だから…」という思い込み、勘違いが原因でバグを出したり、それに気付かないでいたりするのは時間のムダで、ぼくからしたらその方がダサいのだ。</p>
<p>もう少しメリットを挙げるとしたら、省略形の1行で済ませていた部分を改修することになって処理を追加した場合の Diff が綺麗になる、ということだ。</p>
<pre class="language-java"><code class="language-java"><span class="token comment">// コレに「指定のレスポンスヘッダを設定する処理」を追加するとして、</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>buffer <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

<span class="token comment">// こういう書き方にする必要があるが、Diff が多くなる。</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>buffer <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 最初から以下のように書いておけば、Diff は1行で済む。</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>buffer <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ココに処理が増えるだけ</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>これは VB 系の言語でも同じ。</p>
<pre class="language-vb"><code class="language-vb"><span class="token comment">' こういうことしない</span>
<span class="token keyword">If</span> buffer <span class="token operator">=</span> Null <span class="token keyword">Then</span> <span class="token keyword">Exit</span> <span class="token keyword">Sub</span>

<span class="token comment">' 絶対こう書く</span>
<span class="token keyword">If</span> buffer <span class="token operator">=</span> Null <span class="token keyword">Then</span>
  <span class="token keyword">Exit</span> <span class="token keyword">Sub</span>
<span class="token keyword">End</span> <span class="token keyword">If</span>
</code></pre>
<p>1行省略形で書くより行がかさばるが、後で余計なバグ (= 自らの醜い過ち) を起こさないように、<em>ぼくは自分のコーディングスタイルにも例外を作らない</em>。<code>if</code> 文といったら必ずブレースを付けて改行を書くもの、としておくのだ。</p>
<h2 id="コメントの書き方について"><a class="header-link" href="#コメントの書き方について"><span class="header-link-mark"></span></a>コメントの書き方について</h2>
<p>こちらの記事を見て、自分も思ったことを書いてみる。</p>
<ul>
  <li><a href="http://architect-wat.hatenablog.jp/entry/20110517/1305650748">if elseのコメントの書き方 - アーキテクチャをスマートに。</a></li>
</ul>
<blockquote>
  <p>こんな風に書く人が結構いてびっくりしました。</p>
  <pre class="language-java"><code class="language-java"><span class="token comment">// ゼロの場合</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">funcA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// そうでない場合</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">funcB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</blockquote>
<p>この書き方について筆者は、</p>
<blockquote>
  <p>ブロックもインデントも無視、修正したりコピーしたりするときにミスを誘発するし、こんな書き方をすることなんて絶対に有り得ないです。</p>
</blockquote>
<p>と言っていて、自分は最初「そこまで言うことないだろ…」と思ったのだが、よくよくコードを見たらその意味が分かった。</p>
<p>つまり、上のコードで言うと、<code>// そうでない場合</code> というコメントが説明するコード部分は <code>else {}</code> 部分であり、そのコメントが <code>if</code> の終わりのブレース <code>}</code> の手前に居るのはおかしいのである。</p>
<p>これがもし、こういう書き方だったら、まだ少しはマシだと思う。</p>
<pre class="language-java"><code class="language-java"><span class="token comment">// ゼロの場合</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">funcA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// そうでない場合</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token function">funcB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>ぼくのコーディングスタイルではそもそも、<code>} else if() {</code> とか <code>} catch() {</code> みたいな、手前のブロックの終わりブレース <code>}</code> のすぐ後ろに次の構文を書かない。<code>for</code> 文の終わりとかの場合と比べると、なんとなく行間が詰まった感じがするから、プログラミングを始めた比較的初期の頃にこの書き方になった。</p>
<pre class="language-java"><code class="language-java"><span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">funcA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>    <span class="token comment">// ← ココで改行する</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token function">funcB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token function">doInsert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>    <span class="token comment">// ← ココで改行する</span>
<span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">SQLException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Handle exception</span>
<span class="token punctuation">}</span>
</code></pre>
<p>だから、<code>if else</code> でコメントを書くなら、<code>if</code> の終わりのブレース <code>}</code> がある行と、<code>else {</code> の行の間に <code>// そうでない場合</code> を書くことも、なくはないかな？と思っている。</p>
<p>ただ、自分が一番やるのは以下のスタイルだ。これなら <code>if</code> の場合と <code>else</code> の場合 (勿論間に <code>else if</code> が入った場合も) でコメントの位置が変わらないからだ。</p>
<pre class="language-java"><code class="language-java"><span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ゼロの場合</span>
  <span class="token function">funcA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// そうでない場合</span>
  <span class="token function">funcB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>ただ、この場合、「<code>if</code> 文の条件に関してコメントをしているのか」、「<code>if</code> 条件に合致した時に何の処理をするか」のどちらについてコメントしているのかが若干分かりづらくなる。少なくとも自分にとって<strong>コメントは「これから登場するコードが何のために何をしているのか」を説明するモノ</strong>、と思っているからだ。だから、コメントの直前の行の説明をするとなると、若干違和感があったりする。</p>
<p>ぼくは元々コメントを多く残す方なので、ちゃんと書くならこんな風にするかも。</p>
<pre class="language-java"><code class="language-java"><span class="token comment">// □□のデータを △△する。</span>
<span class="token comment">// value が 0 の場合、○○を××にしないと□□できないので、funcA() を実行する。</span>
<span class="token comment">// そうでなければ通常どおり、funcB() を実行する。</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ゼロの場合</span>
  <span class="token function">funcA</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// そうでない場合</span>
  <span class="token function">funcB</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>つまり、この <code>if</code>・<code>else</code> の塊が何をしようとしているのか、大まかな判断条件を先に書いておき、それから <code>if</code> 文を読んでもらおうとする感じだ。</p>
<blockquote>
  <p>どっちの書き方が優れているということではなく、要するにこういった細かい点に気を使いながらプログラミングすることって大事だな〜と思います。</p>
</blockquote>
<h2 id="なんでもガード句else-は不要"><a class="header-link" href="#なんでもガード句else-は不要"><span class="header-link-mark"></span></a>なんでもガード句？<code>else</code> は不要？</h2>
<ul>
  <li><a href="http://dqn.sakusakutto.jp/2012/08/if-else.html">else句を使わないのが良いコードなの？いや、そんなはずは・・・ · DQNEO起業日記</a></li>
</ul>
<p>「ガード句」という考え方がある。あるメソッドにおいて、異常系を先に処理して <code>return</code> しておくことで、<code>if</code> 文のネストを少なくするというやり方だ。</p>
<p>コードの中身はテキトーだが、<code>if</code>・<code>else</code> 構文の使い方を見てみてほしい。実際はもっと色んな条件分岐が重なっているものとしよう。</p>
<pre class="language-java"><code class="language-java"><span class="token comment">// こんな書き方をするとネストが深くなる</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">createMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> inputStr<span class="token punctuation">,</span> <span class="token class-name">String</span> messageType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">String</span> returnStr <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>inputStr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>messageType<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"DEBUG"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">StringBuffer</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token string">"&#x3C;DEBUG>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>inputStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
      sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 何かデバッグモード用の出力情報があるテイ</span>
      returnStr <span class="token operator">=</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token class-name">StringBuffer</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token string">"&#x3C;INFO>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>inputStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
      returnStr <span class="token operator">=</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    returnStr <span class="token operator">=</span> <span class="token string">"&#x3C;NULL>"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> returnStr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>上のコードは、<code>return</code> 句をコードの最後にしか書かない作りにしてしまっており、なぜか変数 <code>returnStr</code> を使う必要がある。ネストも深くなりがちだ。どれが正常系 (一番よくあるパターン) なのか、特定の場合はどういうルートを通るのかが分かりづらい。</p>
<p>以下のように、異常系だとか、サクッと処理が終わるモノを先に <code>return</code> するようにすれば、<code>else</code> にあたるネストがなくなる。</p>
<pre class="language-java"><code class="language-java"><span class="token comment">// こんな書き方をするとネストが深くなる</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">createMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> inputStr<span class="token punctuation">,</span> <span class="token class-name">String</span> messageType<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 引数が Null ならサッサと終える</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>inputStr <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">"&#x3C;NULL>"</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// デバッグモードなら別途処理</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>messageType<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"DEBUG"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">StringBuffer</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token string">"&#x3C;DEBUG>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>inputStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 何かデバッグモード用の出力情報があるテイ</span>
    <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// コレが正常系</span>
  <span class="token class-name">StringBuffer</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token string">"&#x3C;INFO>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>inputStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>こうすると <code>else</code> にあたるネストがなくせたが、何でもかんでもこういう作りにするのがいいのかというと、実は <code>else</code> をあえて書いた方が意味が伝わりやすいコードになることがる。</p>
<blockquote>
  <p>elseを書いた方がよいケースもあるのではないか</p>
  <p>もし、<strong>両方が正常処理ならば、ifとelseを持った条件記述を使うべきです。</strong> if-then-else構造が使われるときは、if部にもelse部にも同じウェイトが置かれています。 これが、プログラムの読み手に対して<strong>両方とも等しく起こり得ること、等しく重要である</strong>ことを伝えます。</p>
</blockquote>
<p><code>if</code> の場合が特殊で、<code>else</code> の場合が通常、といった、異なるパターンの場合分けであれば、ガード句を利用して <code>else</code> 句を書かないのが良いが、<code>if</code> の場合も <code>else</code> の場合も同じだけのウェイト (重要性) を持つ場合は、<code>else</code> をあえて書いてインデントを揃えて置いた方が伝わりやすい、ということだ。</p>
<blockquote>
  <p>無敵モードは特殊な状態だから、これはよいと思います。<br>しかし、マリオが大きいか小さいかの条件分岐についてはどうでしょうか？<br>マリオの大小はどちらが特別というものではなく、どちらも通常の姿だと思うので、else句を書いた方がわかりやすいと思います。</p>
  <pre class="language-java"><code class="language-java"><span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>マリオ<span class="token punctuation">.</span>is無敵モード<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        敵<span class="token punctuation">.</span>死ぬ<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">if</span><span class="token punctuation">(</span>マリオ<span class="token punctuation">.</span>isチビ<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        マリオ<span class="token punctuation">.</span>死ぬ<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token punctuation">{</span>
        マリオ<span class="token punctuation">.</span>チビになる<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</blockquote>
<hr>
<p>たかが <code>if</code> 文、ではない。こういう些細なところから無頓着な人間が書くコードは総じて汚くて可読性が低く、不必要な処理も多く、ダッサいバグも多い。人のためにも、マシンのためにも配慮できておらず、正しい行いができていない。「そんなこと」と思った時点で、その人の質・レベルはそこまで。その程度の人間。ぼくはこうした話を少しもする気がない人間をプログラマともエンジニアとも思わないので、その時点で切り捨てている。</p>
<p>「それならこうした方がいいと思うよ」という持論があり、その根拠にそれなりの説得性が欲しいところである。「チームでこうだから」というのは理由にならない。チームの規約にするのであればチームのためになる規約にするべきだ。間違いを犯しやすいとか、効果の薄いルールなのであれば、<strong>ルールの方が間違っているのだから、ルールを変えるべきである</strong>。ルールだからとただただ従う人間はどんな理由があっても間違っている。</p>
<p>こうした「些細なこと」からも「何にとってどういう効果・メリットがあるのか」という視点を忘れずに、自分が何を選択すべきかを明確にしておきたい。</p>
<h2 id="その他参考"><a class="header-link" href="#その他参考"><span class="header-link-mark"></span></a>その他参考</h2>
<ul>
  <li><a href="http://marycore.jp/coding/where-are-else-if-statement/">「else if」文は存在しない【美しきプログラミング言語の世界】 | MaryCore</a></li>
</ul>

      </main>
      <footer id="footer">
        <div id="footer-contents">
          <div id="date-time">
            <dl>
              <dt>Created</dt>
              <dd><time>2017-03-26</time></dd>
              <dt>Last-Modified</dt>
              <dd><time>2017-03-26</time></dd>
            </dl>
          </div>
          <nav id="footer-links">
            <ul>
              <li id="footer-link-about"><a href="/about/index.html" title="About">About</a></li>
              <li id="footer-link-search"><a href="/about/search.html" title="Search">Search</a></li>
              <li id="footer-link-feeds"><a href="/feeds.xml" title="Feeds">Feeds</a></li>
              <li id="footer-link-github"><a href="https://github.com/Neos21/" title="GitHub">GitHub</a></li>
            </ul>
          </nav>
          <nav id="to-top"><a href="#" title="To Top"><span>▲ To Top</span></a></nav>
        </div>
      </footer>
    </div>
  </body>
</html>
