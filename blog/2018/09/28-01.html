<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="theme-color" content="#0990d0">
    <!-- Google Search Console -->
    <meta name="google-site-verification" content="AvoEr3mUJFF2H_mPWWgShfmjBVP3ywRpyx9hxeeq2d4">
    <title>Apache Cordova もしくはハイブリッドアプリの限界 - Neo's World</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/styles.css">
    <link rel="canonical" href="https://neos21.net/blog/2018/09/28-01.html">
    <link rel="search" type="application/opensearchdescription+xml" title="neos21.net" href="/opensearch.xml">
    <link rel="alternate" type="application/atom+xml" href="/feeds.xml">
    <link rel="author" href="http://www.hatena.ne.jp/neos21/">
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YMHFLZP1M1"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-YMHFLZP1M1');gtag('config','UA-106501-1');</script>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6475907504235292" crossorigin="anonymous"></script>
  </head>
  <body>
    <div id="container">
      <header id="header">
        <div id="header-brand">
          <div id="header-brand-contents">
            <div id="site-title"><a href="/index.html">Neo's World</a></div>
            <nav id="header-links">
              <ul>
                <li id="header-link-about"><a href="/about/index.html" title="About"><span>About</span></a></li>
                <li id="header-link-search"><a href="/about/search.html" title="Search"><span>Search</span></a></li>
                <li id="header-link-feeds"><a href="/feeds.xml" title="Feeds"><span>Feeds</span></a></li>
                <li id="header-link-to-bottom"><a href="#footer" title="To Bottom"><span>▼ To Bottom</span></a></li>
              </ul>
            </nav>
          </div>
        </div>
        <nav id="global-nav">
          <ul>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/tech/index.html">Tech</a></li>
            <li><a href="/music/index.html">Music</a></li>
            <li><a href="/games/index.html">Games</a></li>
            <li><a href="/gallery/index.html">Gallery</a></li>
            <li><a href="/etc/index.html">Etc.</a></li>
          </ul>
        </nav>
        <nav id="path">
          <ul>
            <li><a href="/index.html">Neo's World</a></li>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/blog/2018/index.html">2018年</a></li>
            <li><a href="/blog/2018/09/index.html">09月</a></li>
          </ul>
        </nav>
      </header>
      <main id="main">
        <div id="header-date"><time>2018-09-28</time></div>
        <h1 id="page-title">Apache Cordova もしくはハイブリッドアプリの限界</h1>

<p>Apache Cordova というフレームワークがある。別名 PhoneGap と呼ばれるこのフレームワークを使えば、HTML・CSS・JavaScript で構築したアプリを、iOS・Android 向けのネイティブアプリのようにビルドして配信できる。クロスプラットフォームに対応した、いわゆる「ハイブリッドアプリ」を構築するためのフレームワークだ。似たようなフレームワークに Electron や React Native などが存在するが、その構造はそれぞれで異なる。</p><div class="ad-amazon">
  <div class="ad-amazon-image">
    <a href="https://www.amazon.co.jp/dp/B00U0ZP62C?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">
      <img src="https://m.media-amazon.com/images/I/51-5Kmpi1LL._SL160_.jpg" width="128" height="160">
    </a>
  </div>
  <div class="ad-amazon-info">
    <div class="ad-amazon-title">
      <a href="https://www.amazon.co.jp/dp/B00U0ZP62C?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">クラウドでできるHTML5ハイブリッドアプリ開発 Cordova/Onsen UIで作るiOS/Android両対応アプリ</a>
    </div>
  </div>
</div>
<p>ここしばらく、この Cordova というフレームワークを使う案件にいたので色々いじっていたのだが、とうとうその限界というか、現状どうしても拭えない難点を認めざるを得ないな、と思い、今日の記事を書くことにした。</p>
<h2 id="cordova-は-os-の差異を埋める緩衝層"><a class="header-link" href="#cordova-は-os-の差異を埋める緩衝層"><span class="header-link-mark"></span></a>Cordova は OS の差異を埋める緩衝層</h2>
<p>Cordova の仕組みは、HTML・CSS・JS でコーディングした Web アプリケーションを、それぞれの OS で用意されているネイティブコンポーネントを利用して表示するネイティブアプリとしてビルドすることで成り立っている。平たく言えば、Cordova が提供するのは「専用のブラウザ」といえる。iOS の場合は UIWebView ないしは WKWebView を使って、コーディングした Web ページを開いて見せているのだ。同様に Android や、WindowsPhone など他の OS に対しても、それぞれの OS 向けにページを表示して見せている、という仕組みだ。</p>
<p>各 OS のネイティブコンポーネントを使ってコーディングするとなると、Android は Java や Kotlin、iOS は Objective-C や Swift を使うことになり、クロスプラットフォーム対応をするとなると、別々の言語で2倍の実装が必要になる。しかし Cordova なら、中身は Web ページ、ブラウザベースで動作する Web アプリケーションとして実装し、アプリとしてはただその HTML ファイルを表示しているだけなので、クロスプラットフォーム対応が容易になる。</p>
<p>これこそが Cordova の特徴であり、強みだ。「Web アプリケーションを作っていた人なら、そのスキルを生かして iOS アプリも Android アプリも作れますよー」というワケだ。</p>
<h2 id="緩衝層によって損なわれるスピード感"><a class="header-link" href="#緩衝層によって損なわれるスピード感"><span class="header-link-mark"></span></a>緩衝層によって損なわれるスピード感</h2>
<p>しかし、そうはいっても、iOS も Android も、それぞれ独自にバージョンアップを重ねている。Cordova および Cordova プラグインの内部的には、結局は各 OS 向けに同等の機能を提供するネイティブコードが隠れているのであり、それを自前で実装しているか、Cordova の開発コミュニティに委ねているか、の違いでしかない。</p>
<p>Cordova の開発コミュニティは大きく、それなりにさかんにメンテナンスがなされてはいるものの、最近リリースされた iOS12 には対応しきれていなかったり、問題は多い。</p>
<p>開発言語は Web の標準技術に統一できるし、クロスプラットフォーム対応も容易にはなるが、OS アップデート時のマイグレーションのスピードは、どうしてもネイティブ言語で実装した時に比べて遅れてしまう。Cordova の利用者にとっては、OS がリリースされてから、Cordova が頑張って追随してくれるアップデートを待たないといけないからだ。ネイティブであれば、OS のリリース内容を見て、すぐさまプロダクトを改修して、バージョンアップに追随できるワケで、そのスピード感の違いは明らかだろう。</p>
<p>オープンソースコミュニティの集合知を軽視するワケではないが、OS のバージョンアップによってガラッと仕様が変わってしまったりした時に、自分たちが作ったアプリを速く直せるのは、やはりネイティブ言語で実装した場合だと思う。iOS のバージョンアップは毎年あるし、API の破壊的な仕様変更も多いので、すぐさまマイグレーション対応しなくてはならない。ただ Cordova のアップデートを待つだけでは遅いのだ。</p>
<h2 id="クロスプラットフォーム対応要らなくなりました"><a class="header-link" href="#クロスプラットフォーム対応要らなくなりました"><span class="header-link-mark"></span></a>「クロスプラットフォーム対応、要らなくなりました」</h2>
<p>これまで自分が担当していた業務で Cordova を利用していたのは、業務で使用するスマホ端末が iOS・Android と混在していたためだった。しかしこのたび、全社的なスマホ端末の仕入れ方が変わり、安価に iPad が手に入れられるようになったことで、Android 端末向けのアプリ提供が不要になった。</p>
<p>こうなると、クロスプラットフォーム対応をウリにしていた Cordova の強みが一つ欠けることになる。「もう iOS アプリだけ作れればいいよ」と。さらに iOS のアップデートに対する Corodva の追随速度がネックになり、「だったら自分たちで Swift 書いた方が速くない？」となってきたのだ。</p>
<p>この流れは当然というか、反論の余地がない。Airbnb が React Native を止めたのも、クロスプラットフォーム対応のためのコストが思ったよりもかかりすぎることが原因だったし、やはり完全なネイティブアプリと比べてパフォーマンス面も劣ってしまう。</p>
<p><strong>結局はそのプラットフォームに合わせたネイティブ言語でスクラッチ開発する方が、速くて自由度も高いよね。</strong></p>
<p>という、身も蓋もないが揺るぎない事実によって、Cordova は敗北してしまったのだ。</p>
<h2 id="それでも-cordova-が向いていそうなところ"><a class="header-link" href="#それでも-cordova-が向いていそうなところ"><span class="header-link-mark"></span></a>それでも Cordova が向いていそうなところ</h2>
<p>OS は毎年のように大きく変更があり、それに追随しないとアプリが動かなくなる。それに会社の経営しても、迅速にアプリを開発し、素早くリリースを繰り返すことで、ユーザエクスペリエンスを高めて企業価値を上げていきたい思いがある。</p>
<p>現実的に必要に迫られているところと、企業の目標を達成するには、やっぱりネイティブ言語で開発するのが手っ取り早いことだろう。</p>
<p>それでも Cordova を使うことでメリットがある場所としたら、なんだろう、ということを考えていた。PWA もかなり実用に耐えうるところまで来たけど、あえて今ココで Cordova を使ったハイブリッドアプリの生きる道ってなんだろう？と。</p>
<p><em>僕は今のところ、コレといって Cordova を使うメリットがありそうな機会が思いつかなかった。</em></p>
<ul>
  <li>スマホ本体の機能 (カメラや Bluetooth) を使ったアプリを作りやすい？
    <ul>
      <li>PWA でもそれなりに出来る</li>
      <li>小さい機能ごとにアプリを作り分けるような開発スタイルであれば、ネイティブで実装した方が早いかもしれない</li>
    </ul>
  </li>
  <li>既存の業務 Web アプリをスマホにも対応させやすい？
    <ul>
      <li>いや最初からブラウザで開けば良くね…？アプリ化しなくても良いのでは…</li>
    </ul>
  </li>
  <li>スピード感が要らない業務アプリで、色々なプラットフォームに対応しないと行けない時は楽になる？
    <ul>
      <li>クロスプラットフォーム対応が求められるものの、継続的に素早い開発を求められない場合は、オープンソースコミュニティにメンテナンスを任せられるメリットはあるものの、コレがいつまでも円滑に続くかというと誰も保証してくれない</li>
    </ul>
  </li>
</ul>
<p>なんというか、どうしても世の中のスピード感に対して置いてきぼりになる感じがある。</p>
<ul>
  <li>スピード感重視ならネイティブ言語で実装しよう！</li>
  <li>Web の標準技術でなんとかしたいなら PWA で十分じゃね？</li>
</ul>
<p>というところに、ハイブリッドアプリという選択肢がこれから掲げられる強みってなんだろう。</p><div class="ad-amazon">
  <div class="ad-amazon-image">
    <a href="https://www.amazon.co.jp/dp/B00HEB6UFM?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">
      <img src="https://m.media-amazon.com/images/I/51qc81IwN7L._SL160_.jpg" width="108" height="160">
    </a>
  </div>
  <div class="ad-amazon-info">
    <div class="ad-amazon-title">
      <a href="https://www.amazon.co.jp/dp/B00HEB6UFM?tag=neos21-22&amp;linkCode=osi&amp;th=1&amp;psc=1">[iOS/Android対応] HTML5 ハイブリッドアプリ開発[実践]入門 Software Design plus</a>
    </div>
  </div>
</div>
<ul>
  <li>参考：<a href="https://press.monaca.io/bryan/2621">CordovaとReact Nativeの違いとは？２大クロスプラットフォーム開発ツールを徹底比較！ | モナカプレス</a></li>
  <li>参考：<a href="https://html5experts.jp/shumpei-shiraishi/24253/">Electron、React Native、Cordova…Web技術でネイティブアプリ開発する方法を、アシアル田中さんに聞いた | HTML5Experts.jp</a></li>
  <li>参考：<a href="https://qiita.com/amay077/items/dff88e7ce6868615a9bb">Xamarin と React Native と Flutter の違いを正しく理解しよう</a></li>
  <li>参考：<a href="https://medium.com/@Roy_S_Kim/airbnb%E3%81%8Creact-native%E3%82%92%E3%82%84%E3%82%81%E3%81%9F%E3%82%8F%E3%81%91-802589f4ff44">AirbnbがReact Nativeを諦めてネイティブアプリに方向転換したわけ – Roy S. Kim – Medium</a></li>
  <li>参考：<a href="https://github.com/react-native-jp/react-native-at-airbnb-jp-translation">GitHub - react-native-jp/react-native-at-airbnb-jp-translation</a></li>
</ul>

      </main>
      <footer id="footer">
        <div id="footer-contents">
          <div id="date-time">
            <dl>
              <dt>Created</dt>
              <dd><time>2018-09-28</time></dd>
              <dt>Last-Modified</dt>
              <dd><time>2018-09-28</time></dd>
            </dl>
          </div>
          <nav id="footer-links">
            <ul>
              <li id="footer-link-about"><a href="/about/index.html" title="About">About</a></li>
              <li id="footer-link-search"><a href="/about/search.html" title="Search">Search</a></li>
              <li id="footer-link-feeds"><a href="/feeds.xml" title="Feeds">Feeds</a></li>
              <li id="footer-link-github"><a href="https://github.com/Neos21/" title="GitHub">GitHub</a></li>
            </ul>
          </nav>
          <nav id="to-top"><a href="#" title="To Top"><span>▲ To Top</span></a></nav>
        </div>
      </footer>
    </div>
  </body>
</html>
