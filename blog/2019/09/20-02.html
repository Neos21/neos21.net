<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Google Search Console -->
    <meta name="google-site-verification" content="AvoEr3mUJFF2H_mPWWgShfmjBVP3ywRpyx9hxeeq2d4">
    <title>MacOS でも Windows でもまぁまぁ使える tmux + vim 環境を作ってみた - Neo's World</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="/styles.css">
    <link rel="canonical" href="https://neos21.net/blog/2019/09/20-02.html">
    <link rel="search" type="application/opensearchdescription+xml" title="neos21.net" href="/opensearch.xml">
    <link rel="alternate" type="application/atom+xml" href="/feeds.xml">
    <link rel="author" href="http://www.hatena.ne.jp/neos21/">
    <!-- Global Site Tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YMHFLZP1M1"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-YMHFLZP1M1');gtag('config','UA-106501-1');</script>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6475907504235292" crossorigin="anonymous"></script>
  </head>
  <body>
    <div id="container">
      <header id="header">
        <div id="site-title"><a href="/index.html">Neo's World</a></div>
        <nav id="header-links">
          <ul>
            <li id="header-link-about"><a href="/about/index.html" title="About"><span>About</span></a></li>
            <li id="header-link-search"><a href="/about/search.html" title="Search"><span>Search</span></a></li>
            <li id="header-link-feeds"><a href="/feeds.xml" title="Feeds"><span>Feeds</span></a></li>
            <li id="header-link-to-bottom"><a href="#footer" title="To Bottom"><span>▼ To Bottom</span></a></li>
          </ul>
        </nav>
        <nav id="global-nav">
          <ul>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/tech/index.html">Tech</a></li>
            <li><a href="/music/index.html">Music</a></li>
            <li><a href="/games/index.html">Games</a></li>
            <li><a href="/gallery/index.html">Gallery</a></li>
            <li><a href="/etc/index.html">Etc.</a></li>
          </ul>
        </nav>
        <nav id="path">
          <ul>
            <li><a href="/index.html">Neo's World</a></li>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/blog/2019/index.html">2019年</a></li>
            <li><a href="/blog/2019/09/index.html">09月</a></li>
          </ul>
        </nav>
      </header>
      <main id="main">
        <div id="header-date"><time>2019-09-20</time></div>
        <h1 id="page-title">MacOS でも Windows でもまぁまぁ使える tmux + vim 環境を作ってみた</h1>

<p>先日、<a href="https://inkdrop.app/">Inkdrop</a> というアプリを開発している <a href="https://twitter.com/craftzdog/">TAKUYA</a> さんの動画を見て衝撃を受けた。</p>
<ul>
  <li><a href="https://blog.craftz.dog/my-dev-workflow-using-tmux-vim-48f73cc4f39e">tmuxとvimによる開発作業フロー (動画)</a></li>
</ul>
<p>tmux と vim を組合せて開発をしているのだが、キーボード操作が抜群に速い。マウス操作がほとんど出てこないからこそ実現できる開発速度で、VSCode 使いの自分も tmux + vim の世界に魅了されてしまった。</p>
<p>ただ、自分の信条として、<strong>「オレオレ設定を極めすぎないこと」</strong>というモノも掲げている。一般的な客先常駐の SE は、好みのマシンやハードウェアを中々選べなかったりするし、数年で異動すると以前の環境をそのまま持ち込むことができなかったりするからだ。</p>
<ul>
  <li><a href="/blog/2018/03/27-01.html">オレオレ環境・オレオレ設定を極めすぎない</a></li>
</ul>
<p>VSCode も使い慣れているし、VSCode を捨てる気はない。ただ、「ちょっとしたカスタマイズ (※)」の範囲で、tmux + vim の便利な環境を作れたらいいなと思い、tmux + vim 道に入門することにした。</p>
<ul>
  <li>※「ちょっとしたカスタマイズ」の自分定義 : ネットに繋がらない環境で、暗記している情報だけで復元できる設定の範囲。複雑なスクリプトを書かないといけないとか、いくつかのソフトを入れないといけない、みたいなモノは極力省きたい。</li>
</ul>
<p>以下、MacOS を中心に、Windows でも同様の環境を実現しようとしているので、OS ごとに分けて説明する。</p>
<h2 id="目次"><a class="header-link" href="#目次"><span class="header-link-mark"></span></a>目次</h2>
<ul>
  <li><a href="#%E5%85%88%E3%81%AB%E3%81%A9%E3%82%93%E3%81%AA%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB%E3%81%8C%E5%87%BA%E6%9D%A5%E4%B8%8A%E3%81%8C%E3%82%8B%E3%81%8B%E7%B4%B9%E4%BB%8B">先にどんなターミナルが出来上がるか紹介</a></li>
  <li><a href="#%E3%83%84%E3%83%BC%E3%83%AB%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB--macos-%E7%B7%A8">ツールのインストール : MacOS 編</a>
    <ul>
      <li><a href="#vim-%E3%81%AE%E7%94%A8%E6%84%8F">vim の用意</a></li>
      <li><a href="#tmux-%E3%81%AE%E7%94%A8%E6%84%8F">tmux の用意</a></li>
    </ul>
  </li>
  <li><a href="#%E3%83%84%E3%83%BC%E3%83%AB%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB--windows-%E7%B7%A8">ツールのインストール : Windows 編</a>
    <ul>
      <li><a href="#vim-%E3%81%AE%E7%94%A8%E6%84%8F-1">vim の用意</a></li>
      <li><a href="#tmux-%E3%81%AE%E7%94%A8%E6%84%8F-1">tmux の用意</a></li>
    </ul>
  </li>
  <li><a href="#%E8%A8%AD%E5%AE%9A%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E5%B0%8E%E5%85%A5%E3%81%99%E3%82%8B">設定ファイルを導入する</a>
    <ul>
      <li><a href="#vimrc-%E3%81%A8%E3%82%AB%E3%83%A9%E3%83%BC%E3%82%B9%E3%82%AD%E3%83%BC%E3%83%A0"><code>~/.vimrc</code> (とカラースキーム)</a></li>
      <li><a href="#tmuxconf"><code>~/.tmux.conf</code></a></li>
    </ul>
  </li>
  <li><a href="#%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB%E3%81%AE%E3%82%AB%E3%83%A9%E3%83%BC%E3%83%BB%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E8%A8%AD%E5%AE%9A%E3%82%92%E6%8F%83%E3%81%88%E3%82%8B">ターミナルのカラー・フォント設定を揃える</a>
    <ul>
      <li><a href="#macos-%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB">MacOS ターミナル</a></li>
      <li><a href="#windows-git-sdk">Windows Git SDK</a></li>
    </ul>
  </li>
  <li><a href="#%E3%82%B3%E3%83%AC%E3%81%A7%E5%AE%8C%E4%BA%86">コレで完了</a></li>
  <li><a href="#%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA%E3%81%97%E3%81%9F%E5%86%85%E5%AE%B9%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B">カスタマイズした内容を確認する</a>
    <ul>
      <li><a href="#vim">Vim</a></li>
      <li><a href="#tmux">tmux</a></li>
    </ul>
  </li>
  <li><a href="#%E4%BB%A5%E4%B8%8A">以上</a></li>
</ul>
<h2 id="先にどんなターミナルが出来上がるか紹介"><a class="header-link" href="#先にどんなターミナルが出来上がるか紹介"><span class="header-link-mark"></span></a>先にどんなターミナルが出来上がるか紹介</h2>
<p>セットアップを始める前に、このセットアップを行うとどんなターミナルが出来上がるのか紹介しよう。</p>
<p>まずは MacOS。</p>
<p>
  <img src="20-02-02.png" alt="MacOS ターミナルでの Tmux">
</p>
<p>次は Windows。</p>
<p>
  <img src="20-02-03.png" alt="Windows Git SDK ターミナルでの Tmux">
</p>
<p>それぞれセットアップ手順を紹介していこう。</p>
<h2 id="ツールのインストール--macos-編"><a class="header-link" href="#ツールのインストール--macos-編"><span class="header-link-mark"></span></a>ツールのインストール : MacOS 編</h2>
<p>まずは MacOS で、tmux + vim の環境を整えてみる。使用するターミナルは OS 標準の「ターミナル.app」。</p>
<h3 id="vim-の用意"><a class="header-link" href="#vim-の用意"><span class="header-link-mark"></span></a>vim の用意</h3>
<p>MacOS は標準で <code>vi</code> と <code>vim</code> が使えるが、いずれも <code>--version</code> を見ると、<em><code>-clipboard</code></em> という表記が見える。コレは、Vim と MacOS とでクリップボードを共有できない、ということだ。</p>
<p>そこで、クリップボード共有ができる Vim を Homebrew でインストールする。</p>
<pre class="language-bash"><code class="language-bash">$ brew <span class="token function">install</span> <span class="token function">vim</span>
</code></pre>
<p>Homebrew でインストールした Vim が優先的に使われるよう PATH を直して、ついでに <code>alias vi='vim'</code> なんかも入れておこう。Homebrew でインストールした <code>vi</code> も、クリップボード共有機能が使えないからだ。</p>
<p><code>$ vim --version</code> を見て、<strong><code>+clipboard</code></strong> という表記が見えていれば、Vim の準備は完了。あとは、後述する <code>~/.vimrc</code> を導入するだけ。</p>
<h3 id="tmux-の用意"><a class="header-link" href="#tmux-の用意"><span class="header-link-mark"></span></a>tmux の用意</h3>
<p>tmux も Homebrew で入れられる。MacOS で tmux とクリップボード共有をするためには、<strong><code>reattach-to-user-namespace</code></strong> というツールを使う必要があるので、一緒にインストールしておく。</p>
<pre class="language-bash"><code class="language-bash">$ brew <span class="token function">install</span> tmux reattach-to-user-namespace
</code></pre>
<p><code>$ tmux -V</code> でバージョンが確認できたら OK。自分がインストールしたのは <code>2.9a</code> というバージョンだった。あとは後述する <code>~/.tmux.conf</code> を導入するだけ。</p>
<h2 id="ツールのインストール--windows-編"><a class="header-link" href="#ツールのインストール--windows-編"><span class="header-link-mark"></span></a>ツールのインストール : Windows 編</h2>
<p>Windows の場合は、Pacman というパッケージ管理ツールが使える<em>「GitSDK」</em>と、それに付属する「GitBash (<code>git-bash.exe</code>)」を使用する。GitSDK については以下の記事を参照。</p>
<ul>
  <li><a href="/blog/2018/10/11-02.html">Git For Windows よりコマンドが豊富な Git For Windows SDK を試してみる</a></li>
</ul>
<h3 id="vim-の用意-1"><a class="header-link" href="#vim-の用意-1"><span class="header-link-mark"></span></a>vim の用意</h3>
<p>GitSDK 付属の Vim で OK。あとは後述する <code>~/.vimrc</code> を入れるだけ。</p>
<h3 id="tmux-の用意-1"><a class="header-link" href="#tmux-の用意-1"><span class="header-link-mark"></span></a>tmux の用意</h3>
<p>Windows における tmux は、GitSDK を開き、<code>pacman</code> コマンドでインストールする。MacOS の場合は <code>reattach-to-user-namespace</code> を一緒にインストールしたが、Windows におけるクリップボード共有は標準の <code>clip.exe</code> を使うので特にインストールは不要。</p>
<pre class="language-bash"><code class="language-bash">$ pacman -S tmux
</code></pre>
<p>コチラも <code>$ tmux -V</code> でバージョンが確認できれば OK。あとは後述する <code>~/.tmux.conf</code> を入れるだけ。</p>
<h2 id="設定ファイルを導入する"><a class="header-link" href="#設定ファイルを導入する"><span class="header-link-mark"></span></a>設定ファイルを導入する</h2>
<p>tmux と vim のインストールが終わったので、設定ファイルを用意する。拙作の Dotfiles に現物があるので、そちらも参考にされたし。</p>
<ul>
  <li><a href="https://github.com/Neos21/dotfiles">Neos21/dotfiles</a></li>
</ul>
<h3 id="vimrc-とカラースキーム"><a class="header-link" href="#vimrc-とカラースキーム"><span class="header-link-mark"></span></a><code>~/.vimrc</code> (とカラースキーム)</h3>
<p>ホームディレクトリ直下に、<strong><code>.vimrc</code></strong> という名前のファイルを作り、以下の内容をコピペする。</p>
<pre class="language-bash"><code class="language-bash"><span class="token string">" ================================================================================
"</span> .vimrc
<span class="token string">" ================================================================================

"</span> 文字コードを UFT-8 に設定する
<span class="token builtin class-name">set</span> <span class="token assign-left variable">fenc</span><span class="token operator">=</span>utf-8
<span class="token string">" バックアップファイルを作らない
set nobackup
"</span> スワップファイルを作らない
<span class="token builtin class-name">set</span> noswapfile
<span class="token string">" 編集中のファイルが変更されたら自動で読み直す
set autoread
"</span> バッファが編集中でもその他のファイルを開けるようにする
<span class="token builtin class-name">set</span> hidden
<span class="token string">" 入力中のコマンドをステータスに表示する
set showcmd
"</span> クリップボード連携を有効にする <span class="token punctuation">(</span>MacOS の場合は unnamedplus ではなく unnamed で有効にできた・vi ではなく <span class="token function">vim</span> を使うこと<span class="token punctuation">)</span>
<span class="token builtin class-name">set</span> clipboard<span class="token operator">&#x26;</span>
<span class="token builtin class-name">set</span> clipboard^<span class="token operator">=</span>unnamed
<span class="token string">" クリップボード連携を有効にした時に BackSpace (Delete) が効かなくなるので設定する
set backspace=indent,eol,start

"</span> 見た目
<span class="token string">" ------------------------------------------------------------

"</span> Monokai カラースキーム
syntax on
colorscheme monokai
<span class="token string">" 範囲選択が見づらいので変更する
hi Visual ctermbg=227

"</span> 行番号を表示する
<span class="token builtin class-name">set</span> number
<span class="token string">" 現在の行を強調表示する
set cursorline
"</span> カーソルラインの色をクリアする
hi <span class="token function">clear</span> CursorLine
<span class="token string">" 行末の1文字先までカーソルを移動できるようにする
set virtualedit=onemore
"</span> スマートインデントにする
<span class="token builtin class-name">set</span> smartindent
<span class="token string">" ビープ音を可視化する
set visualbell
"</span> 括弧入力時の対応する括弧を表示する
<span class="token builtin class-name">set</span> showmatch
<span class="token string">" ステータスラインを常に表示する
set laststatus=2
"</span> コマンドライン補完を有効にする
<span class="token builtin class-name">set</span> <span class="token assign-left variable">wildmode</span><span class="token operator">=</span>list:longest
<span class="token string">" 折り返し時に表示行単位での移動をできるようにする
nnoremap j gj
nnoremap k gk

"</span> Tab 文字
<span class="token string">" ------------------------------------------------------------

"</span> 不可視文字を可視化 <span class="token punctuation">(</span>タブが「▸-」と表示される<span class="token punctuation">)</span>
<span class="token builtin class-name">set</span> list <span class="token assign-left variable">listchars</span><span class="token operator">=</span>tab:<span class="token punctuation">\</span>▸<span class="token punctuation">\</span>-
<span class="token string">" Tab 文字を半角スペースにする
set expandtab
"</span> 行頭以外の Tab 文字の表示幅 <span class="token punctuation">(</span>スペースの数<span class="token punctuation">)</span>
<span class="token builtin class-name">set</span> <span class="token assign-left variable">tabstop</span><span class="token operator">=</span><span class="token number">2</span>
<span class="token string">" 行頭での Tab 文字の表示幅
set shiftwidth=2

"</span> 検索
<span class="token string">" ------------------------------------------------------------

"</span> 検索文字列が小文字の場合は大文字小文字を区別なく検索する
<span class="token builtin class-name">set</span> ignorecase
<span class="token string">" 検索文字列に大文字が含まれている場合は区別して検索する
set smartcase
"</span> 検索文字列入力時に順次対象文字列にヒットさせる
<span class="token builtin class-name">set</span> incsearch
<span class="token string">" 検索時に最後まで行ったら最初に戻る
set wrapscan
"</span> 検索語をハイライト表示する
<span class="token builtin class-name">set</span> hlsearch

<span class="token string">" ウィンドウ
"</span> ------------------------------------------------------------

<span class="token string">" t + \ ・ t + | でウィンドウを垂直縦分割する
nmap t&#x3C;Bslash> :vsplit&#x3C;Return>&#x3C;C-w>w
nmap t&#x3C;Bar> :vsplit&#x3C;Return>&#x3C;C-w>w
"</span> t + - でウィンドウを水平横分割する
nmap t- :split<span class="token operator">&#x3C;</span>Return<span class="token operator">></span><span class="token operator">&#x3C;</span>C-w<span class="token operator">></span>w

<span class="token string">" t + hjkl でウィンドウ移動する
map th &#x3C;C-w>h
map tj &#x3C;C-w>j
map tk &#x3C;C-w>k
map tl &#x3C;C-w>l
"</span> Ctrl + w → 矢印キーでウィンドウをリサイズする
nmap tH <span class="token operator">&#x3C;</span>C-w<span class="token operator">>></span>
nmap tJ <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span>-
nmap tK <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span>+
nmap tL <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span><span class="token operator">&#x3C;</span>

<span class="token string">" t + 矢印キーでウィンドウ移動する
map t&#x3C;Left> &#x3C;C-w>h
map t&#x3C;Down> &#x3C;C-w>j
map t&#x3C;Up> &#x3C;C-w>k
map t&#x3C;Right> &#x3C;C-w>l
"</span> Ctrl + w → 矢印キーでウィンドウをリサイズする
nmap <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span><span class="token operator">&#x3C;</span>Left<span class="token operator">></span> <span class="token operator">&#x3C;</span>C-w<span class="token operator">>></span>
nmap <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span><span class="token operator">&#x3C;</span>Down<span class="token operator">></span> <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span>-
nmap <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span><span class="token operator">&#x3C;</span>Up<span class="token operator">></span> <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span>+
nmap <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span><span class="token operator">&#x3C;</span>Right<span class="token operator">></span> <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span><span class="token operator">&#x3C;</span>

<span class="token string">" Space でウィンドウ移動する
nmap &#x3C;Space> &#x3C;C-w>w

"</span> Tab・Space + Tab でタブ移動
nmap <span class="token operator">&#x3C;</span>Tab<span class="token operator">></span> :tabnext<span class="token operator">&#x3C;</span>Return<span class="token operator">></span>
nmap <span class="token operator">&#x3C;</span>S-Tab<span class="token operator">></span> :tabprev<span class="token operator">&#x3C;</span>Return<span class="token operator">></span>

<span class="token string">" Ctrl + z で元に戻す (u)
nnoremap &#x3C;C-z> u
"</span> Ctrl + y でやり直す <span class="token punctuation">(</span>Ctrl + r<span class="token punctuation">)</span>
nnoremap <span class="token operator">&#x3C;</span>C-y<span class="token operator">></span> <span class="token operator">&#x3C;</span>C-r<span class="token operator">></span>

" Esc 連打で :nohlsearch が出ないようにする
nnoremap <span class="token operator">&#x3C;</span>Esc<span class="token operator">></span><span class="token operator">&#x3C;</span>Esc<span class="token operator">></span> <span class="token operator">&#x3C;</span>Esc<span class="token operator">></span>
</code></pre>
<ul>
  <li><a href="https://github.com/Neos21/dotfiles/blob/master/.vimrc">dotfiles/.vimrc at master · Neos21/dotfiles · GitHub</a></li>
</ul>
<p>また、<code>~/.vim/colors/</code> というディレクトリを作り、その下に以下のリポジトリにある <code>monokai.vim</code> を入れておく。</p>
<ul>
  <li><a href="https://github.com/tomasr/molokai">tomasr/molokai</a></li>
</ul>
<p>コレは Monokai カラースキームなので、お好みで変更されたし。</p>
<ul>
  <li><a href="https://github.com/Neos21/dotfiles/blob/master/.vim/colors/monokai.vim">dotfiles/monokai.vim at master · Neos21/dotfiles · GitHub</a></li>
</ul>
<h3 id="tmuxconf"><a class="header-link" href="#tmuxconf"><span class="header-link-mark"></span></a><code>~/.tmux.conf</code></h3>
<p>続いて tmux。コチラもホームディレクトリ直下に <strong><code>.tmux.conf</code></strong> というファイルを作り、以下の内容をコピペする。<em>MacOS でも Windows GitSDK でも動作するよう調整してある。</em></p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># ================================================================================</span>
<span class="token comment"># .tmux.conf</span>
<span class="token comment"># ================================================================================</span>

<span class="token comment"># Session Global Option (set-option -g)</span>
<span class="token comment"># ================================================================================</span>

<span class="token comment"># Prefix を Ctrl + t にする</span>
set-option -g prefix C-t

<span class="token comment"># ペインの番号を 1 から開始する (デフォルトは 0)</span>
set-option -g base-index <span class="token number">1</span>

<span class="token comment"># tmux 上の vi で colorscheme が有効にならないため設定する</span>
set-option -g default-terminal screen-256color

<span class="token comment"># 通常の枠線を水色にする</span>
set-option -g pane-border-style <span class="token assign-left variable">fg</span><span class="token operator">=</span><span class="token string">"colour51"</span>

<span class="token comment"># アクティブなペインの枠線を赤色にする</span>
set-option -g pane-active-border-style <span class="token assign-left variable">fg</span><span class="token operator">=</span><span class="token string">"colour196"</span>

<span class="token comment"># マウス操作を有効にする</span>
set-option -g mouse on

<span class="token comment"># キーストロークのディレイを減らす</span>
set-option -sg escape-time <span class="token number">1</span>

<span class="token comment"># リフレッシュ間隔を変更する</span>
set-option -g status-interval <span class="token number">1</span>

<span class="token comment"># ステータスバーの右部分に時計を表示する</span>
set-option -g status-right <span class="token string">"[%Y-%m-%d (%a) %H:%M:%S]"</span>

<span class="token comment"># MacOS : reattach-to-user-namespace を使用してクリップボード共有を有効にする</span>
<span class="token keyword">if</span> -b <span class="token string">'command -v reattach-to-user-namespace > /dev/null 2>&#x26;1'</span>  <span class="token string">'set-option -g default-command "reattach-to-user-namespace -l bash"'</span>

<span class="token comment"># Window Global Option (set-window-option)</span>
<span class="token comment"># ================================================================================</span>

<span class="token comment"># ウィンドウの番号を 1 から開始する (デフォルトは 0)</span>
set-window-option -g pane-base-index <span class="token number">1</span>

<span class="token comment"># コピーモード (Prefix + [ で開始) で vi キーバインドを使う</span>
set-window-option -g mode-keys <span class="token function">vi</span>

<span class="token comment"># Bind Key</span>
<span class="token comment"># ================================================================================</span>

<span class="token comment"># Prefix + \ ・ Prefix + | でペインを縦に分割する</span>
bind-key <span class="token punctuation">\</span> split-window -h
bind-key <span class="token operator">|</span> split-window -h
<span class="token comment"># Prefix + - でペインを横に分割する</span>
bind-key - split-window -v

<span class="token comment"># Prefix + hjkl でペイン移動</span>
bind-key -r h select-pane -L
bind-key -r j select-pane -D
bind-key -r k select-pane -U
bind-key -r l select-pane -R

<span class="token comment"># Prefix + Shift + hjkl でペインをリサイズする</span>
bind-key -r H resize-pane -L <span class="token number">5</span>
bind-key -r J resize-pane -D <span class="token number">5</span>
bind-key -r K resize-pane -U <span class="token number">5</span>
bind-key -r L resize-pane -R <span class="token number">5</span>

<span class="token comment"># Prefix + r で設定ファイルをリロードする</span>
bind-key r source-file ~/.tmux.conf <span class="token punctuation">\</span><span class="token punctuation">;</span> display <span class="token string">"Reloaded."</span>

<span class="token comment"># Prefix + o で tmux 用の画面クリアコマンドを入力する</span>
bind-key o send-keys <span class="token string">"clear &#x26;&#x26; tmux clear-history"</span> <span class="token punctuation">\</span><span class="token punctuation">;</span> send-keys Enter

<span class="token comment"># Prefix + v でコピーモードを開始する (デフォルトは Prefix + [)</span>
bind-key <span class="token function">v</span> copy-mode <span class="token punctuation">\</span><span class="token punctuation">;</span> display <span class="token string">"Copy Mode!"</span>

<span class="token comment"># Prefix + Ctrl + p でペースト (デフォルトは Prefix + ]・クリップボード共有しているので Cmd + V でも OK)</span>
bind-key C-p paste-buffer

<span class="token comment"># コピーモード中 v か Space で選択を始める</span>
bind-key -T copy-mode-vi <span class="token function">v</span> send -X begin-selection <span class="token punctuation">\</span><span class="token punctuation">;</span> display <span class="token string">"Copy Start."</span>
bind-key -T copy-mode-vi Space send -X begin-selection <span class="token punctuation">\</span><span class="token punctuation">;</span> display <span class="token string">"Copy Start."</span>
<span class="token comment"># コピーモード中 V で行選択を始める</span>
bind-key -T copy-mode-vi V send -X select-line <span class="token punctuation">\</span><span class="token punctuation">;</span> display <span class="token string">"Copy Line Start."</span>
<span class="token comment"># コピーモード中 Ctrl + v で矩形選択を始める</span>
bind-key -T copy-mode-vi C-v send -X rectangle-toggle <span class="token punctuation">\</span><span class="token punctuation">;</span> display <span class="token string">"Copy Rectangle Start."</span>

<span class="token comment"># コピーモード中 y か Enter でヤンク (コピー)</span>
<span class="token comment"># MacOS : reattach-to-user-namespace を使用</span>
<span class="token keyword">if</span> -b <span class="token string">'command -v reattach-to-user-namespace > /dev/null 2>&#x26;1'</span>  <span class="token string">'bind-key -T copy-mode-vi y     send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy" \; display "Copied!"'</span>
<span class="token keyword">if</span> -b <span class="token string">'command -v reattach-to-user-namespace > /dev/null 2>&#x26;1'</span>  <span class="token string">'bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy" \; display "Copied!"'</span>
<span class="token comment"># Windows : tmux save-buffer で echo しパイプを使って clip.exe に渡す</span>
<span class="token keyword">if</span> -b <span class="token string">'command -v clip.exe                   > /dev/null 2>&#x26;1'</span>  <span class="token string">'bind-key -T copy-mode-vi y     send-keys -X copy-pipe-and-cancel "tmux save-buffer - | clip.exe" \; display "Copied!"'</span>
<span class="token keyword">if</span> -b <span class="token string">'command -v clip.exe                   > /dev/null 2>&#x26;1'</span>  <span class="token string">'bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "tmux save-buffer - | clip.exe" \; display "Copied!"'</span>

<span class="token comment"># コピーモード中 Esc で中止</span>
bind-key -T copy-mode-vi Escape send -X cancel
</code></pre>
<ul>
  <li><a href="https://github.com/Neos21/dotfiles/blob/master/.tmux.conf">dotfiles/.tmux.conf at master · Neos21/dotfiles · GitHub</a></li>
</ul>
<h2 id="ターミナルのカラー・フォント設定を揃える"><a class="header-link" href="#ターミナルのカラー・フォント設定を揃える"><span class="header-link-mark"></span></a>ターミナルのカラー・フォント設定を揃える</h2>
<p>あとはターミナルのカラーやフォントの設定を調整しておく。</p>
<h3 id="macos-ターミナル"><a class="header-link" href="#macos-ターミナル"><span class="header-link-mark"></span></a>MacOS ターミナル</h3>
<p>標準で入っている Homebrew テーマをベースに、テキストの色を緑から白にしておく。色はお好みで明るめに。フォントは <em>Osaka 等幅</em>。メイリオ改を使ったりしていたが、結局コレが一番見やすい。</p>
<p>
  <img src="20-02-01.png" alt="MacOS ターミナルのフォント設定">
</p>
<h3 id="windows-git-sdk"><a class="header-link" href="#windows-git-sdk"><span class="header-link-mark"></span></a>Windows Git SDK</h3>
<p>GitBash は青色が特に見づらいので、<code>~/.minttyrc</code> にてカラーを設定してやることにする。<code>ThemeFile</code> プロパティは空にしておくことで、カラー指定が有効にできる。</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># ================================================================================</span>
<span class="token comment"># .minttyrc</span>
<span class="token comment"># ================================================================================</span>

Charset  <span class="token operator">=</span> UTF-8
Language <span class="token operator">=</span> ja
Locale   <span class="token operator">=</span> ja_JP

Columns  <span class="token operator">=</span> <span class="token number">120</span>
Rows     <span class="token operator">=</span> <span class="token number">25</span>

Font          <span class="token operator">=</span> Consolas
FontHeight    <span class="token operator">=</span> <span class="token number">11</span>
FontWeight    <span class="token operator">=</span> <span class="token number">700</span>
FontIsBold    <span class="token operator">=</span> <span class="token function">yes</span>
FontSmoothing <span class="token operator">=</span> full
BoldAsColour  <span class="token operator">=</span> <span class="token function">yes</span>
BoldAsFont    <span class="token operator">=</span> <span class="token function">yes</span>

AllowBlinking     <span class="token operator">=</span> <span class="token function">yes</span>
CursorType        <span class="token operator">=</span> block
OpaqueWhenFocused <span class="token operator">=</span> <span class="token function">yes</span>
Term              <span class="token operator">=</span> xterm-256color
ThemeFile         <span class="token operator">=</span>

ForegroundColour <span class="token operator">=</span> <span class="token number">240,240</span>,240
BackgroundColour <span class="token operator">=</span>   <span class="token number">0</span>,  <span class="token number">0</span>,  <span class="token number">0</span>
CursorColour     <span class="token operator">=</span> <span class="token number">240,240</span>,240
Black            <span class="token operator">=</span> <span class="token number">100,100</span>,100
BoldBlack        <span class="token operator">=</span> <span class="token number">100,100</span>,100
Red              <span class="token operator">=</span> <span class="token number">240</span>,  <span class="token number">0</span>,  <span class="token number">0</span>
BoldRed          <span class="token operator">=</span> <span class="token number">240</span>,  <span class="token number">0</span>,  <span class="token number">0</span>
Green            <span class="token operator">=</span>   <span class="token number">0,220</span>,  <span class="token number">0</span>
BoldGreen        <span class="token operator">=</span>   <span class="token number">0,220</span>,  <span class="token number">0</span>
Yellow           <span class="token operator">=</span> <span class="token number">255,255</span>,  <span class="token number">0</span>
BoldYellow       <span class="token operator">=</span> <span class="token number">255,255</span>,  <span class="token number">0</span>
Blue             <span class="token operator">=</span>   <span class="token number">0,140</span>,255
BoldBlue         <span class="token operator">=</span>   <span class="token number">0,140</span>,255
Magenta          <span class="token operator">=</span> <span class="token number">255</span>,  <span class="token number">0,240</span>
BoldMagenta      <span class="token operator">=</span> <span class="token number">255</span>,  <span class="token number">0,240</span>
Cyan             <span class="token operator">=</span>   <span class="token number">0,240</span>,240
BoldCyan         <span class="token operator">=</span>   <span class="token number">0,240</span>,240
White            <span class="token operator">=</span> <span class="token number">255,255</span>,255
BoldWhite        <span class="token operator">=</span> <span class="token number">255,255</span>,255
</code></pre>
<p>フォントはメイリオ改や Osaka 等幅を使いたかったが、いずれも <code>tmux</code> で罫線が狂ってしまった。日本語表示が一番マシな英語フォントの <strong>Consolas</strong> を選んでお茶を濁した。</p>
<p>
  <img src="20-02-04.png" alt="Windows でのフォント設定">
</p>
<h2 id="コレで完了"><a class="header-link" href="#コレで完了"><span class="header-link-mark"></span></a>コレで完了</h2>
<p>コレで設定完了。あとは使っていくだけ…。</p>
<h2 id="カスタマイズした内容を確認する"><a class="header-link" href="#カスタマイズした内容を確認する"><span class="header-link-mark"></span></a>カスタマイズした内容を確認する</h2>
<p>…とはいっても、いきなり設定ファイルを渡してさあどうぞ、というのも難しいと思うので、設定ファイルでカスタマイズした内容の詳細を見ていき、それに合わせて使い方を解説しよう。</p>
<h3 id="vim"><a class="header-link" href="#vim"><span class="header-link-mark"></span></a>Vim</h3>
<ul>
  <li>Vim で苦労したのはクリップボード共有。最終的には以下のように設定することで対応できた。</li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token string">" クリップボード連携を有効にする (MacOS の場合は unnamedplus ではなく unnamed で有効にできた・vi ではなく vim を使うこと)
set clipboard&#x26;
set clipboard^=unnamed
"</span> クリップボード連携を有効にした時に BackSpace <span class="token punctuation">(</span>Delete<span class="token punctuation">)</span> が効かなくなるので設定する
<span class="token builtin class-name">set</span> <span class="token assign-left variable">backspace</span><span class="token operator">=</span>indent,eol,start
</code></pre>
<p><code>unnamed</code> と <code>unnamedplus</code> が調べてもよく分からずじまいだったが、とりあえず上の設定で、MacOS も Windows も動作した。ただ、コレを入れると、インサートモードで BackSpace (Delete) キーが効かなくなる問題があったので、<code>set backspace</code> も入れた次第。</p>
<ul>
  <li>参考：<a href="https://pocke.hatenablog.com/entry/2014/10/26/145646">vimでクリップボード連携を有効にした話 - pockestrap</a></li>
  <li>参考：<a href="https://wonderwall.hatenablog.com/entry/2016/03/23/232634">Vimメモ : 挿入モードでバックスペースが効かない - もた日記</a></li>
</ul>
<p>次。</p>
<ul>
  <li>Monokai カラースキームは、ビジュアルモードの文字列選択がグレーで見づらいので、薄い黄色にハイライトするよう調整した。</li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token string">" Monokai カラースキーム
syntax on
colorscheme monokai
"</span> 範囲選択が見づらいので変更する
hi Visual <span class="token assign-left variable">ctermbg</span><span class="token operator">=</span><span class="token number">227</span>
</code></pre>
<ul>
  <li>Vim のウィンドウ分割をショートカットキーで設定した
    <ul>
      <li>縦に垂直分割する時は、US キーボードにおける「バックスラッシュ / バーティカルバー」のキーを押下する。Shift 押下が面倒なのでバックスラッシュでも動作するようにした</li>
      <li>横に水平分割する時はハイフン</li>
      <li>いずれも、記号が分割する方向を示す</li>
      <li>ノーマルモードで押下するキーは <code>t</code> とした。コレは後述する tmux の Prefix キー (<code>Ctrl + t</code>) と同じキーにした</li>
    </ul>
  </li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token string">" t + \ ・ t + | でウィンドウを垂直縦分割する
nmap t&#x3C;Bslash> :vsplit&#x3C;Return>&#x3C;C-w>w
nmap t&#x3C;Bar> :vsplit&#x3C;Return>&#x3C;C-w>w
"</span> t + - でウィンドウを水平横分割する
nmap t- :split<span class="token operator">&#x3C;</span>Return<span class="token operator">></span><span class="token operator">&#x3C;</span>C-w<span class="token operator">></span>w
</code></pre>
<ul>
  <li>ウィンドウ (ペイン) の移動を hjkl と矢印キーでできるようにした
    <ul>
      <li>デフォルトでは Ctrl + w を押下してからの操作になるので簡略化</li>
    </ul>
  </li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token string">" t + hjkl でウィンドウ移動する
map th &#x3C;C-w>h
map tj &#x3C;C-w>j
map tk &#x3C;C-w>k
map tl &#x3C;C-w>l

"</span> t + 矢印キーでウィンドウ移動する
map t<span class="token operator">&#x3C;</span>Left<span class="token operator">></span> <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span>h
map t<span class="token operator">&#x3C;</span>Down<span class="token operator">></span> <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span>j
map t<span class="token operator">&#x3C;</span>Up<span class="token operator">></span> <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span>k
map t<span class="token operator">&#x3C;</span>Right<span class="token operator">></span> <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span>l
</code></pre>
<ul>
  <li>ウィンドウ (ペイン) のリサイズを HJKL (Shfit 押下) と矢印キーでできるようにした
    <ul>
      <li>リサイズのデフォルトは <code>Ctrl + w</code> の後に <code>&#x3C;</code> とか <code>></code> とか <code>+</code> とか <code>-</code> とか、とにかく面倒なので簡略化</li>
    </ul>
  </li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token string">" t + HJKL でウィンドウをリサイズする
nmap tH &#x3C;C-w>>
nmap tJ &#x3C;C-w>-
nmap tK &#x3C;C-w>+
nmap tL &#x3C;C-w>&#x3C;

"</span> Ctrl + w → 矢印キーでウィンドウをリサイズする
nmap <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span><span class="token operator">&#x3C;</span>Left<span class="token operator">></span> <span class="token operator">&#x3C;</span>C-w<span class="token operator">>></span>
nmap <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span><span class="token operator">&#x3C;</span>Down<span class="token operator">></span> <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span>-
nmap <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span><span class="token operator">&#x3C;</span>Up<span class="token operator">></span> <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span>+
nmap <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span><span class="token operator">&#x3C;</span>Right<span class="token operator">></span> <span class="token operator">&#x3C;</span>C-w<span class="token operator">></span><span class="token operator">&#x3C;</span>
</code></pre>
<ul>
  <li>Undo と Redo を Windows 風にした
    <ul>
      <li>MacOS の「元に戻す」「やり直す」は <code>Cmd + z</code>・<code>Cmd + Shift + z</code> だが、Vim は Shift 押下のコンビネーションを登録できないっぽいので、Windows 風な <code>Ctrl + z</code>・<code>Ctrl + y</code> に揃えることにした</li>
      <li>参考：<a href="https://github.com/vim-jp/issues/issues/756">mapをCtrl+Shift+Bのような登録はできないでしょうか？ · Issue #756 · vim-jp/issues · GitHub</a></li>
      <li>そもそも Vim の Undo・Redo は「インサートモード」から「ノーマルモード」に戻った時を1回とカウントするので、普通のメモ帳や IDE みたいには使えない</li>
    </ul>
  </li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token string">" Ctrl + z で元に戻す (u)
nnoremap &#x3C;C-z> u
"</span> Ctrl + y でやり直す <span class="token punctuation">(</span>Ctrl + r<span class="token punctuation">)</span>
nnoremap <span class="token operator">&#x3C;</span>C-y<span class="token operator">></span> <span class="token operator">&#x3C;</span>C-r<span class="token operator">></span>
</code></pre>
<h3 id="tmux"><a class="header-link" href="#tmux"><span class="header-link-mark"></span></a>tmux</h3>
<p>tmux の設定は <code>set</code> (= <code>set-option</code>)、<code>setw</code> (= <code>set-window-option</code>)、<code>bind</code> (<code>bind-key</code>) などがある。</p>
<ul>
  <li>Prefix を <code>Ctrl + t</code> にした。別途 <em>CapsLock キーを Ctrl (Control) キーに変更</em>しておくと、<strong>左手の位置を大きく動かさずに押せる</strong>ようになるのでオススメ</li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># Prefix を Ctrl + t にする</span>
set-option -g prefix C-t
</code></pre>
<ul>
  <li>マウス操作は有効にしておく。コレを入れておくだけで良い
    <ul>
      <li>マウスドラッグで範囲選択モードに入るが、マウスボタンを離すとただキャンセルされてしまうので、<em>範囲選択が終わったところで <code>y</code> キーを離してからマウスボタンを離すことでコピーする</em>ようにしよう</li>
    </ul>
  </li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># マウス操作を有効にする</span>
set-option -g mouse on
</code></pre>
<ul>
  <li>MacOS の場合はクリップボード共有に <code>reattach-to-user-namespace</code> を使うので、その設定をしておく
    <ul>
      <li><code>if -b '【条件となるシェルスクリプト】' '【真の時に実行する処理】'</code> と書ける。ココでは <code>command</code> コマンドを使い、<code>reattach-to-user-namespace</code> の存在を確認して設定している</li>
    </ul>
  </li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># MacOS : reattach-to-user-namespace を使用してクリップボード共有を有効にする</span>
<span class="token keyword">if</span> -b <span class="token string">'command -v reattach-to-user-namespace > /dev/null 2>&#x26;1'</span>  <span class="token string">'set-option -g default-command "reattach-to-user-namespace -l bash"'</span>
</code></pre>
<ul>
  <li>コピーモードで vi と同じキーバインドを使う。定石</li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># コピーモード (Prefix + [ で開始) で vi キーバインドを使う</span>
set-window-option -g mode-keys <span class="token function">vi</span>
</code></pre>
<ul>
  <li>ペイン分割のショートカットを設定する
    <ul>
      <li>通常は <code>tmux split-window -h</code> などと入力して実現するペイン分割。コレを <code>Control + t → バックスラッシュ</code> などで実現できるようにした</li>
      <li>記号類は Vim の方に設定したものと同じ</li>
    </ul>
  </li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># Prefix + \ ・ Prefix + | でペインを縦に分割する</span>
bind-key <span class="token punctuation">\</span> split-window -h
bind-key <span class="token operator">|</span> split-window -h
<span class="token comment"># Prefix + - でペインを横に分割する</span>
bind-key - split-window -v
</code></pre>
<ul>
  <li>ペイン移動を hjkl でできるようにする
    <ul>
      <li>ペインのリサイズも同様</li>
    </ul>
  </li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># Prefix + hjkl でペイン移動</span>
bind-key -r h select-pane -L
bind-key -r j select-pane -D
bind-key -r k select-pane -U
bind-key -r l select-pane -R

<span class="token comment"># Prefix + Shift + hjkl でペインをリサイズする</span>
bind-key -r H resize-pane -L <span class="token number">5</span>
bind-key -r J resize-pane -D <span class="token number">5</span>
bind-key -r K resize-pane -U <span class="token number">5</span>
bind-key -r L resize-pane -R <span class="token number">5</span>
</code></pre>
<ul>
  <li>設定ファイルの変更をその場でリロードするショートカットを用意</li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># Prefix + r で設定ファイルをリロードする</span>
bind-key r source-file ~/.tmux.conf <span class="token punctuation">\</span><span class="token punctuation">;</span> display <span class="token string">"Reloaded."</span>
</code></pre>
<ul>
  <li>tmux で <code>Cmd + k</code> によるクリアを行うと表示がバグるため、<code>clear</code> コマンドと <code>tmux clear-history</code> コマンドを叩くショートカットを用意した
    <ul>
      <li>参考：<a href="https://stackoverflow.com/questions/10543684/how-can-i-clear-scrollback-buffer-in-tmux">terminal - How can I clear scrollback buffer in Tmux? - Stack Overflow</a></li>
      <li>tmux で開いたペインで SSH などしていて、<code>tmux</code> コマンドが存在しない環境だと失敗するので注意</li>
    </ul>
  </li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># Prefix + o で tmux 用の画面クリアコマンドを入力する</span>
bind-key o send-keys <span class="token string">"clear &#x26;&#x26; tmux clear-history"</span> <span class="token punctuation">\</span><span class="token punctuation">;</span> send-keys Enter
</code></pre>
<ul>
  <li>コピーモードの開始キーを <code>v</code> にして Vim に揃える
    <ul>
      <li>以降の操作も Vim に倣ったキー設定にしている</li>
    </ul>
  </li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># Prefix + v でコピーモードを開始する (デフォルトは Prefix + [)</span>
bind-key <span class="token function">v</span> copy-mode <span class="token punctuation">\</span><span class="token punctuation">;</span> display <span class="token string">"Copy Mode!"</span>

<span class="token comment"># Prefix + Ctrl + p でペースト (デフォルトは Prefix + ]・クリップボード共有しているので Cmd + V でも OK)</span>
bind-key C-p paste-buffer

<span class="token comment"># コピーモード中 v か Space で選択を始める</span>
bind-key -T copy-mode-vi <span class="token function">v</span> send -X begin-selection <span class="token punctuation">\</span><span class="token punctuation">;</span> display <span class="token string">"Copy Start."</span>
bind-key -T copy-mode-vi Space send -X begin-selection <span class="token punctuation">\</span><span class="token punctuation">;</span> display <span class="token string">"Copy Start."</span>
<span class="token comment"># コピーモード中 V で行選択を始める</span>
bind-key -T copy-mode-vi V send -X select-line <span class="token punctuation">\</span><span class="token punctuation">;</span> display <span class="token string">"Copy Line Start."</span>
<span class="token comment"># コピーモード中 Ctrl + v で矩形選択を始める</span>
bind-key -T copy-mode-vi C-v send -X rectangle-toggle <span class="token punctuation">\</span><span class="token punctuation">;</span> display <span class="token string">"Copy Rectangle Start."</span>
</code></pre>
<ul>
  <li>コピー時の操作を OS ごとに設定する
    <ul>
      <li>前述の <code>if -b</code> イディオムを使って各コマンドの存在を確認して設定している</li>
      <li>Windows の場合は <code>tmux save-buffer -</code> コマンドで、ヤンクした内容を出力できるので、それをパイプで <code>clip.exe</code> に渡すことでクリップボードにコピーさせている</li>
    </ul>
  </li>
</ul>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># コピーモード中 y か Enter でヤンク (コピー)</span>

<span class="token comment"># MacOS : reattach-to-user-namespace を使用</span>
<span class="token keyword">if</span> -b <span class="token string">'command -v reattach-to-user-namespace > /dev/null 2>&#x26;1'</span>  <span class="token string">'bind-key -T copy-mode-vi y     send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy" \; display "Copied!"'</span>
<span class="token keyword">if</span> -b <span class="token string">'command -v reattach-to-user-namespace > /dev/null 2>&#x26;1'</span>  <span class="token string">'bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy" \; display "Copied!"'</span>

<span class="token comment"># Windows : tmux save-buffer で echo しパイプを使って clip.exe に渡す</span>
<span class="token keyword">if</span> -b <span class="token string">'command -v clip.exe                   > /dev/null 2>&#x26;1'</span>  <span class="token string">'bind-key -T copy-mode-vi y     send-keys -X copy-pipe-and-cancel "tmux save-buffer - | clip.exe" \; display "Copied!"'</span>
<span class="token keyword">if</span> -b <span class="token string">'command -v clip.exe                   > /dev/null 2>&#x26;1'</span>  <span class="token string">'bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "tmux save-buffer - | clip.exe" \; display "Copied!"'</span>
</code></pre>
<p>…こんな感じ。</p>
<p>基本的には Vim の操作を覚えていれば、その流れで Vim のペイン操作や tmux のペイン操作ができるようにしてある。覚えるのは <code>|-</code> (ペイン分割)、<code>hjkl</code> (移動関連)、<code>vyp</code> (ヤンク周り) ぐらいだ。</p>
<h2 id="以上"><a class="header-link" href="#以上"><span class="header-link-mark"></span></a>以上</h2>
<p>あんまりガッツリと tmux + vim を触ることはないけど、ちょっとした時に使いたい、というライトな人向けの、<code>~/.tmux.conf</code> と <code>~/.vimrc</code> 設定を紹介した。</p>

      </main>
      <footer id="footer">
        <div id="date-time">
          <dl>
            <dt>Created</dt>
            <dd><time>2019-09-20</time></dd>
            <dt>Last-Modified</dt>
            <dd><time>2019-09-20</time></dd>
          </dl>
        </div>
        <nav id="footer-links">
          <ul>
            <li id="footer-link-about"><a href="/about/index.html" title="About">About</a></li>
            <li id="footer-link-search"><a href="/about/search.html" title="Search">Search</a></li>
            <li id="footer-link-feeds"><a href="/feeds.xml" title="Feeds">Feeds</a></li>
            <li id="footer-link-github"><a href="https://github.com/Neos21/" title="GitHub">GitHub</a></li>
          </ul>
        </nav>
        <nav id="to-top"><a href="#" title="To Top"><span>▲ To Top</span></a></nav>
      </footer>
    </div>
  </body>
</html>
