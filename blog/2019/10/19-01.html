<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="theme-color" content="#0990d0">
    <!-- Google Search Console -->
    <meta name="google-site-verification" content="AvoEr3mUJFF2H_mPWWgShfmjBVP3ywRpyx9hxeeq2d4">
    <!-- Open Graph・Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Neo's World">
    <meta property="og:title" content="Oracle Cloud が Always Free (永久無料枠) を発表したのでアカウント登録してみたが、無料枠が少ない - Neo's World">
    <meta property="og:description" content="Oracle Cloud が Always Free (永久無料枠) を発表したのでアカウント登録してみたが、無料枠が少ない - Neo's World">
    <meta property="og:url" content="https://neos21.net/blog/2019/10/19-01.html">
    <meta property="og:image" content="https://neos21.net/ogp.png">
    <meta property="og:locale" content="ja_JP">
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Oracle Cloud が Always Free (永久無料枠) を発表したのでアカウント登録してみたが、無料枠が少ない - Neo's World">
    <meta property="twitter:description" content="Oracle Cloud が Always Free (永久無料枠) を発表したのでアカウント登録してみたが、無料枠が少ない - Neo's World">
    <meta property="twitter:url" content="https://neos21.net/blog/2019/10/19-01.html">
    <meta property="twitter:image" content="https://neos21.net/ogp.png">
    <title>Oracle Cloud が Always Free (永久無料枠) を発表したのでアカウント登録してみたが、無料枠が少ない - Neo's World</title>
    <link rel="icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="manifest" href="/manifest.webmanifest">
    <link rel="stylesheet" href="/styles.css">
    <link rel="canonical" href="https://neos21.net/blog/2019/10/19-01.html">
    <link rel="search" type="application/opensearchdescription+xml" title="neos21.net" href="/opensearch.xml">
    <link rel="alternate" type="application/atom+xml" title="Feeds" href="/feeds.xml">
    <link rel="author" href="http://www.hatena.ne.jp/neos21/">
    <script src="/scripts.js"></script>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-MZCGD23');</script>
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6475907504235292" crossorigin="anonymous"></script>
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MZCGD23" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <div id="container">
      <header id="header">
        <div id="header-brand">
          <div id="header-brand-contents">
            <div id="site-title"><a href="/index.html">Neo's World</a></div>
            <nav id="header-links">
              <ul>
                <li id="header-link-theme"><a href="#" title="Toggle Theme"><span>Toggle Theme</span></a></li>
                <li id="header-link-about"><a href="/about/index.html" title="About"><span>About</span></a></li>
                <li id="header-link-search"><a href="/about/search.html" title="Search"><span>Search</span></a></li>
                <li id="header-link-feeds"><a href="/feeds.xml" title="Feeds"><span>Feeds</span></a></li>
                <li id="header-link-to-bottom"><a href="#footer" title="To Bottom"><span>▼ To Bottom</span></a></li>
              </ul>
            </nav>
          </div>
        </div>
        <nav id="global-nav">
          <ul>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/tech/index.html">Tech</a></li>
            <li><a href="/music/index.html">Music</a></li>
            <li><a href="/games/index.html">Games</a></li>
            <li><a href="/gallery/index.html">Gallery</a></li>
            <li><a href="/etc/index.html">Etc.</a></li>
          </ul>
        </nav>
        <nav id="path">
          <ul>
            <li><a href="/index.html">Neo's World</a></li>
            <li><a href="/blog/index.html">Blog</a></li>
            <li><a href="/blog/2019/index.html">2019年</a></li>
            <li><a href="/blog/2019/10/index.html">10月</a></li>
          </ul>
        </nav>
      </header>
      <main id="main">
        <div id="header-date"><time>2019-10-19</time></div>
        <h1 id="page-title">Oracle Cloud が Always Free (永久無料枠) を発表したのでアカウント登録してみたが、無料枠が少ない</h1>

<p>仕事で Oracle Cloud を使っていたが、最近 Always Free、いわゆる<em>永久無料枠</em>が発表され、VM や Autonomous DB を2台ずつ立てられるようになった。無料枠の GCE や Heroku Postgres を併用したりせずとも、Oracle Cloud だけで Web AP サーバと DB サーバを無料でまかなえるかもしれない、と思い、個人でアカウントを登録してみることにした。</p>
<p>アカウント登録の手順は以下の記事どおり。</p>
<ul>
  <li>参考 : <a href="https://qiita.com/manaki079/items/d8684f8e15ccf09bdc4e">【OCI】oracle cloud -アカウントの登録編- - Qiita</a></li>
</ul>
<p>次の URL から「Start for free」ボタンを押下し、登録を始める。</p>
<ul>
  <li><a href="https://www.oracle.com/jp/cloud/free/">Oracle Cloud Free Tier | Oracle 日本</a></li>
</ul>
<p>
  <img src="19-01-01.png" alt="OCI">
</p>
<p>
  <img src="19-01-02.png" alt="Sign Up">
</p>
<p>後述するが、無料枠を使う上で重要になる<em>ホームリージョン</em>の指定がある画面。</p>
<p>
  <img src="19-01-03.png" alt="ホームリージョン">
</p>
<p>携帯電話番号での認証もある。</p>
<p>
  <img src="19-01-04.png" alt="携帯電話番号">
</p>
<p>パスワード設定。</p>
<p>
  <img src="19-01-05.png" alt="っパスワード">
</p>
<p>クレジットカード情報も記載するが、無料枠に含まれる約3万円分を使い果たした後も、いきなり課金されることはないので安心。</p>
<p>
  <img src="19-01-06.png" alt="クレカを登録する">
</p>
<p>
  <img src="19-01-07.png" alt="クレカ情報フォーム">
</p>
<p>
  <img src="19-01-08.png" alt="確認">
</p>
<p>アカウントを作成中。このあとメールが届くので、そのメールからアカウントにログインする。</p>
<p>
  <img src="19-01-09.png" alt="作成中">
</p>
<p>メールはこんな感じ。</p>
<p>
  <img src="19-01-10.png" alt="メール">
</p>
<p>ログイン情報を入れる。</p>
<p>
  <img src="19-01-11.png" alt="ログイン">
</p>
<p>こんな画面に辿り着けたら OK。</p>
<p>
  <img src="19-01-12.png" alt="コンソール画面">
</p>
<p>どうも、「Gen2 Cloud」と呼ばれる第2世代のオラクル・クラウド基盤に移行中みたいで、「以前使っていた Cloud My Services はどこ？」とか、「このリージョンでは PaaS が Gen1 基盤を使ってしまって違う画面に飛ばされる」とか、色々と整備が追いついてない感じ…。</p>
<h2 id="エラーが出た時は--無料枠が作れないかも"><a class="header-link" href="#エラーが出た時は--無料枠が作れないかも"><span class="header-link-mark"></span></a>エラーが出た時は : 無料枠が作れないかも</h2>
<p>Compute Instance を作成しようとしたら、「<strong>Out of host capacity.</strong>」というエラーが出た。</p>
<p>
  <img src="19-01-13.png" alt="キャパいっぱい">
</p>
<p>どうやら無料枠を公開したことで利用者が殺到しているらしく、無料枠のリソースを作成できないようだ。気長に待つしかない。どうも月初は少し登録しやすいみたい。</p>
<p>なお、登録時に選択したリージョン = ホームリージョン以外では、Always Free なリソースを作れない。North America の Ashburn リージョンなんかだと、Tokyo リージョンよりは無料枠のリソースが作りやすいかもしれない。とりあえず無料枠が使えれば良くて、海をまたいだデータセンターでも良ければ、登録時に北米リージョンなどを選択しても良いかも。</p>
<h2 id="インスタンスを作ってみた"><a class="header-link" href="#インスタンスを作ってみた"><span class="header-link-mark"></span></a>インスタンスを作ってみた</h2>
<p>今回はテナンシ (ルートコンパートメント) 直下にリソースを作っていく。細かく説明するのが<strong>面倒臭い</strong>ので、雑に紹介。</p>
<ol>
  <li>VCN (Virtual Cloud Network) を作る
    <ul>
      <li>CIDR Block はデフォルトの <code>10.0.0.0/16</code> でも良いが、他の Oracle Cloud サービスと Local Peering する時は CIDR Block が重複していてはいけないので、<code>20.0.0.0/16</code> とか適当に違う CIDR にしておく。</li>
      <li>デフォルトの Route Table を確認。Internet Gateway がアタッチしてあれば、その VCN 内からインターネットへ、通信が出られるようになる。</li>
      <li>デフォルトの Security List を確認。通信を許可するポートや IP レンジを指定する。デフォルトで SSH するための22番ポートが許可されている。</li>
    </ul>
  </li>
  <li>Subnet を作る
    <ul>
      <li>VCN の CIDR Block 内で、<code>20.0.1.0/24</code> など適当に。</li>
      <li>この Subnet の中に、Compute Instance (VM) を配置していく。</li>
    </ul>
  </li>
  <li>Compute Instance を作る
    <ul>
      <li><code>VM.Standard.E2.1.Micro</code> というシェイプが、無料で作れるインスタンス。</li>
      <li>Public IP は後で付与するので、一旦はナシで良い。</li>
      <li>SSH 接続するための公開鍵を設定しておかないと、SSH 接続する術がなくなるので注意。<br><code>$ ssh-keygen -t rsa -b 4096 -N '' -C 'my-instance' -f ~/.ssh/my-instance</code> みたいなコマンドで鍵ペアを作り、<code>my-instance.pub</code> ファイルをアップしておこう。</li>
    </ul>
  </li>
  <li>Reserved Public IP を作る
    <ul>
      <li>予約済 Public IP。Networking → Public IPs と進み「Create Reserved Public IP」で Public IP を発行する。</li>
    </ul>
  </li>
  <li>Compute Instance の VNIC に Reserved Public IP を指定する
    <ul>
      <li>Compute → Instances → Attached VNICs → Primary VNIC を選択 → IP Addresses → Primary IP の「Edit」を選択する。</li>
      <li>Public IP Address 欄で「Reserved Public IP」を選択し、先程作った Reserved Public IP を選択する。</li>
      <li>コレで、Compute Instance に、不変な Public IP を割り当てられた。</li>
    </ul>
  </li>
</ol>
<p>あとは、Public IP を指定して、以下のように SSH 接続してみよう。</p>
<pre class="language-bash"><code class="language-bash"><span class="token comment"># Public IP アドレスを指定する</span>
$ <span class="token function">ssh</span> -i ~/.ssh/my-instance opc@140.0.0.0
</code></pre>
<p><code>opc</code> というユーザが、Compute Instance 作成時に作られる初期ユーザ。このユーザの <code>authorized_keys</code> に、<code>my-instance.pub</code> (公開鍵) が設定されている、という関係だ。</p>
<p>あとはお好きなようにインスタンスをいじくり回してみよう。Web サーバとして公開したいのであれば、<em>Security List</em> で80番ポートや443番ポートへのアクセス (Ingress) を許可してやる必要がある。</p>
<h2 id="以上"><a class="header-link" href="#以上"><span class="header-link-mark"></span></a>以上</h2>
<p>今回は作成しなかったが、Oracle Autonomous DB も永久無料枠で2つまで作れるので、色々遊べそうだ。</p>

      </main>
      <footer id="footer">
        <div id="footer-contents">
          <div id="date-time">
            <dl>
              <dt>Created</dt>
              <dd><time>2019-10-19</time></dd>
              <dt>Last-Modified</dt>
              <dd><time>2019-10-19</time></dd>
            </dl>
          </div>
          <nav id="footer-links">
            <ul>
              <li id="footer-link-about"><a href="/about/index.html" title="About">About</a></li>
              <li id="footer-link-search"><a href="/about/search.html" title="Search">Search</a></li>
              <li id="footer-link-feeds"><a href="/feeds.xml" title="Feeds">Feeds</a></li>
              <li id="footer-link-github"><a href="https://github.com/Neos21/" title="GitHub">GitHub</a></li>
            </ul>
          </nav>
          <nav id="to-top"><a href="#" title="To Top"><span>▲ To Top</span></a></nav>
        </div>
      </footer>
    </div>
  </body>
</html>
