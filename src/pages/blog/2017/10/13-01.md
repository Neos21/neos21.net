---
title        : iOS Safari で Web ページを「ホームに追加」した時にフルスクリーン表示にする
created      : 2017-10-13
last-modified: 2017-10-13
header-date  : true
path:
  - /index.html Neo's World
  - /blog/index.html Blog
  - /blog/2017/index.html 2017年
  - /blog/2017/10/index.html 10月
hidden-info:
  original-blog: Corredor
---

_iPhone などの Safari_ で任意の Web ページを開いている時に、下部のメニューから「_ホームに追加_」という項目を選択できる。コレを選択すると、そのページのブックマークがホーム画面に配置できるのだ。アイコンは適当に Favicon を拾ってきてくれて (なければページのサムネがアイコンになる)、パッと見は普通のアプリアイコンみたいにホーム画面に鎮座して面白い。

この「ホームに追加」だが、Web ページ側の HTML である指定をしておくと、ホーム画面のアイコンからページを開いた時にフルスクリーン表示にできるのだ。

## 試してみたい方は…

何のことを言っているのか分からない方、実際に試してみたい方は、iOS Safari で以下のページを開いてほしい。

- [iOS Safari Web Test](https://neos21.github.io/poc-ios-safari-web/capable-1.html)

ページを開いたら、メニューから「ホームに追加」を選択する。ホームに追加されたアイコンをタップしてページを開くと、Safari の URL バーやメニューなどが表示されず、フルスクリーンで Web ページが表示されていることが分かるだろう。

試しに、以下のトップページを「ホームに追加」してみて、その挙動の違いを確認してほしい。トップページはフルスクリーンモード設定をしていない普通のページなので、ホーム画面からアイコンを選んでも Safari の1タブで開く。

- [iOS Safari Web Test - Neo's GitHub Pages](https://neos21.github.io/poc-ios-safari-web/)

## 「ホームに追加」したページをフルスクリーンで表示させる

「ホームに追加」したページをフルスクリーンで表示させるには、当該ページの `head` 要素内に以下を追加する。

```html
<meta name="apple-mobile-web-app-capable" content="yes">
```

この __`apple-mobile-web-app-capable`__ という指定で、ホーム画面から起動した時にフルスクリーン表示になる。ちなみにこの `meta` 要素を指定していない場合は `no` もしくは `default` と同じ扱いになっているようだ。

## フルスクリーン表示の場合の仕様色々

このフルスクリーンモード、面白い動きをしているのでいくつか確認した仕様・挙動を記しておく。

- フルスクリーンモードで起動されたページは Safari アプリとは別のプロセスで起動する。
  - アプリスイッチャーで独立したアプリのように振る舞う。この `meta` 要素を指定しない場合は単純に Safari の1タブとして開く。
- ページ内のリンクを踏むと Safari に移動してしまう。
  - これは JavaScript で遷移を制御することで回避できるようだ。やり方は別途解説する。
- 「Safari」アプリで履歴を消したり、「設定」アプリでキャッシュをクリアしても、フルスクリーンモードで表示するページのキャッシュが強く残る。
  - 設定アプリで Safari のキャッシュをクリアしても、直後だとキャッシュが残っていて、そのページが更新されていても反映されないことがある。
  - Web ページのアプリアイコンをホーム画面から削除してみたり、何度か開き直したりしているうちに再読込してくれるが、イマイチキャッシュのタイミングが分からない。
  - とりあえず Safari とは少し独立して動いているようなので、開いた時に必ず再読込させるような仕組みをページ側で用意してやらないといけなさそう。

---

今まであまり使ったことのなかった「フルスクリーンモード」だが、「ニコニコチャンネル」アプリがこのやり方で任意のチャンネルのアプリアイコンをホーム画面に追加できる作りになっていて知った。

作り方によっては、App Store でアプリを配布したりせず、本当に Web ページだけでハイブリッドアプリを作ったりできるかもしれない。iOS ネイティブとの連携がそこまで必要なければ Cordova 要らずだろうか。

- [iOS Safari Web Test - Neo's GitHub Pages](https://neos21.github.io/poc-ios-safari-web/) … iOS Safari で使える HTML・CSS・JS を検証する GitHub Pages。
- [GitHub - Neos21/ios-safari-web-test: iOS Safari で使える HTML・CSS・JS を検証する](https://github.com/Neos21/poc-ios-safari-web) … 上述の GitHub Pages のリポジトリ。
